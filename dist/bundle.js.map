{"version":3,"file":"bundle.js","sources":["../vendor/rot.js","../vendor/eventbus.min.js","../src/utils.js","../src/actor.js","../src/controller.js","../src/controllers/player.js","../src/map/tile.js","../src/glyph.js","../src/map/tiletypes.js","../src/timer.js","../vendor/priority-queue.min.js","../src/floorpicker.js","../src/collapser.js","../src/map/map.js","../src/decorator.js","../src/animate.js","../src/controllers/frozen.js","../src/controllers/burning.js","../src/events.js","../src/item.js","../src/items.js","../src/itemfactory.js","../src/controllers/sentinel.js","../src/actors.js","../src/actorfactory.js","../src/map/generator.js","../src/game.js","../src/app.js"],"sourcesContent":["/*\r\n\tThis is rot.js, the ROguelike Toolkit in JavaScript.\r\n\tVersion 0.7~dev, generated on Thu 24 Nov 2016 08:07:39 MST.\r\n*/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define([], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals (root is window)\r\n        root.ROT = factory();\r\n    }\r\n}(this, function() {\r\n/**\r\n * @namespace Top-level ROT namespace\r\n */\r\nvar ROT = {\r\n\t/**\r\n\t * @returns {bool} Is rot.js supported by this browser?\r\n\t */\r\n\tisSupported: function() {\r\n\t\treturn !!(document.createElement(\"canvas\").getContext && Function.prototype.bind);\r\n\t},\r\n\r\n\t/** Default with for display and map generators */\r\n\tDEFAULT_WIDTH: 80,\r\n\t/** Default height for display and map generators */\r\n\tDEFAULT_HEIGHT: 25,\r\n\r\n\t/** Directional constants. Ordering is important! */\r\n\tDIRS: {\r\n\t\t\"4\": [\r\n\t\t\t[ 0, -1],\r\n\t\t\t[ 1,  0],\r\n\t\t\t[ 0,  1],\r\n\t\t\t[-1,  0]\r\n\t\t],\r\n\t\t\"8\": [\r\n\t\t\t[ 0, -1],\r\n\t\t\t[ 1, -1],\r\n\t\t\t[ 1,  0],\r\n\t\t\t[ 1,  1],\r\n\t\t\t[ 0,  1],\r\n\t\t\t[-1,  1],\r\n\t\t\t[-1,  0],\r\n\t\t\t[-1, -1]\r\n\t\t],\r\n\t\t\"6\": [\r\n\t\t\t[-1, -1],\r\n\t\t\t[ 1, -1],\r\n\t\t\t[ 2,  0],\r\n\t\t\t[ 1,  1],\r\n\t\t\t[-1,  1],\r\n\t\t\t[-2,  0]\r\n\t\t]\r\n\t},\r\n\r\n\t/** Cancel key. */\r\n\tVK_CANCEL: 3, \r\n\t/** Help key. */\r\n\tVK_HELP: 6, \r\n\t/** Backspace key. */\r\n\tVK_BACK_SPACE: 8, \r\n\t/** Tab key. */\r\n\tVK_TAB: 9, \r\n\t/** 5 key on Numpad when NumLock is unlocked. Or on Mac, clear key which is positioned at NumLock key. */\r\n\tVK_CLEAR: 12, \r\n\t/** Return/enter key on the main keyboard. */\r\n\tVK_RETURN: 13, \r\n\t/** Reserved, but not used. */\r\n\tVK_ENTER: 14, \r\n\t/** Shift key. */\r\n\tVK_SHIFT: 16, \r\n\t/** Control key. */\r\n\tVK_CONTROL: 17, \r\n\t/** Alt (Option on Mac) key. */\r\n\tVK_ALT: 18, \r\n\t/** Pause key. */\r\n\tVK_PAUSE: 19, \r\n\t/** Caps lock. */\r\n\tVK_CAPS_LOCK: 20, \r\n\t/** Escape key. */\r\n\tVK_ESCAPE: 27, \r\n\t/** Space bar. */\r\n\tVK_SPACE: 32, \r\n\t/** Page Up key. */\r\n\tVK_PAGE_UP: 33, \r\n\t/** Page Down key. */\r\n\tVK_PAGE_DOWN: 34, \r\n\t/** End key. */\r\n\tVK_END: 35, \r\n\t/** Home key. */\r\n\tVK_HOME: 36, \r\n\t/** Left arrow. */\r\n\tVK_LEFT: 37, \r\n\t/** Up arrow. */\r\n\tVK_UP: 38, \r\n\t/** Right arrow. */\r\n\tVK_RIGHT: 39, \r\n\t/** Down arrow. */\r\n\tVK_DOWN: 40, \r\n\t/** Print Screen key. */\r\n\tVK_PRINTSCREEN: 44, \r\n\t/** Ins(ert) key. */\r\n\tVK_INSERT: 45, \r\n\t/** Del(ete) key. */\r\n\tVK_DELETE: 46, \r\n\t/***/\r\n\tVK_0: 48,\r\n\t/***/\r\n\tVK_1: 49,\r\n\t/***/\r\n\tVK_2: 50,\r\n\t/***/\r\n\tVK_3: 51,\r\n\t/***/\r\n\tVK_4: 52,\r\n\t/***/\r\n\tVK_5: 53,\r\n\t/***/\r\n\tVK_6: 54,\r\n\t/***/\r\n\tVK_7: 55,\r\n\t/***/\r\n\tVK_8: 56,\r\n\t/***/\r\n\tVK_9: 57,\r\n\t/** Colon (:) key. Requires Gecko 15.0 */\r\n\tVK_COLON: 58, \r\n\t/** Semicolon (;) key. */\r\n\tVK_SEMICOLON: 59, \r\n\t/** Less-than (<) key. Requires Gecko 15.0 */\r\n\tVK_LESS_THAN: 60, \r\n\t/** Equals (=) key. */\r\n\tVK_EQUALS: 61, \r\n\t/** Greater-than (>) key. Requires Gecko 15.0 */\r\n\tVK_GREATER_THAN: 62, \r\n\t/** Question mark (?) key. Requires Gecko 15.0 */\r\n\tVK_QUESTION_MARK: 63, \r\n\t/** Atmark (@) key. Requires Gecko 15.0 */\r\n\tVK_AT: 64, \r\n\t/***/\r\n\tVK_A: 65,\r\n\t/***/\r\n\tVK_B: 66,\r\n\t/***/\r\n\tVK_C: 67,\r\n\t/***/\r\n\tVK_D: 68,\r\n\t/***/\r\n\tVK_E: 69,\r\n\t/***/\r\n\tVK_F: 70,\r\n\t/***/\r\n\tVK_G: 71,\r\n\t/***/\r\n\tVK_H: 72,\r\n\t/***/\r\n\tVK_I: 73,\r\n\t/***/\r\n\tVK_J: 74,\r\n\t/***/\r\n\tVK_K: 75,\r\n\t/***/\r\n\tVK_L: 76,\r\n\t/***/\r\n\tVK_M: 77,\r\n\t/***/\r\n\tVK_N: 78,\r\n\t/***/\r\n\tVK_O: 79,\r\n\t/***/\r\n\tVK_P: 80,\r\n\t/***/\r\n\tVK_Q: 81,\r\n\t/***/\r\n\tVK_R: 82,\r\n\t/***/\r\n\tVK_S: 83,\r\n\t/***/\r\n\tVK_T: 84,\r\n\t/***/\r\n\tVK_U: 85,\r\n\t/***/\r\n\tVK_V: 86,\r\n\t/***/\r\n\tVK_W: 87,\r\n\t/***/\r\n\tVK_X: 88,\r\n\t/***/\r\n\tVK_Y: 89,\r\n\t/***/\r\n\tVK_Z: 90,\r\n\t/***/\r\n\tVK_CONTEXT_MENU: 93,\r\n\t/** 0 on the numeric keypad. */\r\n\tVK_NUMPAD0: 96, \r\n\t/** 1 on the numeric keypad. */\r\n\tVK_NUMPAD1: 97, \r\n\t/** 2 on the numeric keypad. */\r\n\tVK_NUMPAD2: 98, \r\n\t/** 3 on the numeric keypad. */\r\n\tVK_NUMPAD3: 99, \r\n\t/** 4 on the numeric keypad. */\r\n\tVK_NUMPAD4: 100, \r\n\t/** 5 on the numeric keypad. */\r\n\tVK_NUMPAD5: 101, \r\n\t/** 6 on the numeric keypad. */\r\n\tVK_NUMPAD6: 102, \r\n\t/** 7 on the numeric keypad. */\r\n\tVK_NUMPAD7: 103, \r\n\t/** 8 on the numeric keypad. */\r\n\tVK_NUMPAD8: 104, \r\n\t/** 9 on the numeric keypad. */\r\n\tVK_NUMPAD9: 105, \r\n\t/** * on the numeric keypad. */\r\n\tVK_MULTIPLY: 106,\r\n\t/** + on the numeric keypad. */\r\n\tVK_ADD: 107, \r\n\t/***/\r\n\tVK_SEPARATOR: 108,\r\n\t/** - on the numeric keypad. */\r\n\tVK_SUBTRACT: 109, \r\n\t/** Decimal point on the numeric keypad. */\r\n\tVK_DECIMAL: 110, \r\n\t/** / on the numeric keypad. */\r\n\tVK_DIVIDE: 111, \r\n\t/** F1 key. */\r\n\tVK_F1: 112, \r\n\t/** F2 key. */\r\n\tVK_F2: 113, \r\n\t/** F3 key. */\r\n\tVK_F3: 114, \r\n\t/** F4 key. */\r\n\tVK_F4: 115, \r\n\t/** F5 key. */\r\n\tVK_F5: 116, \r\n\t/** F6 key. */\r\n\tVK_F6: 117, \r\n\t/** F7 key. */\r\n\tVK_F7: 118, \r\n\t/** F8 key. */\r\n\tVK_F8: 119, \r\n\t/** F9 key. */\r\n\tVK_F9: 120, \r\n\t/** F10 key. */\r\n\tVK_F10: 121, \r\n\t/** F11 key. */\r\n\tVK_F11: 122, \r\n\t/** F12 key. */\r\n\tVK_F12: 123, \r\n\t/** F13 key. */\r\n\tVK_F13: 124, \r\n\t/** F14 key. */\r\n\tVK_F14: 125, \r\n\t/** F15 key. */\r\n\tVK_F15: 126, \r\n\t/** F16 key. */\r\n\tVK_F16: 127, \r\n\t/** F17 key. */\r\n\tVK_F17: 128, \r\n\t/** F18 key. */\r\n\tVK_F18: 129, \r\n\t/** F19 key. */\r\n\tVK_F19: 130, \r\n\t/** F20 key. */\r\n\tVK_F20: 131, \r\n\t/** F21 key. */\r\n\tVK_F21: 132, \r\n\t/** F22 key. */\r\n\tVK_F22: 133, \r\n\t/** F23 key. */\r\n\tVK_F23: 134, \r\n\t/** F24 key. */\r\n\tVK_F24: 135, \r\n\t/** Num Lock key. */\r\n\tVK_NUM_LOCK: 144, \r\n\t/** Scroll Lock key. */\r\n\tVK_SCROLL_LOCK: 145, \r\n\t/** Circumflex (^) key. Requires Gecko 15.0 */\r\n\tVK_CIRCUMFLEX: 160, \r\n\t/** Exclamation (!) key. Requires Gecko 15.0 */\r\n\tVK_EXCLAMATION: 161, \r\n\t/** Double quote () key. Requires Gecko 15.0 */\r\n\tVK_DOUBLE_QUOTE: 162, \r\n\t/** Hash (#) key. Requires Gecko 15.0 */\r\n\tVK_HASH: 163, \r\n\t/** Dollar sign ($) key. Requires Gecko 15.0 */\r\n\tVK_DOLLAR: 164, \r\n\t/** Percent (%) key. Requires Gecko 15.0 */\r\n\tVK_PERCENT: 165, \r\n\t/** Ampersand (&) key. Requires Gecko 15.0 */\r\n\tVK_AMPERSAND: 166, \r\n\t/** Underscore (_) key. Requires Gecko 15.0 */\r\n\tVK_UNDERSCORE: 167, \r\n\t/** Open parenthesis (() key. Requires Gecko 15.0 */\r\n\tVK_OPEN_PAREN: 168, \r\n\t/** Close parenthesis ()) key. Requires Gecko 15.0 */\r\n\tVK_CLOSE_PAREN: 169, \r\n\t/* Asterisk (*) key. Requires Gecko 15.0 */\r\n\tVK_ASTERISK: 170,\r\n\t/** Plus (+) key. Requires Gecko 15.0 */\r\n\tVK_PLUS: 171, \r\n\t/** Pipe (|) key. Requires Gecko 15.0 */\r\n\tVK_PIPE: 172, \r\n\t/** Hyphen-US/docs/Minus (-) key. Requires Gecko 15.0 */\r\n\tVK_HYPHEN_MINUS: 173, \r\n\t/** Open curly bracket ({) key. Requires Gecko 15.0 */\r\n\tVK_OPEN_CURLY_BRACKET: 174, \r\n\t/** Close curly bracket (}) key. Requires Gecko 15.0 */\r\n\tVK_CLOSE_CURLY_BRACKET: 175, \r\n\t/** Tilde (~) key. Requires Gecko 15.0 */\r\n\tVK_TILDE: 176, \r\n\t/** Comma (,) key. */\r\n\tVK_COMMA: 188, \r\n\t/** Period (.) key. */\r\n\tVK_PERIOD: 190, \r\n\t/** Slash (/) key. */\r\n\tVK_SLASH: 191, \r\n\t/** Back tick (`) key. */\r\n\tVK_BACK_QUOTE: 192, \r\n\t/** Open square bracket ([) key. */\r\n\tVK_OPEN_BRACKET: 219, \r\n\t/** Back slash (\\) key. */\r\n\tVK_BACK_SLASH: 220, \r\n\t/** Close square bracket (]) key. */\r\n\tVK_CLOSE_BRACKET: 221, \r\n\t/** Quote (''') key. */\r\n\tVK_QUOTE: 222, \r\n\t/** Meta key on Linux, Command key on Mac. */\r\n\tVK_META: 224, \r\n\t/** AltGr key on Linux. Requires Gecko 15.0 */\r\n\tVK_ALTGR: 225, \r\n\t/** Windows logo key on Windows. Or Super or Hyper key on Linux. Requires Gecko 15.0 */\r\n\tVK_WIN: 91, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_KANA: 21, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_HANGUL: 21, \r\n\t/** 英数 key on Japanese Mac keyboard. Requires Gecko 15.0 */\r\n\tVK_EISU: 22, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_JUNJA: 23, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_FINAL: 24, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_HANJA: 25, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_KANJI: 25, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_CONVERT: 28, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_NONCONVERT: 29, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_ACCEPT: 30, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_MODECHANGE: 31, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_SELECT: 41, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_PRINT: 42, \r\n\t/** Linux support for this keycode was added in Gecko 4.0. */\r\n\tVK_EXECUTE: 43, \r\n\t/** Linux support for this keycode was added in Gecko 4.0.\t */\r\n\tVK_SLEEP: 95 \r\n};\r\n/**\r\n * @namespace\r\n * Contains text tokenization and breaking routines\r\n */\r\nROT.Text = {\r\n\tRE_COLORS: /%([bc]){([^}]*)}/g,\r\n\r\n\t/* token types */\r\n\tTYPE_TEXT:\t\t0,\r\n\tTYPE_NEWLINE:\t1,\r\n\tTYPE_FG:\t\t2,\r\n\tTYPE_BG:\t\t3,\r\n\r\n\t/**\r\n\t * Measure size of a resulting text block\r\n\t */\r\n\tmeasure: function(str, maxWidth) {\r\n\t\tvar result = {width:0, height:1};\r\n\t\tvar tokens = this.tokenize(str, maxWidth);\r\n\t\tvar lineWidth = 0;\r\n\r\n\t\tfor (var i=0;i<tokens.length;i++) {\r\n\t\t\tvar token = tokens[i];\r\n\t\t\tswitch (token.type) {\r\n\t\t\t\tcase this.TYPE_TEXT:\r\n\t\t\t\t\tlineWidth += token.value.length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase this.TYPE_NEWLINE:\r\n\t\t\t\t\tresult.height++;\r\n\t\t\t\t\tresult.width = Math.max(result.width, lineWidth);\r\n\t\t\t\t\tlineWidth = 0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tresult.width = Math.max(result.width, lineWidth);\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Convert string to a series of a formatting commands\r\n\t */\r\n\ttokenize: function(str, maxWidth) {\r\n\t\tvar result = [];\r\n\r\n\t\t/* first tokenization pass - split texts and color formatting commands */\r\n\t\tvar offset = 0;\r\n\t\tstr.replace(this.RE_COLORS, function(match, type, name, index) {\r\n\t\t\t/* string before */\r\n\t\t\tvar part = str.substring(offset, index);\r\n\t\t\tif (part.length) {\r\n\t\t\t\tresult.push({\r\n\t\t\t\t\ttype: ROT.Text.TYPE_TEXT,\r\n\t\t\t\t\tvalue: part\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t/* color command */\r\n\t\t\tresult.push({\r\n\t\t\t\ttype: (type == \"c\" ? ROT.Text.TYPE_FG : ROT.Text.TYPE_BG),\r\n\t\t\t\tvalue: name.trim()\r\n\t\t\t});\r\n\r\n\t\t\toffset = index + match.length;\r\n\t\t\treturn \"\";\r\n\t\t});\r\n\r\n\t\t/* last remaining part */\r\n\t\tvar part = str.substring(offset);\r\n\t\tif (part.length) {\r\n\t\t\tresult.push({\r\n\t\t\t\ttype: ROT.Text.TYPE_TEXT,\r\n\t\t\t\tvalue: part\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this._breakLines(result, maxWidth);\r\n\t},\r\n\r\n\t/* insert line breaks into first-pass tokenized data */\r\n\t_breakLines: function(tokens, maxWidth) {\r\n\t\tif (!maxWidth) { maxWidth = Infinity; }\r\n\r\n\t\tvar i = 0;\r\n\t\tvar lineLength = 0;\r\n\t\tvar lastTokenWithSpace = -1;\r\n\r\n\t\twhile (i < tokens.length) { /* take all text tokens, remove space, apply linebreaks */\r\n\t\t\tvar token = tokens[i];\r\n\t\t\tif (token.type == ROT.Text.TYPE_NEWLINE) { /* reset */\r\n\t\t\t\tlineLength = 0; \r\n\t\t\t\tlastTokenWithSpace = -1;\r\n\t\t\t}\r\n\t\t\tif (token.type != ROT.Text.TYPE_TEXT) { /* skip non-text tokens */\r\n\t\t\t\ti++;\r\n\t\t\t\tcontinue; \r\n\t\t\t}\r\n\r\n\t\t\t/* remove spaces at the beginning of line */\r\n\t\t\twhile (lineLength == 0 && token.value.charAt(0) == \" \") { token.value = token.value.substring(1); }\r\n\r\n\t\t\t/* forced newline? insert two new tokens after this one */\r\n\t\t\tvar index = token.value.indexOf(\"\\n\");\r\n\t\t\tif (index != -1) { \r\n\t\t\t\ttoken.value = this._breakInsideToken(tokens, i, index, true); \r\n\r\n\t\t\t\t/* if there are spaces at the end, we must remove them (we do not want the line too long) */\r\n\t\t\t\tvar arr = token.value.split(\"\");\r\n\t\t\t\twhile (arr.length && arr[arr.length-1] == \" \") { arr.pop(); }\r\n\t\t\t\ttoken.value = arr.join(\"\");\r\n\t\t\t}\r\n\r\n\t\t\t/* token degenerated? */\r\n\t\t\tif (!token.value.length) {\r\n\t\t\t\ttokens.splice(i, 1);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif (lineLength + token.value.length > maxWidth) { /* line too long, find a suitable breaking spot */\r\n\r\n\t\t\t\t/* is it possible to break within this token? */\r\n\t\t\t\tvar index = -1;\r\n\t\t\t\twhile (1) {\r\n\t\t\t\t\tvar nextIndex = token.value.indexOf(\" \", index+1);\r\n\t\t\t\t\tif (nextIndex == -1) { break; }\r\n\t\t\t\t\tif (lineLength + nextIndex > maxWidth) { break; }\r\n\t\t\t\t\tindex = nextIndex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (index != -1) { /* break at space within this one */\r\n\t\t\t\t\ttoken.value = this._breakInsideToken(tokens, i, index, true);\r\n\t\t\t\t} else if (lastTokenWithSpace != -1) { /* is there a previous token where a break can occur? */\r\n\t\t\t\t\tvar token = tokens[lastTokenWithSpace];\r\n\t\t\t\t\tvar breakIndex = token.value.lastIndexOf(\" \");\r\n\t\t\t\t\ttoken.value = this._breakInsideToken(tokens, lastTokenWithSpace, breakIndex, true);\r\n\t\t\t\t\ti = lastTokenWithSpace;\r\n\t\t\t\t} else { /* force break in this token */\r\n\t\t\t\t\ttoken.value = this._breakInsideToken(tokens, i, maxWidth-lineLength, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else { /* line not long, continue */\r\n\t\t\t\tlineLength += token.value.length;\r\n\t\t\t\tif (token.value.indexOf(\" \") != -1) { lastTokenWithSpace = i; }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ti++; /* advance to next token */\r\n\t\t}\r\n\r\n\r\n\t\ttokens.push({type: ROT.Text.TYPE_NEWLINE}); /* insert fake newline to fix the last text line */\r\n\r\n\t\t/* remove trailing space from text tokens before newlines */\r\n\t\tvar lastTextToken = null;\r\n\t\tfor (var i=0;i<tokens.length;i++) {\r\n\t\t\tvar token = tokens[i];\r\n\t\t\tswitch (token.type) {\r\n\t\t\t\tcase ROT.Text.TYPE_TEXT: lastTextToken = token; break;\r\n\t\t\t\tcase ROT.Text.TYPE_NEWLINE: \r\n\t\t\t\t\tif (lastTextToken) { /* remove trailing space */\r\n\t\t\t\t\t\tvar arr = lastTextToken.value.split(\"\");\r\n\t\t\t\t\t\twhile (arr.length && arr[arr.length-1] == \" \") { arr.pop(); }\r\n\t\t\t\t\t\tlastTextToken.value = arr.join(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastTextToken = null;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttokens.pop(); /* remove fake token */\r\n\r\n\t\treturn tokens;\r\n\t},\r\n\r\n\t/**\r\n\t * Create new tokens and insert them into the stream\r\n\t * @param {object[]} tokens\r\n\t * @param {int} tokenIndex Token being processed\r\n\t * @param {int} breakIndex Index within current token's value\r\n\t * @param {bool} removeBreakChar Do we want to remove the breaking character?\r\n\t * @returns {string} remaining unbroken token value\r\n\t */\r\n\t_breakInsideToken: function(tokens, tokenIndex, breakIndex, removeBreakChar) {\r\n\t\tvar newBreakToken = {\r\n\t\t\ttype: ROT.Text.TYPE_NEWLINE\r\n\t\t};\r\n\t\tvar newTextToken = {\r\n\t\t\ttype: ROT.Text.TYPE_TEXT,\r\n\t\t\tvalue: tokens[tokenIndex].value.substring(breakIndex + (removeBreakChar ? 1 : 0))\r\n\t\t};\r\n\t\ttokens.splice(tokenIndex+1, 0, newBreakToken, newTextToken);\r\n\t\treturn tokens[tokenIndex].value.substring(0, breakIndex);\r\n\t}\r\n};\r\n/**\r\n * @returns {any} Randomly picked item, null when length=0\r\n */\r\nArray.prototype.random = Array.prototype.random || function() {\r\n\tif (!this.length) { return null; }\r\n\treturn this[Math.floor(ROT.RNG.getUniform() * this.length)];\r\n};\r\n\r\n/**\r\n * @returns {array} New array with randomized items\r\n */\r\nArray.prototype.randomize = Array.prototype.randomize || function() {\r\n  var result = [];\r\n  var clone = this.slice();\r\n  while (clone.length) {\r\n    var index = clone.indexOf(clone.random());\r\n    result.push(clone.splice(index, 1)[0]);\r\n  }\r\n  return result;\r\n};\r\n/**\r\n * Always positive modulus\r\n * @param {int} n Modulus\r\n * @returns {int} this modulo n\r\n */\r\nNumber.prototype.mod = Number.prototype.mod || function(n) {\r\n\treturn ((this%n)+n)%n;\r\n};\r\n/**\r\n * @returns {string} First letter capitalized\r\n */\r\nString.prototype.capitalize = String.prototype.capitalize || function() {\r\n\treturn this.charAt(0).toUpperCase() + this.substring(1);\r\n};\r\n\r\n/** \r\n * Left pad\r\n * @param {string} [character=\"0\"]\r\n * @param {int} [count=2]\r\n */\r\nString.prototype.lpad = String.prototype.lpad || function(character, count) {\r\n\tvar ch = character || \"0\";\r\n\tvar cnt = count || 2;\r\n\r\n\tvar s = \"\";\r\n\twhile (s.length < (cnt - this.length)) { s += ch; }\r\n\ts = s.substring(0, cnt-this.length);\r\n\treturn s+this;\r\n};\r\n\r\n/** \r\n * Right pad\r\n * @param {string} [character=\"0\"]\r\n * @param {int} [count=2]\r\n */\r\nString.prototype.rpad = String.prototype.rpad || function(character, count) {\r\n\tvar ch = character || \"0\";\r\n\tvar cnt = count || 2;\r\n\r\n\tvar s = \"\";\r\n\twhile (s.length < (cnt - this.length)) { s += ch; }\r\n\ts = s.substring(0, cnt-this.length);\r\n\treturn this+s;\r\n};\r\n\r\n/**\r\n * Format a string in a flexible way. Scans for %s strings and replaces them with arguments. List of patterns is modifiable via String.format.map.\r\n * @param {string} template\r\n * @param {any} [argv]\r\n */\r\nString.format = String.format || function(template) {\r\n\tvar map = String.format.map;\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar replacer = function(match, group1, group2, index) {\r\n\t\tif (template.charAt(index-1) == \"%\") { return match.substring(1); }\r\n\t\tif (!args.length) { return match; }\r\n\t\tvar obj = args[0];\r\n\r\n\t\tvar group = group1 || group2;\r\n\t\tvar parts = group.split(\",\");\r\n\t\tvar name = parts.shift();\r\n\t\tvar method = map[name.toLowerCase()];\r\n\t\tif (!method) { return match; }\r\n\r\n\t\tvar obj = args.shift();\r\n\t\tvar replaced = obj[method].apply(obj, parts);\r\n\r\n\t\tvar first = name.charAt(0);\r\n\t\tif (first != first.toLowerCase()) { replaced = replaced.capitalize(); }\r\n\r\n\t\treturn replaced;\r\n\t};\r\n\treturn template.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi, replacer);\r\n};\r\n\r\nString.format.map = String.format.map || {\r\n\t\"s\": \"toString\"\r\n};\r\n\r\n/**\r\n * Convenience shortcut to String.format(this)\r\n */\r\nString.prototype.format = String.prototype.format || function() {\r\n\tvar args = Array.prototype.slice.call(arguments);\r\n\targs.unshift(this);\r\n\treturn String.format.apply(String, args);\r\n};\r\n\r\nif (!Object.create) {  \r\n\t/**\r\n\t * ES5 Object.create\r\n\t */\r\n\tObject.create = function(o) {  \r\n\t\tvar tmp = function() {};\r\n\t\ttmp.prototype = o;\r\n\t\treturn new tmp();\r\n\t};  \r\n}  \r\n/**\r\n * Sets prototype of this function to an instance of parent function\r\n * @param {function} parent\r\n */\r\nFunction.prototype.extend = Function.prototype.extend || function(parent) {\r\n\tthis.prototype = Object.create(parent.prototype);\r\n\tthis.prototype.constructor = this;\r\n\treturn this;\r\n};\r\nif (typeof window != \"undefined\") {\r\n\twindow.requestAnimationFrame =\r\n\t\twindow.requestAnimationFrame\r\n\t\t|| window.mozRequestAnimationFrame\r\n\t\t|| window.webkitRequestAnimationFrame\r\n\t\t|| window.oRequestAnimationFrame\r\n\t\t|| window.msRequestAnimationFrame\r\n\t\t|| function(cb) { return setTimeout(cb, 1000/60); };\r\n\r\n\twindow.cancelAnimationFrame =\r\n\t\twindow.cancelAnimationFrame\r\n\t\t|| window.mozCancelAnimationFrame\r\n\t\t|| window.webkitCancelAnimationFrame\r\n\t\t|| window.oCancelAnimationFrame\r\n\t\t|| window.msCancelAnimationFrame\r\n\t\t|| function(id) { return clearTimeout(id); };\r\n}\r\n/**\r\n * @class Visual map display\r\n * @param {object} [options]\r\n * @param {int} [options.width=ROT.DEFAULT_WIDTH]\r\n * @param {int} [options.height=ROT.DEFAULT_HEIGHT]\r\n * @param {int} [options.fontSize=15]\r\n * @param {string} [options.fontFamily=\"monospace\"]\r\n * @param {string} [options.fontStyle=\"\"] bold/italic/none/both\r\n * @param {string} [options.fg=\"#ccc\"]\r\n * @param {string} [options.bg=\"#000\"]\r\n * @param {float} [options.spacing=1]\r\n * @param {float} [options.border=0]\r\n * @param {string} [options.layout=\"rect\"]\r\n * @param {bool} [options.forceSquareRatio=false]\r\n * @param {int} [options.tileWidth=32]\r\n * @param {int} [options.tileHeight=32]\r\n * @param {object} [options.tileMap={}]\r\n * @param {image} [options.tileSet=null]\r\n * @param {image} [options.tileColorize=false]\r\n */\r\nROT.Display = function(options) {\r\n\tvar canvas = document.createElement(\"canvas\");\r\n\tthis._context = canvas.getContext(\"2d\");\r\n\tthis._data = {};\r\n\tthis._dirty = false; /* false = nothing, true = all, object = dirty cells */\r\n\tthis._options = {};\r\n\tthis._backend = null;\r\n\t\r\n\tvar defaultOptions = {\r\n\t\twidth: ROT.DEFAULT_WIDTH,\r\n\t\theight: ROT.DEFAULT_HEIGHT,\r\n\t\ttranspose: false,\r\n\t\tlayout: \"rect\",\r\n\t\tfontSize: 15,\r\n\t\tspacing: 1,\r\n\t\tborder: 0,\r\n\t\tforceSquareRatio: false,\r\n\t\tfontFamily: \"monospace\",\r\n\t\tfontStyle: \"\",\r\n\t\tfg: \"#ccc\",\r\n\t\tbg: \"#000\",\r\n\t\ttileWidth: 32,\r\n\t\ttileHeight: 32,\r\n\t\ttileMap: {},\r\n\t\ttileSet: null,\r\n\t\ttileColorize: false,\r\n\t\ttermColor: \"xterm\"\r\n\t};\r\n\tfor (var p in options) { defaultOptions[p] = options[p]; }\r\n\tthis.setOptions(defaultOptions);\r\n\tthis.DEBUG = this.DEBUG.bind(this);\r\n\r\n\tthis._tick = this._tick.bind(this);\r\n\trequestAnimationFrame(this._tick);\r\n};\r\n\r\n/**\r\n * Debug helper, ideal as a map generator callback. Always bound to this.\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} what\r\n */\r\nROT.Display.prototype.DEBUG = function(x, y, what) {\r\n\tvar colors = [this._options.bg, this._options.fg];\r\n\tthis.draw(x, y, null, null, colors[what % colors.length]);\r\n};\r\n\r\n/**\r\n * Clear the whole display (cover it with background color)\r\n */\r\nROT.Display.prototype.clear = function() {\r\n\tthis._data = {};\r\n\tthis._dirty = true;\r\n};\r\n\r\n/**\r\n * @see ROT.Display\r\n */\r\nROT.Display.prototype.setOptions = function(options) {\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\tif (options.width || options.height || options.fontSize || options.fontFamily || options.spacing || options.layout) {\r\n\t\tif (options.layout) { \r\n\t\t\tthis._backend = new ROT.Display[options.layout.capitalize()](this._context);\r\n\t\t}\r\n\r\n\t\tvar font = (this._options.fontStyle ? this._options.fontStyle + \" \" : \"\") + this._options.fontSize + \"px \" + this._options.fontFamily;\r\n\t\tthis._context.font = font;\r\n\t\tthis._backend.compute(this._options);\r\n\t\tthis._context.font = font;\r\n\t\tthis._context.textAlign = \"center\";\r\n\t\tthis._context.textBaseline = \"middle\";\r\n\t\tthis._dirty = true;\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Returns currently set options\r\n * @returns {object} Current options object \r\n */\r\nROT.Display.prototype.getOptions = function() {\r\n\treturn this._options;\r\n};\r\n\r\n/**\r\n * Returns the DOM node of this display\r\n * @returns {node} DOM node\r\n */\r\nROT.Display.prototype.getContainer = function() {\r\n\treturn this._context.canvas;\r\n};\r\n\r\n/**\r\n * Compute the maximum width/height to fit into a set of given constraints\r\n * @param {int} availWidth Maximum allowed pixel width\r\n * @param {int} availHeight Maximum allowed pixel height\r\n * @returns {int[2]} cellWidth,cellHeight\r\n */\r\nROT.Display.prototype.computeSize = function(availWidth, availHeight) {\r\n\treturn this._backend.computeSize(availWidth, availHeight, this._options);\r\n};\r\n\r\n/**\r\n * Compute the maximum font size to fit into a set of given constraints\r\n * @param {int} availWidth Maximum allowed pixel width\r\n * @param {int} availHeight Maximum allowed pixel height\r\n * @returns {int} fontSize\r\n */\r\nROT.Display.prototype.computeFontSize = function(availWidth, availHeight) {\r\n\treturn this._backend.computeFontSize(availWidth, availHeight, this._options);\r\n};\r\n\r\n/**\r\n * Convert a DOM event (mouse or touch) to map coordinates. Uses first touch for multi-touch.\r\n * @param {Event} e event\r\n * @returns {int[2]} -1 for values outside of the canvas\r\n */\r\nROT.Display.prototype.eventToPosition = function(e) {\r\n\tif (e.touches) {\r\n\t\tvar x = e.touches[0].clientX;\r\n\t\tvar y = e.touches[0].clientY;\r\n\t} else {\r\n\t\tvar x = e.clientX;\r\n\t\tvar y = e.clientY;\r\n\t}\r\n\r\n\tvar rect = this._context.canvas.getBoundingClientRect();\r\n\tx -= rect.left;\r\n\ty -= rect.top;\r\n\t\r\n\tx *= this._context.canvas.width / this._context.canvas.clientWidth;\r\n\ty *= this._context.canvas.height / this._context.canvas.clientHeight;\r\n\r\n\tif (x < 0 || y < 0 || x >= this._context.canvas.width || y >= this._context.canvas.height) { return [-1, -1]; }\r\n\r\n\treturn this._backend.eventToPosition(x, y);\r\n};\r\n\r\n/**\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {string || string[]} ch One or more chars (will be overlapping themselves)\r\n * @param {string} [fg] foreground color\r\n * @param {string} [bg] background color\r\n */\r\nROT.Display.prototype.draw = function(x, y, ch, fg, bg) {\r\n\tif (!fg) { fg = this._options.fg; }\r\n\tif (!bg) { bg = this._options.bg; }\r\n\tthis._data[x+\",\"+y] = [x, y, ch, fg, bg];\r\n\t\r\n\tif (this._dirty === true) { return; } /* will already redraw everything */\r\n\tif (!this._dirty) { this._dirty = {}; } /* first! */\r\n\tthis._dirty[x+\",\"+y] = true;\r\n};\r\n\r\n/**\r\n * Draws a text at given position. Optionally wraps at a maximum length. Currently does not work with hex layout.\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {string} text May contain color/background format specifiers, %c{name}/%b{name}, both optional. %c{}/%b{} resets to default.\r\n * @param {int} [maxWidth] wrap at what width?\r\n * @returns {int} lines drawn\r\n */\r\nROT.Display.prototype.drawText = function(x, y, text, maxWidth) {\r\n\tvar fg = null;\r\n\tvar bg = null;\r\n\tvar cx = x;\r\n\tvar cy = y;\r\n\tvar lines = 1;\r\n\tif (!maxWidth) { maxWidth = this._options.width-x; }\r\n\r\n\tvar tokens = ROT.Text.tokenize(text, maxWidth);\r\n\r\n\twhile (tokens.length) { /* interpret tokenized opcode stream */\r\n\t\tvar token = tokens.shift();\r\n\t\tswitch (token.type) {\r\n\t\t\tcase ROT.Text.TYPE_TEXT:\r\n\t\t\t\tvar isSpace = false, isPrevSpace = false, isFullWidth = false, isPrevFullWidth = false;\r\n\t\t\t\tfor (var i=0;i<token.value.length;i++) {\r\n\t\t\t\t\tvar cc = token.value.charCodeAt(i);\r\n\t\t\t\t\tvar c = token.value.charAt(i);\r\n\t\t\t\t\t// Assign to `true` when the current char is full-width.\r\n\t\t\t\t\tisFullWidth = (cc > 0xff00 && cc < 0xff61) || (cc > 0xffdc && cc < 0xffe8) || cc > 0xffee;\r\n\t\t\t\t\t// Current char is space, whatever full-width or half-width both are OK.\r\n\t\t\t\t\tisSpace = (c.charCodeAt(0) == 0x20 || c.charCodeAt(0) == 0x3000);\r\n\t\t\t\t\t// The previous char is full-width and\r\n\t\t\t\t\t// current char is nether half-width nor a space.\r\n\t\t\t\t\tif (isPrevFullWidth && !isFullWidth && !isSpace) { cx++; } // add an extra position\r\n\t\t\t\t\t// The current char is full-width and\r\n\t\t\t\t\t// the previous char is not a space.\r\n\t\t\t\t\tif(isFullWidth && !isPrevSpace) { cx++; } // add an extra position\r\n\t\t\t\t\tthis.draw(cx++, cy, c, fg, bg);\r\n\t\t\t\t\tisPrevSpace = isSpace;\r\n\t\t\t\t\tisPrevFullWidth = isFullWidth;\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase ROT.Text.TYPE_FG:\r\n\t\t\t\tfg = token.value || null;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase ROT.Text.TYPE_BG:\r\n\t\t\t\tbg = token.value || null;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase ROT.Text.TYPE_NEWLINE:\r\n\t\t\t\tcx = x;\r\n\t\t\t\tcy++;\r\n\t\t\t\tlines++;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn lines;\r\n};\r\n\r\n/**\r\n * Timer tick: update dirty parts\r\n */\r\nROT.Display.prototype._tick = function() {\r\n\trequestAnimationFrame(this._tick);\r\n\r\n\tif (!this._dirty) { return; }\r\n\r\n\tif (this._dirty === true) { /* draw all */\r\n\t\tthis._context.fillStyle = this._options.bg;\r\n\t\tthis._context.fillRect(0, 0, this._context.canvas.width, this._context.canvas.height);\r\n\r\n\t\tfor (var id in this._data) { /* redraw cached data */\r\n\t\t\tthis._draw(id, false);\r\n\t\t}\r\n\r\n\t} else { /* draw only dirty */\r\n\t\tfor (var key in this._dirty) {\r\n\t\t\tthis._draw(key, true);\r\n\t\t}\r\n\t}\r\n\r\n\tthis._dirty = false;\r\n};\r\n\r\n/**\r\n * @param {string} key What to draw\r\n * @param {bool} clearBefore Is it necessary to clean before?\r\n */\r\nROT.Display.prototype._draw = function(key, clearBefore) {\r\n\tvar data = this._data[key];\r\n\tif (data[4] != this._options.bg) { clearBefore = true; }\r\n\r\n\tthis._backend.draw(data, clearBefore);\r\n};\r\n/**\r\n * @class Abstract display backend module\r\n * @private\r\n */\r\nROT.Display.Backend = function(context) {\r\n\tthis._context = context;\r\n};\r\n\r\nROT.Display.Backend.prototype.compute = function(options) {\r\n};\r\n\r\nROT.Display.Backend.prototype.draw = function(data, clearBefore) {\r\n};\r\n\r\nROT.Display.Backend.prototype.computeSize = function(availWidth, availHeight) {\r\n};\r\n\r\nROT.Display.Backend.prototype.computeFontSize = function(availWidth, availHeight) {\r\n};\r\n\r\nROT.Display.Backend.prototype.eventToPosition = function(x, y) {\r\n};\r\n/**\r\n * @class Rectangular backend\r\n * @private\r\n */\r\nROT.Display.Rect = function(context) {\r\n\tROT.Display.Backend.call(this, context);\r\n\t\r\n\tthis._spacingX = 0;\r\n\tthis._spacingY = 0;\r\n\tthis._canvasCache = {};\r\n\tthis._options = {};\r\n};\r\nROT.Display.Rect.extend(ROT.Display.Backend);\r\n\r\nROT.Display.Rect.cache = false;\r\n\r\nROT.Display.Rect.prototype.compute = function(options) {\r\n\tthis._canvasCache = {};\r\n\tthis._options = options;\r\n\r\n\tvar charWidth = Math.ceil(this._context.measureText(\"W\").width);\r\n\tthis._spacingX = Math.ceil(options.spacing * charWidth);\r\n\tthis._spacingY = Math.ceil(options.spacing * options.fontSize);\r\n\r\n\tif (this._options.forceSquareRatio) {\r\n\t\tthis._spacingX = this._spacingY = Math.max(this._spacingX, this._spacingY);\r\n\t}\r\n\r\n\tthis._context.canvas.width = options.width * this._spacingX;\r\n\tthis._context.canvas.height = options.height * this._spacingY;\r\n};\r\n\r\nROT.Display.Rect.prototype.draw = function(data, clearBefore) {\r\n\tif (this.constructor.cache) {\r\n\t\tthis._drawWithCache(data, clearBefore);\r\n\t} else {\r\n\t\tthis._drawNoCache(data, clearBefore);\r\n\t}\r\n};\r\n\r\nROT.Display.Rect.prototype._drawWithCache = function(data, clearBefore) {\r\n\tvar x = data[0];\r\n\tvar y = data[1];\r\n\tvar ch = data[2];\r\n\tvar fg = data[3];\r\n\tvar bg = data[4];\r\n\r\n\tvar hash = \"\"+ch+fg+bg;\r\n\tif (hash in this._canvasCache) {\r\n\t\tvar canvas = this._canvasCache[hash];\r\n\t} else {\r\n\t\tvar b = this._options.border;\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = this._spacingX;\r\n\t\tcanvas.height = this._spacingY;\r\n\t\tctx.fillStyle = bg;\r\n\t\tctx.fillRect(b, b, canvas.width-b, canvas.height-b);\r\n\t\t\r\n\t\tif (ch) {\r\n\t\t\tctx.fillStyle = fg;\r\n\t\t\tctx.font = this._context.font;\r\n\t\t\tctx.textAlign = \"center\";\r\n\t\t\tctx.textBaseline = \"middle\";\r\n\r\n\t\t\tvar chars = [].concat(ch);\r\n\t\t\tfor (var i=0;i<chars.length;i++) {\r\n\t\t\t\tctx.fillText(chars[i], this._spacingX/2, Math.ceil(this._spacingY/2));\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._canvasCache[hash] = canvas;\r\n\t}\r\n\t\r\n\tthis._context.drawImage(canvas, x*this._spacingX, y*this._spacingY);\r\n};\r\n\r\nROT.Display.Rect.prototype._drawNoCache = function(data, clearBefore) {\r\n\tvar x = data[0];\r\n\tvar y = data[1];\r\n\tvar ch = data[2];\r\n\tvar fg = data[3];\r\n\tvar bg = data[4];\r\n\r\n\tif (clearBefore) { \r\n\t\tvar b = this._options.border;\r\n\t\tthis._context.fillStyle = bg;\r\n\t\tthis._context.fillRect(x*this._spacingX + b, y*this._spacingY + b, this._spacingX - b, this._spacingY - b);\r\n\t}\r\n\t\r\n\tif (!ch) { return; }\r\n\r\n\tthis._context.fillStyle = fg;\r\n\r\n\tvar chars = [].concat(ch);\r\n\tfor (var i=0;i<chars.length;i++) {\r\n\t\tthis._context.fillText(chars[i], (x+0.5) * this._spacingX, Math.ceil((y+0.5) * this._spacingY));\r\n\t}\r\n};\r\n\r\nROT.Display.Rect.prototype.computeSize = function(availWidth, availHeight) {\r\n\tvar width = Math.floor(availWidth / this._spacingX);\r\n\tvar height = Math.floor(availHeight / this._spacingY);\r\n\treturn [width, height];\r\n};\r\n\r\nROT.Display.Rect.prototype.computeFontSize = function(availWidth, availHeight) {\r\n\tvar boxWidth = Math.floor(availWidth / this._options.width);\r\n\tvar boxHeight = Math.floor(availHeight / this._options.height);\r\n\r\n\t/* compute char ratio */\r\n\tvar oldFont = this._context.font;\r\n\tthis._context.font = \"100px \" + this._options.fontFamily;\r\n\tvar width = Math.ceil(this._context.measureText(\"W\").width);\r\n\tthis._context.font = oldFont;\r\n\tvar ratio = width / 100;\r\n\t\t\r\n\tvar widthFraction = ratio * boxHeight / boxWidth;\r\n\tif (widthFraction > 1) { /* too wide with current aspect ratio */\r\n\t\tboxHeight = Math.floor(boxHeight / widthFraction);\r\n\t}\r\n\treturn Math.floor(boxHeight / this._options.spacing);\r\n};\r\n\r\nROT.Display.Rect.prototype.eventToPosition = function(x, y) {\r\n\treturn [Math.floor(x/this._spacingX), Math.floor(y/this._spacingY)];\r\n};\r\n/**\r\n * @class Hexagonal backend\r\n * @private\r\n */\r\nROT.Display.Hex = function(context) {\r\n\tROT.Display.Backend.call(this, context);\r\n\r\n\tthis._spacingX = 0;\r\n\tthis._spacingY = 0;\r\n\tthis._hexSize = 0;\r\n\tthis._options = {};\r\n};\r\nROT.Display.Hex.extend(ROT.Display.Backend);\r\n\r\nROT.Display.Hex.prototype.compute = function(options) {\r\n\tthis._options = options;\r\n\r\n\t/* FIXME char size computation does not respect transposed hexes */\r\n\tvar charWidth = Math.ceil(this._context.measureText(\"W\").width);\r\n\tthis._hexSize = Math.floor(options.spacing * (options.fontSize + charWidth/Math.sqrt(3)) / 2);\r\n\tthis._spacingX = this._hexSize * Math.sqrt(3) / 2;\r\n\tthis._spacingY = this._hexSize * 1.5;\r\n\r\n\tif (options.transpose) {\r\n\t\tvar xprop = \"height\";\r\n\t\tvar yprop = \"width\";\r\n\t} else {\r\n\t\tvar xprop = \"width\";\r\n\t\tvar yprop = \"height\";\r\n\t}\r\n\tthis._context.canvas[xprop] = Math.ceil( (options.width + 1) * this._spacingX );\r\n\tthis._context.canvas[yprop] = Math.ceil( (options.height - 1) * this._spacingY + 2*this._hexSize );\r\n};\r\n\r\nROT.Display.Hex.prototype.draw = function(data, clearBefore) {\r\n\tvar x = data[0];\r\n\tvar y = data[1];\r\n\tvar ch = data[2];\r\n\tvar fg = data[3];\r\n\tvar bg = data[4];\r\n\r\n\tvar px = [\r\n\t\t(x+1) * this._spacingX,\r\n\t\ty * this._spacingY + this._hexSize\r\n\t];\r\n\tif (this._options.transpose) { px.reverse(); }\r\n\r\n\tif (clearBefore) {\r\n\t\tthis._context.fillStyle = bg;\r\n\t\tthis._fill(px[0], px[1]);\r\n\t}\r\n\r\n\tif (!ch) { return; }\r\n\r\n\tthis._context.fillStyle = fg;\r\n\r\n\tvar chars = [].concat(ch);\r\n\tfor (var i=0;i<chars.length;i++) {\r\n\t\tthis._context.fillText(chars[i], px[0], Math.ceil(px[1]));\r\n\t}\r\n};\r\n\r\nROT.Display.Hex.prototype.computeSize = function(availWidth, availHeight) {\r\n\tif (this._options.transpose) {\r\n\t\tavailWidth += availHeight;\r\n\t\tavailHeight = availWidth - availHeight;\r\n\t\tavailWidth -= availHeight;\r\n\t}\r\n\r\n\tvar width = Math.floor(availWidth / this._spacingX) - 1;\r\n\tvar height = Math.floor((availHeight - 2*this._hexSize) / this._spacingY + 1);\r\n\treturn [width, height];\r\n};\r\n\r\nROT.Display.Hex.prototype.computeFontSize = function(availWidth, availHeight) {\r\n\tif (this._options.transpose) {\r\n\t\tavailWidth += availHeight;\r\n\t\tavailHeight = availWidth - availHeight;\r\n\t\tavailWidth -= availHeight;\r\n\t}\r\n\r\n\tvar hexSizeWidth = 2*availWidth / ((this._options.width+1) * Math.sqrt(3)) - 1;\r\n\tvar hexSizeHeight = availHeight / (2 + 1.5*(this._options.height-1));\r\n\tvar hexSize = Math.min(hexSizeWidth, hexSizeHeight);\r\n\r\n\t/* compute char ratio */\r\n\tvar oldFont = this._context.font;\r\n\tthis._context.font = \"100px \" + this._options.fontFamily;\r\n\tvar width = Math.ceil(this._context.measureText(\"W\").width);\r\n\tthis._context.font = oldFont;\r\n\tvar ratio = width / 100;\r\n\r\n\thexSize = Math.floor(hexSize)+1; /* closest larger hexSize */\r\n\r\n\t/* FIXME char size computation does not respect transposed hexes */\r\n\tvar fontSize = 2*hexSize / (this._options.spacing * (1 + ratio / Math.sqrt(3)));\r\n\r\n\t/* closest smaller fontSize */\r\n\treturn Math.ceil(fontSize)-1;\r\n};\r\n\r\nROT.Display.Hex.prototype.eventToPosition = function(x, y) {\r\n\tif (this._options.transpose) {\r\n\t\tx += y;\r\n\t\ty = x-y;\r\n\t\tx -= y;\r\n\t\tvar nodeSize = this._context.canvas.width;\r\n\t} else {\r\n\t\tvar nodeSize = this._context.canvas.height;\r\n\t}\r\n\tvar size = nodeSize / this._options.height;\r\n\ty = Math.floor(y/size);\r\n\r\n\tif (y.mod(2)) { /* odd row */\r\n\t\tx -= this._spacingX;\r\n\t\tx = 1 + 2*Math.floor(x/(2*this._spacingX));\r\n\t} else {\r\n\t\tx = 2*Math.floor(x/(2*this._spacingX));\r\n\t}\r\n\r\n\treturn [x, y];\r\n};\r\n\r\n/**\r\n * Arguments are pixel values. If \"transposed\" mode is enabled, then these two are already swapped.\r\n */\r\nROT.Display.Hex.prototype._fill = function(cx, cy) {\r\n\tvar a = this._hexSize;\r\n\tvar b = this._options.border;\r\n\r\n\tthis._context.beginPath();\r\n\r\n\tif (this._options.transpose) {\r\n\t\tthis._context.moveTo(cx-a+b,\tcy);\r\n\t\tthis._context.lineTo(cx-a/2+b,\tcy+this._spacingX-b);\r\n\t\tthis._context.lineTo(cx+a/2-b,\tcy+this._spacingX-b);\r\n\t\tthis._context.lineTo(cx+a-b,\tcy);\r\n\t\tthis._context.lineTo(cx+a/2-b,\tcy-this._spacingX+b);\r\n\t\tthis._context.lineTo(cx-a/2+b,\tcy-this._spacingX+b);\r\n\t\tthis._context.lineTo(cx-a+b,\tcy);\r\n\t} else {\r\n\t\tthis._context.moveTo(cx,\t\t\t\t\tcy-a+b);\r\n\t\tthis._context.lineTo(cx+this._spacingX-b,\tcy-a/2+b);\r\n\t\tthis._context.lineTo(cx+this._spacingX-b,\tcy+a/2-b);\r\n\t\tthis._context.lineTo(cx,\t\t\t\t\tcy+a-b);\r\n\t\tthis._context.lineTo(cx-this._spacingX+b,\tcy+a/2-b);\r\n\t\tthis._context.lineTo(cx-this._spacingX+b,\tcy-a/2+b);\r\n\t\tthis._context.lineTo(cx,\t\t\t\t\tcy-a+b);\r\n\t}\r\n\tthis._context.fill();\r\n};\r\n/**\r\n * @class Tile backend\r\n * @private\r\n */\r\nROT.Display.Tile = function(context) {\r\n\tROT.Display.Rect.call(this, context);\r\n\t\r\n\tthis._options = {};\r\n\tthis._colorCanvas = document.createElement(\"canvas\");\r\n};\r\nROT.Display.Tile.extend(ROT.Display.Rect);\r\n\r\nROT.Display.Tile.prototype.compute = function(options) {\r\n\tthis._options = options;\r\n\tthis._context.canvas.width = options.width * options.tileWidth;\r\n\tthis._context.canvas.height = options.height * options.tileHeight;\r\n\tthis._colorCanvas.width = options.tileWidth;\r\n\tthis._colorCanvas.height = options.tileHeight;\r\n};\r\n\r\nROT.Display.Tile.prototype.draw = function(data, clearBefore) {\r\n\tvar x = data[0];\r\n\tvar y = data[1];\r\n\tvar ch = data[2];\r\n\tvar fg = data[3];\r\n\tvar bg = data[4];\r\n\r\n\tvar tileWidth = this._options.tileWidth;\r\n\tvar tileHeight = this._options.tileHeight;\r\n\r\n\tif (clearBefore) {\r\n\t\tif (this._options.tileColorize) {\r\n\t\t\tthis._context.clearRect(x*tileWidth, y*tileHeight, tileWidth, tileHeight);\r\n\t\t} else {\r\n\t\t\tthis._context.fillStyle = bg;\r\n\t\t\tthis._context.fillRect(x*tileWidth, y*tileHeight, tileWidth, tileHeight);\r\n\t\t}\r\n\t}\r\n\r\n\tif (!ch) { return; }\r\n\r\n\tvar chars = [].concat(ch);\r\n\tfor (var i=0;i<chars.length;i++) {\r\n\t\tvar tile = this._options.tileMap[chars[i]];\r\n\t\tif (!tile) { throw new Error(\"Char '\" + chars[i] + \"' not found in tileMap\"); }\r\n\t\t\r\n\t\tif (this._options.tileColorize) { /* apply colorization */\r\n\t\t\tvar canvas = this._colorCanvas;\r\n\t\t\tvar context = canvas.getContext(\"2d\");\r\n\t\t\tcontext.clearRect(0, 0, tileWidth, tileHeight);\r\n\r\n\t\t\tcontext.drawImage(\r\n\t\t\t\tthis._options.tileSet,\r\n\t\t\t\ttile[0], tile[1], tileWidth, tileHeight,\r\n\t\t\t\t0, 0, tileWidth, tileHeight\r\n\t\t\t);\r\n\r\n\t\t\tif (fg != \"transparent\") {\r\n\t\t\t\tcontext.fillStyle = fg;\r\n\t\t\t\tcontext.globalCompositeOperation = \"source-atop\";\r\n\t\t\t\tcontext.fillRect(0, 0, tileWidth, tileHeight);\r\n\t\t\t}\r\n\r\n\t\t\tif (bg != \"transparent\") {\r\n\t\t\t\tcontext.fillStyle = bg;\r\n\t\t\t\tcontext.globalCompositeOperation = \"destination-over\";\r\n\t\t\t\tcontext.fillRect(0, 0, tileWidth, tileHeight);\r\n\t\t\t}\r\n\r\n\t\t\tthis._context.drawImage(canvas, x*tileWidth, y*tileHeight, tileWidth, tileHeight);\r\n\r\n\t\t} else { /* no colorizing, easy */\r\n\t\t\tthis._context.drawImage(\r\n\t\t\t\tthis._options.tileSet,\r\n\t\t\t\ttile[0], tile[1], tileWidth, tileHeight,\r\n\t\t\t\tx*tileWidth, y*tileHeight, tileWidth, tileHeight\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Display.Tile.prototype.computeSize = function(availWidth, availHeight) {\r\n\tvar width = Math.floor(availWidth / this._options.tileWidth);\r\n\tvar height = Math.floor(availHeight / this._options.tileHeight);\r\n\treturn [width, height];\r\n};\r\n\r\nROT.Display.Tile.prototype.computeFontSize = function(availWidth, availHeight) {\r\n\tvar width = Math.floor(availWidth / this._options.width);\r\n\tvar height = Math.floor(availHeight / this._options.height);\r\n\treturn [width, height];\r\n};\r\n\r\nROT.Display.Tile.prototype.eventToPosition = function(x, y) {\r\n\treturn [Math.floor(x/this._options.tileWidth), Math.floor(y/this._options.tileHeight)];\r\n};\r\n/**\r\n * @namespace\r\n * This code is an implementation of Alea algorithm; (C) 2010 Johannes Baagøe.\r\n * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.\r\n */\r\nROT.RNG = {\r\n\t/**\r\n\t * @returns {number} \r\n\t */\r\n\tgetSeed: function() {\r\n\t\treturn this._seed;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {number} seed Seed the number generator\r\n\t */\r\n\tsetSeed: function(seed) {\r\n\t\tseed = (seed < 1 ? 1/seed : seed);\r\n\r\n\t\tthis._seed = seed;\r\n\t\tthis._s0 = (seed >>> 0) * this._frac;\r\n\r\n\t\tseed = (seed*69069 + 1) >>> 0;\r\n\t\tthis._s1 = seed * this._frac;\r\n\r\n\t\tseed = (seed*69069 + 1) >>> 0;\r\n\t\tthis._s2 = seed * this._frac;\r\n\r\n\t\tthis._c = 1;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {float} Pseudorandom value [0,1), uniformly distributed\r\n\t */\r\n\tgetUniform: function() {\r\n\t\tvar t = 2091639 * this._s0 + this._c * this._frac;\r\n\t\tthis._s0 = this._s1;\r\n\t\tthis._s1 = this._s2;\r\n\t\tthis._c = t | 0;\r\n\t\tthis._s2 = t - this._c;\r\n\t\treturn this._s2;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {int} lowerBound The lower end of the range to return a value from, inclusive\r\n\t * @param {int} upperBound The upper end of the range to return a value from, inclusive\r\n\t * @returns {int} Pseudorandom value [lowerBound, upperBound], using ROT.RNG.getUniform() to distribute the value\r\n\t */\r\n\tgetUniformInt: function(lowerBound, upperBound) {\r\n\t\tvar max = Math.max(lowerBound, upperBound);\r\n\t\tvar min = Math.min(lowerBound, upperBound);\r\n\t\treturn Math.floor(this.getUniform() * (max - min + 1)) + min;\r\n\t},\r\n\r\n\t/**\r\n\t * @param {float} [mean=0] Mean value\r\n\t * @param {float} [stddev=1] Standard deviation. ~95% of the absolute values will be lower than 2*stddev.\r\n\t * @returns {float} A normally distributed pseudorandom value\r\n\t */\r\n\tgetNormal: function(mean, stddev) {\r\n\t\tdo {\r\n\t\t\tvar u = 2*this.getUniform()-1;\r\n\t\t\tvar v = 2*this.getUniform()-1;\r\n\t\t\tvar r = u*u + v*v;\r\n\t\t} while (r > 1 || r == 0);\r\n\r\n\t\tvar gauss = u * Math.sqrt(-2*Math.log(r)/r);\r\n\t\treturn (mean || 0) + gauss*(stddev || 1);\r\n\t},\r\n\r\n\t/**\r\n\t * @returns {int} Pseudorandom value [1,100] inclusive, uniformly distributed\r\n\t */\r\n\tgetPercentage: function() {\r\n\t\treturn 1 + Math.floor(this.getUniform()*100);\r\n\t},\r\n\t\r\n\t/**\r\n\t * @param {object} data key=whatever, value=weight (relative probability)\r\n\t * @returns {string} whatever\r\n\t */\r\n\tgetWeightedValue: function(data) {\r\n\t\tvar total = 0;\r\n\t\t\r\n\t\tfor (var id in data) {\r\n\t\t\ttotal += data[id];\r\n\t\t}\r\n\t\tvar random = this.getUniform()*total;\r\n\t\t\r\n\t\tvar part = 0;\r\n\t\tfor (var id in data) {\r\n\t\t\tpart += data[id];\r\n\t\t\tif (random < part) { return id; }\r\n\t\t}\r\n\r\n\t\t// If by some floating-point annoyance we have\r\n\t\t// random >= total, just return the last id.\r\n\t\treturn id;\r\n\t},\r\n\r\n\t/**\r\n\t * Get RNG state. Useful for storing the state and re-setting it via setState.\r\n\t * @returns {?} Internal state\r\n\t */\r\n\tgetState: function() {\r\n\t\treturn [this._s0, this._s1, this._s2, this._c];\r\n\t},\r\n\r\n\t/**\r\n\t * Set a previously retrieved state.\r\n\t * @param {?} state\r\n\t */\r\n\tsetState: function(state) {\r\n\t\tthis._s0 = state[0];\r\n\t\tthis._s1 = state[1];\r\n\t\tthis._s2 = state[2];\r\n\t\tthis._c  = state[3];\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Returns a cloned RNG\r\n\t */\r\n\tclone: function() {\r\n\t\tvar clone = Object.create(this);\r\n\t\tclone.setState(this.getState());\r\n\t\treturn clone;\r\n\t},\r\n\r\n\t_s0: 0,\r\n\t_s1: 0,\r\n\t_s2: 0,\r\n\t_c: 0,\r\n\t_frac: 2.3283064365386963e-10 /* 2^-32 */\r\n};\r\n\r\nROT.RNG.setSeed(Date.now());\r\n/**\r\n * @class (Markov process)-based string generator. \r\n * Copied from a <a href=\"http://www.roguebasin.roguelikedevelopment.org/index.php?title=Names_from_a_high_order_Markov_Process_and_a_simplified_Katz_back-off_scheme\">RogueBasin article</a>. \r\n * Offers configurable order and prior.\r\n * @param {object} [options]\r\n * @param {bool} [options.words=false] Use word mode?\r\n * @param {int} [options.order=3]\r\n * @param {float} [options.prior=0.001]\r\n */\r\nROT.StringGenerator = function(options) {\r\n\tthis._options = {\r\n\t\twords: false,\r\n\t\torder: 3,\r\n\t\tprior: 0.001\r\n\t};\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\r\n\tthis._boundary = String.fromCharCode(0);\r\n\tthis._suffix = this._boundary;\r\n\tthis._prefix = [];\r\n\tfor (var i=0;i<this._options.order;i++) { this._prefix.push(this._boundary); }\r\n\r\n\tthis._priorValues = {};\r\n\tthis._priorValues[this._boundary] = this._options.prior;\r\n\r\n\tthis._data = {};\r\n};\r\n\r\n/**\r\n * Remove all learning data\r\n */\r\nROT.StringGenerator.prototype.clear = function() {\r\n\tthis._data = {};\r\n\tthis._priorValues = {};\r\n};\r\n\r\n/**\r\n * @returns {string} Generated string\r\n */\r\nROT.StringGenerator.prototype.generate = function() {\r\n\tvar result = [this._sample(this._prefix)];\r\n\twhile (result[result.length-1] != this._boundary) {\r\n\t\tresult.push(this._sample(result));\r\n\t}\r\n\treturn this._join(result.slice(0, -1));\r\n};\r\n\r\n/**\r\n * Observe (learn) a string from a training set\r\n */\r\nROT.StringGenerator.prototype.observe = function(string) {\r\n\tvar tokens = this._split(string);\r\n\r\n\tfor (var i=0; i<tokens.length; i++) {\r\n\t\tthis._priorValues[tokens[i]] = this._options.prior;\r\n\t}\r\n\r\n\ttokens = this._prefix.concat(tokens).concat(this._suffix); /* add boundary symbols */\r\n\r\n\tfor (var i=this._options.order; i<tokens.length; i++) {\r\n\t\tvar context = tokens.slice(i-this._options.order, i);\r\n\t\tvar event = tokens[i];\r\n\t\tfor (var j=0; j<context.length; j++) {\r\n\t\t\tvar subcontext = context.slice(j);\r\n\t\t\tthis._observeEvent(subcontext, event);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.StringGenerator.prototype.getStats = function() {\r\n\tvar parts = [];\r\n\r\n\tvar priorCount = 0;\r\n\tfor (var p in this._priorValues) { priorCount++; }\r\n\tpriorCount--; /* boundary */\r\n\tparts.push(\"distinct samples: \" + priorCount);\r\n\r\n\tvar dataCount = 0;\r\n\tvar eventCount = 0;\r\n\tfor (var p in this._data) { \r\n\t\tdataCount++; \r\n\t\tfor (var key in this._data[p]) {\r\n\t\t\teventCount++;\r\n\t\t}\r\n\t}\r\n\tparts.push(\"dictionary size (contexts): \" + dataCount);\r\n\tparts.push(\"dictionary size (events): \" + eventCount);\r\n\r\n\treturn parts.join(\", \");\r\n};\r\n\r\n/**\r\n * @param {string}\r\n * @returns {string[]}\r\n */\r\nROT.StringGenerator.prototype._split = function(str) {\r\n\treturn str.split(this._options.words ? /\\s+/ : \"\");\r\n};\r\n\r\n/**\r\n * @param {string[]}\r\n * @returns {string} \r\n */\r\nROT.StringGenerator.prototype._join = function(arr) {\r\n\treturn arr.join(this._options.words ? \" \" : \"\");\r\n};\r\n\r\n/**\r\n * @param {string[]} context\r\n * @param {string} event\r\n */\r\nROT.StringGenerator.prototype._observeEvent = function(context, event) {\r\n\tvar key = this._join(context);\r\n\tif (!(key in this._data)) { this._data[key] = {}; }\r\n\tvar data = this._data[key];\r\n\r\n\tif (!(event in data)) { data[event] = 0; }\r\n\tdata[event]++;\r\n};\r\n\r\n/**\r\n * @param {string[]}\r\n * @returns {string}\r\n */\r\nROT.StringGenerator.prototype._sample = function(context) {\r\n\tcontext = this._backoff(context);\r\n\tvar key = this._join(context);\r\n\tvar data = this._data[key];\r\n\r\n\tvar available = {};\r\n\r\n\tif (this._options.prior) {\r\n\t\tfor (var event in this._priorValues) { available[event] = this._priorValues[event]; }\r\n\t\tfor (var event in data) { available[event] += data[event]; }\r\n\t} else { \r\n\t\tavailable = data;\r\n\t}\r\n\r\n\treturn ROT.RNG.getWeightedValue(available);\r\n};\r\n\r\n/**\r\n * @param {string[]}\r\n * @returns {string[]}\r\n */\r\nROT.StringGenerator.prototype._backoff = function(context) {\r\n\tif (context.length > this._options.order) {\r\n\t\tcontext = context.slice(-this._options.order);\r\n\t} else if (context.length < this._options.order) {\r\n\t\tcontext = this._prefix.slice(0, this._options.order - context.length).concat(context);\r\n\t}\r\n\r\n\twhile (!(this._join(context) in this._data) && context.length > 0) { context = context.slice(1); }\r\n\r\n\treturn context;\r\n};\r\n/**\r\n * @class Generic event queue: stores events and retrieves them based on their time\r\n */\r\nROT.EventQueue = function() {\r\n\tthis._time = 0;\r\n\tthis._events = [];\r\n\tthis._eventTimes = [];\r\n};\r\n\r\n/**\r\n * @returns {number} Elapsed time\r\n */\r\nROT.EventQueue.prototype.getTime = function() {\r\n\treturn this._time;\r\n};\r\n\r\n/**\r\n * Clear all scheduled events\r\n */\r\nROT.EventQueue.prototype.clear = function() {\r\n\tthis._events = [];\r\n\tthis._eventTimes = [];\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * @param {?} event\r\n * @param {number} time\r\n */\r\nROT.EventQueue.prototype.add = function(event, time) {\r\n\tvar index = this._events.length;\r\n\tfor (var i=0;i<this._eventTimes.length;i++) {\r\n\t\tif (this._eventTimes[i] > time) {\r\n\t\t\tindex = i;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tthis._events.splice(index, 0, event);\r\n\tthis._eventTimes.splice(index, 0, time);\r\n};\r\n\r\n/**\r\n * Locates the nearest event, advances time if necessary. Returns that event and removes it from the queue.\r\n * @returns {? || null} The event previously added by addEvent, null if no event available\r\n */\r\nROT.EventQueue.prototype.get = function() {\r\n\tif (!this._events.length) { return null; }\r\n\r\n\tvar time = this._eventTimes.splice(0, 1)[0];\r\n\tif (time > 0) { /* advance */\r\n\t\tthis._time += time;\r\n\t\tfor (var i=0;i<this._eventTimes.length;i++) { this._eventTimes[i] -= time; }\r\n\t}\r\n\r\n\treturn this._events.splice(0, 1)[0];\r\n};\r\n\r\n/**\r\n * Get the time associated with the given event\r\n * @param {?} event\r\n * @returns {number} time\r\n */\r\nROT.EventQueue.prototype.getEventTime = function(event) {\r\n\tvar index = this._events.indexOf(event);\r\n\tif (index == -1) { return undefined }\r\n\treturn this._eventTimes[index];\r\n};\r\n\r\n/**\r\n * Remove an event from the queue\r\n * @param {?} event\r\n * @returns {bool} success?\r\n */\r\nROT.EventQueue.prototype.remove = function(event) {\r\n\tvar index = this._events.indexOf(event);\r\n\tif (index == -1) { return false }\r\n\tthis._remove(index);\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * Remove an event from the queue\r\n * @param {int} index\r\n */\r\nROT.EventQueue.prototype._remove = function(index) {\r\n\tthis._events.splice(index, 1);\r\n\tthis._eventTimes.splice(index, 1);\r\n};\r\n/**\r\n * @class Abstract scheduler\r\n */\r\nROT.Scheduler = function() {\r\n\tthis._queue = new ROT.EventQueue();\r\n\tthis._repeat = [];\r\n\tthis._current = null;\r\n};\r\n\r\n/**\r\n * @see ROT.EventQueue#getTime\r\n */\r\nROT.Scheduler.prototype.getTime = function() {\r\n\treturn this._queue.getTime();\r\n};\r\n\r\n/**\r\n * @param {?} item\r\n * @param {bool} repeat\r\n */\r\nROT.Scheduler.prototype.add = function(item, repeat) {\r\n\tif (repeat) { this._repeat.push(item); }\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Get the time the given item is scheduled for\r\n * @param {?} item\r\n * @returns {number} time\r\n */\r\nROT.Scheduler.prototype.getTimeOf = function(item) {\r\n\treturn this._queue.getEventTime(item);\r\n};\r\n\r\n/**\r\n * Clear all items\r\n */\r\nROT.Scheduler.prototype.clear = function() {\r\n\tthis._queue.clear();\r\n\tthis._repeat = [];\r\n\tthis._current = null;\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Remove a previously added item\r\n * @param {?} item\r\n * @returns {bool} successful?\r\n */\r\nROT.Scheduler.prototype.remove = function(item) {\r\n\tvar result = this._queue.remove(item);\r\n\r\n\tvar index = this._repeat.indexOf(item);\r\n\tif (index != -1) { this._repeat.splice(index, 1); }\r\n\r\n\tif (this._current == item) { this._current = null; }\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * Schedule next item\r\n * @returns {?}\r\n */\r\nROT.Scheduler.prototype.next = function() {\r\n\tthis._current = this._queue.get();\r\n\treturn this._current;\r\n};\r\n/**\r\n * @class Simple fair scheduler (round-robin style)\r\n * @augments ROT.Scheduler\r\n */\r\nROT.Scheduler.Simple = function() {\r\n\tROT.Scheduler.call(this);\r\n};\r\nROT.Scheduler.Simple.extend(ROT.Scheduler);\r\n\r\n/**\r\n * @see ROT.Scheduler#add\r\n */\r\nROT.Scheduler.Simple.prototype.add = function(item, repeat) {\r\n\tthis._queue.add(item, 0);\r\n\treturn ROT.Scheduler.prototype.add.call(this, item, repeat);\r\n};\r\n\r\n/**\r\n * @see ROT.Scheduler#next\r\n */\r\nROT.Scheduler.Simple.prototype.next = function() {\r\n\tif (this._current && this._repeat.indexOf(this._current) != -1) {\r\n\t\tthis._queue.add(this._current, 0);\r\n\t}\r\n\treturn ROT.Scheduler.prototype.next.call(this);\r\n};\r\n/**\r\n * @class Speed-based scheduler\r\n * @augments ROT.Scheduler\r\n */\r\nROT.Scheduler.Speed = function() {\r\n\tROT.Scheduler.call(this);\r\n};\r\nROT.Scheduler.Speed.extend(ROT.Scheduler);\r\n\r\n/**\r\n * @param {object} item anything with \"getSpeed\" method\r\n * @param {bool} repeat\r\n * @param {number} [time=1/item.getSpeed()]\r\n * @see ROT.Scheduler#add\r\n */\r\nROT.Scheduler.Speed.prototype.add = function(item, repeat, time) {\r\n\tthis._queue.add(item, time !== undefined ? time : 1/item.getSpeed());\r\n\treturn ROT.Scheduler.prototype.add.call(this, item, repeat);\r\n};\r\n\r\n/**\r\n * @see ROT.Scheduler#next\r\n */\r\nROT.Scheduler.Speed.prototype.next = function() {\r\n\tif (this._current && this._repeat.indexOf(this._current) != -1) {\r\n\t\tthis._queue.add(this._current, 1/this._current.getSpeed());\r\n\t}\r\n\treturn ROT.Scheduler.prototype.next.call(this);\r\n};\r\n/**\r\n * @class Action-based scheduler\r\n * @augments ROT.Scheduler\r\n */\r\nROT.Scheduler.Action = function() {\r\n\tROT.Scheduler.call(this);\r\n\tthis._defaultDuration = 1; /* for newly added */\r\n\tthis._duration = this._defaultDuration; /* for this._current */\r\n};\r\nROT.Scheduler.Action.extend(ROT.Scheduler);\r\n\r\n/**\r\n * @param {object} item\r\n * @param {bool} repeat\r\n * @param {number} [time=1]\r\n * @see ROT.Scheduler#add\r\n */\r\nROT.Scheduler.Action.prototype.add = function(item, repeat, time) {\r\n\tthis._queue.add(item, time || this._defaultDuration);\r\n\treturn ROT.Scheduler.prototype.add.call(this, item, repeat);\r\n};\r\n\r\nROT.Scheduler.Action.prototype.clear = function() {\r\n\tthis._duration = this._defaultDuration;\r\n\treturn ROT.Scheduler.prototype.clear.call(this);\r\n};\r\n\r\nROT.Scheduler.Action.prototype.remove = function(item) {\r\n\tif (item == this._current) { this._duration = this._defaultDuration; }\r\n\treturn ROT.Scheduler.prototype.remove.call(this, item);\r\n};\r\n\r\n/**\r\n * @see ROT.Scheduler#next\r\n */\r\nROT.Scheduler.Action.prototype.next = function() {\r\n\tif (this._current && this._repeat.indexOf(this._current) != -1) {\r\n\t\tthis._queue.add(this._current, this._duration || this._defaultDuration);\r\n\t\tthis._duration = this._defaultDuration;\r\n\t}\r\n\treturn ROT.Scheduler.prototype.next.call(this);\r\n};\r\n\r\n/**\r\n * Set duration for the active item\r\n */\r\nROT.Scheduler.Action.prototype.setDuration = function(time) {\r\n\tif (this._current) { this._duration = time; }\r\n\treturn this;\r\n};\r\n/**\r\n * @class Asynchronous main loop\r\n * @param {ROT.Scheduler} scheduler\r\n */\r\nROT.Engine = function(scheduler) {\r\n\tthis._scheduler = scheduler;\r\n\tthis._lock = 1;\r\n};\r\n\r\n/**\r\n * Start the main loop. When this call returns, the loop is locked.\r\n */\r\nROT.Engine.prototype.start = function() {\r\n\treturn this.unlock();\r\n};\r\n\r\n/**\r\n * Interrupt the engine by an asynchronous action\r\n */\r\nROT.Engine.prototype.lock = function() {\r\n\tthis._lock++;\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Resume execution (paused by a previous lock)\r\n */\r\nROT.Engine.prototype.unlock = function() {\r\n\tif (!this._lock) { throw new Error(\"Cannot unlock unlocked engine\"); }\r\n\tthis._lock--;\r\n\r\n\twhile (!this._lock) {\r\n\t\tvar actor = this._scheduler.next();\r\n\t\tif (!actor) { return this.lock(); } /* no actors */\r\n\t\tvar result = actor.act();\r\n\t\tif (result && result.then) { /* actor returned a \"thenable\", looks like a Promise */\r\n\t\t\tthis.lock();\r\n\t\t\tresult.then(this.unlock.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n/**\r\n * @class Base map generator\r\n * @param {int} [width=ROT.DEFAULT_WIDTH]\r\n * @param {int} [height=ROT.DEFAULT_HEIGHT]\r\n */\r\nROT.Map = function(width, height) {\r\n\tthis._width = width || ROT.DEFAULT_WIDTH;\r\n\tthis._height = height || ROT.DEFAULT_HEIGHT;\r\n};\r\n\r\nROT.Map.prototype.create = function(callback) {};\r\n\r\nROT.Map.prototype._fillMap = function(value) {\r\n\tvar map = [];\r\n\tfor (var i=0;i<this._width;i++) {\r\n\t\tmap.push([]);\r\n\t\tfor (var j=0;j<this._height;j++) { map[i].push(value); }\r\n\t}\r\n\treturn map;\r\n};\r\n/**\r\n * @class Simple empty rectangular room\r\n * @augments ROT.Map\r\n */\r\nROT.Map.Arena = function(width, height) {\r\n\tROT.Map.call(this, width, height);\r\n};\r\nROT.Map.Arena.extend(ROT.Map);\r\n\r\nROT.Map.Arena.prototype.create = function(callback) {\r\n\tvar w = this._width-1;\r\n\tvar h = this._height-1;\r\n\tfor (var i=0;i<=w;i++) {\r\n\t\tfor (var j=0;j<=h;j++) {\r\n\t\t\tvar empty = (i && j && i<w && j<h);\r\n\t\t\tcallback(i, j, empty ? 0 : 1);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n/**\r\n * @class Recursively divided maze, http://en.wikipedia.org/wiki/Maze_generation_algorithm#Recursive_division_method\r\n * @augments ROT.Map\r\n */\r\nROT.Map.DividedMaze = function(width, height) {\r\n\tROT.Map.call(this, width, height);\r\n\tthis._stack = [];\r\n};\r\nROT.Map.DividedMaze.extend(ROT.Map);\r\n\r\nROT.Map.DividedMaze.prototype.create = function(callback) {\r\n\tvar w = this._width;\r\n\tvar h = this._height;\r\n\t\r\n\tthis._map = [];\r\n\t\r\n\tfor (var i=0;i<w;i++) {\r\n\t\tthis._map.push([]);\r\n\t\tfor (var j=0;j<h;j++) {\r\n\t\t\tvar border = (i == 0 || j == 0 || i+1 == w || j+1 == h);\r\n\t\t\tthis._map[i].push(border ? 1 : 0);\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis._stack = [\r\n\t\t[1, 1, w-2, h-2]\r\n\t];\r\n\tthis._process();\r\n\t\r\n\tfor (var i=0;i<w;i++) {\r\n\t\tfor (var j=0;j<h;j++) {\r\n\t\t\tcallback(i, j, this._map[i][j]);\r\n\t\t}\r\n\t}\r\n\tthis._map = null;\r\n\treturn this;\r\n};\r\n\r\nROT.Map.DividedMaze.prototype._process = function() {\r\n\twhile (this._stack.length) {\r\n\t\tvar room = this._stack.shift(); /* [left, top, right, bottom] */\r\n\t\tthis._partitionRoom(room);\r\n\t}\r\n};\r\n\r\nROT.Map.DividedMaze.prototype._partitionRoom = function(room) {\r\n\tvar availX = [];\r\n\tvar availY = [];\r\n\t\r\n\tfor (var i=room[0]+1;i<room[2];i++) {\r\n\t\tvar top = this._map[i][room[1]-1];\r\n\t\tvar bottom = this._map[i][room[3]+1];\r\n\t\tif (top && bottom && !(i % 2)) { availX.push(i); }\r\n\t}\r\n\t\r\n\tfor (var j=room[1]+1;j<room[3];j++) {\r\n\t\tvar left = this._map[room[0]-1][j];\r\n\t\tvar right = this._map[room[2]+1][j];\r\n\t\tif (left && right && !(j % 2)) { availY.push(j); }\r\n\t}\r\n\r\n\tif (!availX.length || !availY.length) { return; }\r\n\r\n\tvar x = availX.random();\r\n\tvar y = availY.random();\r\n\t\r\n\tthis._map[x][y] = 1;\r\n\t\r\n\tvar walls = [];\r\n\t\r\n\tvar w = []; walls.push(w); /* left part */\r\n\tfor (var i=room[0]; i<x; i++) { \r\n\t\tthis._map[i][y] = 1;\r\n\t\tw.push([i, y]); \r\n\t}\r\n\t\r\n\tvar w = []; walls.push(w); /* right part */\r\n\tfor (var i=x+1; i<=room[2]; i++) { \r\n\t\tthis._map[i][y] = 1;\r\n\t\tw.push([i, y]); \r\n\t}\r\n\r\n\tvar w = []; walls.push(w); /* top part */\r\n\tfor (var j=room[1]; j<y; j++) { \r\n\t\tthis._map[x][j] = 1;\r\n\t\tw.push([x, j]); \r\n\t}\r\n\t\r\n\tvar w = []; walls.push(w); /* bottom part */\r\n\tfor (var j=y+1; j<=room[3]; j++) { \r\n\t\tthis._map[x][j] = 1;\r\n\t\tw.push([x, j]); \r\n\t}\r\n\t\t\r\n\tvar solid = walls.random();\r\n\tfor (var i=0;i<walls.length;i++) {\r\n\t\tvar w = walls[i];\r\n\t\tif (w == solid) { continue; }\r\n\t\t\r\n\t\tvar hole = w.random();\r\n\t\tthis._map[hole[0]][hole[1]] = 0;\r\n\t}\r\n\r\n\tthis._stack.push([room[0], room[1], x-1, y-1]); /* left top */\r\n\tthis._stack.push([x+1, room[1], room[2], y-1]); /* right top */\r\n\tthis._stack.push([room[0], y+1, x-1, room[3]]); /* left bottom */\r\n\tthis._stack.push([x+1, y+1, room[2], room[3]]); /* right bottom */\r\n};\r\n/**\r\n * @class Icey's Maze generator\r\n * See http://www.roguebasin.roguelikedevelopment.org/index.php?title=Simple_maze for explanation\r\n * @augments ROT.Map\r\n */\r\nROT.Map.IceyMaze = function(width, height, regularity) {\r\n\tROT.Map.call(this, width, height);\r\n\tthis._regularity = regularity || 0;\r\n};\r\nROT.Map.IceyMaze.extend(ROT.Map);\r\n\r\nROT.Map.IceyMaze.prototype.create = function(callback) {\r\n\tvar width = this._width;\r\n\tvar height = this._height;\r\n\t\r\n\tvar map = this._fillMap(1);\r\n\t\r\n\twidth -= (width % 2 ? 1 : 2);\r\n\theight -= (height % 2 ? 1 : 2);\r\n\r\n\tvar cx = 0;\r\n\tvar cy = 0;\r\n\tvar nx = 0;\r\n\tvar ny = 0;\r\n\r\n\tvar done = 0;\r\n\tvar blocked = false;\r\n\tvar dirs = [\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0]\r\n\t];\r\n\tdo {\r\n\t\tcx = 1 + 2*Math.floor(ROT.RNG.getUniform()*(width-1) / 2);\r\n\t\tcy = 1 + 2*Math.floor(ROT.RNG.getUniform()*(height-1) / 2);\r\n\r\n\t\tif (!done) { map[cx][cy] = 0; }\r\n\t\t\r\n\t\tif (!map[cx][cy]) {\r\n\t\t\tthis._randomize(dirs);\r\n\t\t\tdo {\r\n\t\t\t\tif (Math.floor(ROT.RNG.getUniform()*(this._regularity+1)) == 0) { this._randomize(dirs); }\r\n\t\t\t\tblocked = true;\r\n\t\t\t\tfor (var i=0;i<4;i++) {\r\n\t\t\t\t\tnx = cx + dirs[i][0]*2;\r\n\t\t\t\t\tny = cy + dirs[i][1]*2;\r\n\t\t\t\t\tif (this._isFree(map, nx, ny, width, height)) {\r\n\t\t\t\t\t\tmap[nx][ny] = 0;\r\n\t\t\t\t\t\tmap[cx + dirs[i][0]][cy + dirs[i][1]] = 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcx = nx;\r\n\t\t\t\t\t\tcy = ny;\r\n\t\t\t\t\t\tblocked = false;\r\n\t\t\t\t\t\tdone++;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} while (!blocked);\r\n\t\t}\r\n\t} while (done+1 < width*height/4);\r\n\t\r\n\tfor (var i=0;i<this._width;i++) {\r\n\t\tfor (var j=0;j<this._height;j++) {\r\n\t\t\tcallback(i, j, map[i][j]);\r\n\t\t}\r\n\t}\r\n\tthis._map = null;\r\n\treturn this;\r\n};\r\n\r\nROT.Map.IceyMaze.prototype._randomize = function(dirs) {\r\n\tfor (var i=0;i<4;i++) {\r\n\t\tdirs[i][0] = 0;\r\n\t\tdirs[i][1] = 0;\r\n\t}\r\n\t\r\n\tswitch (Math.floor(ROT.RNG.getUniform()*4)) {\r\n\t\tcase 0:\r\n\t\t\tdirs[0][0] = -1; dirs[1][0] = 1;\r\n\t\t\tdirs[2][1] = -1; dirs[3][1] = 1;\r\n\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tdirs[3][0] = -1; dirs[2][0] = 1;\r\n\t\t\tdirs[1][1] = -1; dirs[0][1] = 1;\r\n\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tdirs[2][0] = -1; dirs[3][0] = 1;\r\n\t\t\tdirs[0][1] = -1; dirs[1][1] = 1;\r\n\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tdirs[1][0] = -1; dirs[0][0] = 1;\r\n\t\t\tdirs[3][1] = -1; dirs[2][1] = 1;\r\n\t\tbreak;\r\n\t}\r\n};\r\n\r\nROT.Map.IceyMaze.prototype._isFree = function(map, x, y, width, height) {\r\n\tif (x < 1 || y < 1 || x >= width || y >= height) { return false; }\r\n\treturn map[x][y];\r\n};\r\n/**\r\n * @class Maze generator - Eller's algorithm\r\n * See http://homepages.cwi.nl/~tromp/maze.html for explanation\r\n * @augments ROT.Map\r\n */\r\nROT.Map.EllerMaze = function(width, height) {\r\n\tROT.Map.call(this, width, height);\r\n};\r\nROT.Map.EllerMaze.extend(ROT.Map);\r\n\r\nROT.Map.EllerMaze.prototype.create = function(callback) {\r\n\tvar map = this._fillMap(1);\r\n\tvar w = Math.ceil((this._width-2)/2);\r\n\t\r\n\tvar rand = 9/24;\r\n\t\r\n\tvar L = [];\r\n\tvar R = [];\r\n\t\r\n\tfor (var i=0;i<w;i++) {\r\n\t\tL.push(i);\r\n\t\tR.push(i);\r\n\t}\r\n\tL.push(w-1); /* fake stop-block at the right side */\r\n\r\n\tfor (var j=1;j+3<this._height;j+=2) {\r\n\t\t/* one row */\r\n\t\tfor (var i=0;i<w;i++) {\r\n\t\t\t/* cell coords (will be always empty) */\r\n\t\t\tvar x = 2*i+1;\r\n\t\t\tvar y = j;\r\n\t\t\tmap[x][y] = 0;\r\n\t\t\t\r\n\t\t\t/* right connection */\r\n\t\t\tif (i != L[i+1] && ROT.RNG.getUniform() > rand) {\r\n\t\t\t\tthis._addToList(i, L, R);\r\n\t\t\t\tmap[x+1][y] = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/* bottom connection */\r\n\t\t\tif (i != L[i] && ROT.RNG.getUniform() > rand) {\r\n\t\t\t\t/* remove connection */\r\n\t\t\t\tthis._removeFromList(i, L, R);\r\n\t\t\t} else {\r\n\t\t\t\t/* create connection */\r\n\t\t\t\tmap[x][y+1] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* last row */\r\n\tfor (var i=0;i<w;i++) {\r\n\t\t/* cell coords (will be always empty) */\r\n\t\tvar x = 2*i+1;\r\n\t\tvar y = j;\r\n\t\tmap[x][y] = 0;\r\n\t\t\r\n\t\t/* right connection */\r\n\t\tif (i != L[i+1] && (i == L[i] || ROT.RNG.getUniform() > rand)) {\r\n\t\t\t/* dig right also if the cell is separated, so it gets connected to the rest of maze */\r\n\t\t\tthis._addToList(i, L, R);\r\n\t\t\tmap[x+1][y] = 0;\r\n\t\t}\r\n\t\t\r\n\t\tthis._removeFromList(i, L, R);\r\n\t}\r\n\t\r\n\tfor (var i=0;i<this._width;i++) {\r\n\t\tfor (var j=0;j<this._height;j++) {\r\n\t\t\tcallback(i, j, map[i][j]);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Remove \"i\" from its list\r\n */\r\nROT.Map.EllerMaze.prototype._removeFromList = function(i, L, R) {\r\n\tR[L[i]] = R[i];\r\n\tL[R[i]] = L[i];\r\n\tR[i] = i;\r\n\tL[i] = i;\r\n};\r\n\r\n/**\r\n * Join lists with \"i\" and \"i+1\"\r\n */\r\nROT.Map.EllerMaze.prototype._addToList = function(i, L, R) {\r\n\tR[L[i+1]] = R[i];\r\n\tL[R[i]] = L[i+1];\r\n\tR[i] = i+1;\r\n\tL[i+1] = i;\r\n};\r\n/**\r\n * @class Cellular automaton map generator\r\n * @augments ROT.Map\r\n * @param {int} [width=ROT.DEFAULT_WIDTH]\r\n * @param {int} [height=ROT.DEFAULT_HEIGHT]\r\n * @param {object} [options] Options\r\n * @param {int[]} [options.born] List of neighbor counts for a new cell to be born in empty space\r\n * @param {int[]} [options.survive] List of neighbor counts for an existing  cell to survive\r\n * @param {int} [options.topology] Topology 4 or 6 or 8\r\n */\r\nROT.Map.Cellular = function(width, height, options) {\r\n\tROT.Map.call(this, width, height);\r\n\tthis._options = {\r\n\t\tborn: [5, 6, 7, 8],\r\n\t\tsurvive: [4, 5, 6, 7, 8],\r\n\t\ttopology: 8\r\n\t};\r\n\tthis.setOptions(options);\r\n\r\n\tthis._dirs = ROT.DIRS[this._options.topology];\r\n\tthis._map = this._fillMap(0);\r\n};\r\nROT.Map.Cellular.extend(ROT.Map);\r\n\r\n/**\r\n * Fill the map with random values\r\n * @param {float} probability Probability for a cell to become alive; 0 = all empty, 1 = all full\r\n */\r\nROT.Map.Cellular.prototype.randomize = function(probability) {\r\n\tfor (var i=0;i<this._width;i++) {\r\n\t\tfor (var j=0;j<this._height;j++) {\r\n\t\t\tthis._map[i][j] = (ROT.RNG.getUniform() < probability ? 1 : 0);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Change options.\r\n * @see ROT.Map.Cellular\r\n */\r\nROT.Map.Cellular.prototype.setOptions = function(options) {\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n};\r\n\r\nROT.Map.Cellular.prototype.set = function(x, y, value) {\r\n\tthis._map[x][y] = value;\r\n};\r\n\r\nROT.Map.Cellular.prototype.create = function(callback) {\r\n\tvar newMap = this._fillMap(0);\r\n\tvar born = this._options.born;\r\n\tvar survive = this._options.survive;\r\n\r\n\r\n\tfor (var j=0;j<this._height;j++) {\r\n\t\tvar widthStep = 1;\r\n\t\tvar widthStart = 0;\r\n\t\tif (this._options.topology == 6) {\r\n\t\t\twidthStep = 2;\r\n\t\t\twidthStart = j%2;\r\n\t\t}\r\n\r\n\t\tfor (var i=widthStart; i<this._width; i+=widthStep) {\r\n\r\n\t\t\tvar cur = this._map[i][j];\r\n\t\t\tvar ncount = this._getNeighbors(i, j);\r\n\r\n\t\t\tif (cur && survive.indexOf(ncount) != -1) { /* survive */\r\n\t\t\t\tnewMap[i][j] = 1;\r\n\t\t\t} else if (!cur && born.indexOf(ncount) != -1) { /* born */\r\n\t\t\t\tnewMap[i][j] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tthis._map = newMap;\r\n\r\n\tthis.serviceCallback(callback);\r\n};\r\n\r\nROT.Map.Cellular.prototype.serviceCallback = function(callback) {\r\n\tif (!callback) { return; }\r\n\r\n\tfor (var j=0;j<this._height;j++) {\r\n\t\tvar widthStep = 1;\r\n\t\tvar widthStart = 0;\r\n\t\tif (this._options.topology == 6) {\r\n\t\t\twidthStep = 2;\r\n\t\t\twidthStart = j%2;\r\n\t\t}\r\n\t\tfor (var i=widthStart; i<this._width; i+=widthStep) {\r\n\t\t\tcallback(i, j, this._map[i][j]);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n * Get neighbor count at [i,j] in this._map\r\n */\r\nROT.Map.Cellular.prototype._getNeighbors = function(cx, cy) {\r\n\tvar result = 0;\r\n\tfor (var i=0;i<this._dirs.length;i++) {\r\n\t\tvar dir = this._dirs[i];\r\n\t\tvar x = cx + dir[0];\r\n\t\tvar y = cy + dir[1];\r\n\r\n\t\tif (x < 0 || x >= this._width || y < 0 || y >= this._width) { continue; }\r\n\t\tresult += (this._map[x][y] == 1 ? 1 : 0);\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * Make sure every non-wall space is accessible.\r\n * @param {function} callback to call to display map when do\r\n * @param {int} value to consider empty space - defaults to 0\r\n * @param {function} callback to call when a new connection is made\r\n */\r\nROT.Map.Cellular.prototype.connect = function(callback, value, connectionCallback) {\r\n\tif (!value) value = 0;\r\n\r\n\tvar allFreeSpace = [];\r\n\tvar notConnected = {};\r\n\t// find all free space\r\n\tfor (var x = 0; x < this._width; x++) {\r\n\t\tfor (var y = 0; y < this._height; y++) {\r\n\t\t\tif (this._freeSpace(x, y, value)) {\r\n\t\t\t\tvar p = [x, y];\r\n\t\t\t\tnotConnected[this._pointKey(p)] = p;\r\n\t\t\t\tallFreeSpace.push([x, y]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar start = allFreeSpace[ROT.RNG.getUniformInt(0, allFreeSpace.length - 1)];\r\n\r\n\tvar key = this._pointKey(start);\r\n\tvar connected = {};\r\n\tconnected[key] = start;\r\n\tdelete notConnected[key];\r\n\r\n\t// find what's connected to the starting point\r\n\tthis._findConnected(connected, notConnected, [start], false, value);\r\n\r\n\twhile (Object.keys(notConnected).length > 0) {\r\n\r\n\t\t// find two points from notConnected to connected\r\n\t\tvar p = this._getFromTo(connected, notConnected);\r\n\t\tvar from = p[0]; // notConnected\r\n\t\tvar to = p[1]; // connected\r\n\r\n\t\t// find everything connected to the starting point\r\n\t\tvar local = {};\r\n\t\tlocal[this._pointKey(from)] = from;\r\n\t\tthis._findConnected(local, notConnected, [from], true, value);\r\n\r\n\t\t// connect to a connected square\r\n\t\tthis._tunnelToConnected(to, from, connected, notConnected, value, connectionCallback);\r\n\r\n\t\t// now all of local is connected\r\n\t\tfor (var k in local) {\r\n\t\t\tvar pp = local[k];\r\n\t\t\tthis._map[pp[0]][pp[1]] = value;\r\n\t\t\tconnected[k] = pp;\r\n\t\t\tdelete notConnected[k];\r\n\t\t}\r\n\t}\r\n\r\n\tthis.serviceCallback(callback);\r\n};\r\n\r\n/**\r\n * Find random points to connect. Search for the closest point in the larger space.\r\n * This is to minimize the length of the passage while maintaining good performance.\r\n */\r\nROT.Map.Cellular.prototype._getFromTo = function(connected, notConnected) {\r\n\tvar from, to, d;\r\n\tvar connectedKeys = Object.keys(connected);\r\n\tvar notConnectedKeys = Object.keys(notConnected);\r\n\tfor (var i = 0; i < 5; i++) {\r\n\t\tif (connectedKeys.length < notConnectedKeys.length) {\r\n\t\t\tvar keys = connectedKeys;\r\n\t\t\tto = connected[keys[ROT.RNG.getUniformInt(0, keys.length - 1)]];\r\n\t\t\tfrom = this._getClosest(to, notConnected);\r\n\t\t} else {\r\n\t\t\tvar keys = notConnectedKeys;\r\n\t\t\tfrom = notConnected[keys[ROT.RNG.getUniformInt(0, keys.length - 1)]];\r\n\t\t\tto = this._getClosest(from, connected);\r\n\t\t}\r\n\t\td = (from[0] - to[0]) * (from[0] - to[0]) + (from[1] - to[1]) * (from[1] - to[1]);\r\n\t\tif (d < 64) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t// console.log(\">>> connected=\" + to + \" notConnected=\" + from + \" dist=\" + d);\r\n\treturn [from, to];\r\n};\r\n\r\nROT.Map.Cellular.prototype._getClosest = function(point, space) {\r\n\tvar minPoint = null;\r\n\tvar minDist = null;\r\n\tfor (k in space) {\r\n\t\tvar p = space[k];\r\n\t\tvar d = (p[0] - point[0]) * (p[0] - point[0]) + (p[1] - point[1]) * (p[1] - point[1]);\r\n\t\tif (minDist == null || d < minDist) {\r\n\t\t\tminDist = d;\r\n\t\t\tminPoint = p;\r\n\t\t}\r\n\t}\r\n\treturn minPoint;\r\n};\r\n\r\nROT.Map.Cellular.prototype._findConnected = function(connected, notConnected, stack, keepNotConnected, value) {\r\n\twhile(stack.length > 0) {\r\n\t\tvar p = stack.splice(0, 1)[0];\r\n\t\tvar tests = [\r\n\t\t\t[p[0] + 1, p[1]],\r\n\t\t\t[p[0] - 1, p[1]],\r\n\t\t\t[p[0],     p[1] + 1],\r\n\t\t\t[p[0],     p[1] - 1]\r\n\t\t];\r\n\t\tfor (var i = 0; i < tests.length; i++) {\r\n\t\t\tvar key = this._pointKey(tests[i]);\r\n\t\t\tif (connected[key] == null && this._freeSpace(tests[i][0], tests[i][1], value)) {\r\n\t\t\t\tconnected[key] = tests[i];\r\n\t\t\t\tif (!keepNotConnected) {\r\n\t\t\t\t\tdelete notConnected[key];\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(tests[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Cellular.prototype._tunnelToConnected = function(to, from, connected, notConnected, value, connectionCallback) {\r\n\tvar key = this._pointKey(from);\r\n\tvar a, b;\r\n\tif (from[0] < to[0]) {\r\n\t\ta = from;\r\n\t\tb = to;\r\n\t} else {\r\n\t\ta = to;\r\n\t\tb = from;\r\n\t}\r\n\tfor (var xx = a[0]; xx <= b[0]; xx++) {\r\n\t\tthis._map[xx][a[1]] = value;\r\n\t\tvar p = [xx, a[1]];\r\n\t\tvar pkey = this._pointKey(p);\r\n\t\tconnected[pkey] = p;\r\n\t\tdelete notConnected[pkey];\r\n\t}\r\n\tif (connectionCallback && a[0] < b[0]) {\r\n\t\tconnectionCallback(a, [b[0], a[1]]);\r\n\t}\r\n\r\n\t// x is now fixed\r\n\tvar x = b[0];\r\n\r\n\tif (from[1] < to[1]) {\r\n\t\ta = from;\r\n\t\tb = to;\r\n\t} else {\r\n\t\ta = to;\r\n\t\tb = from;\r\n\t}\r\n\tfor (var yy = a[1]; yy < b[1]; yy++) {\r\n\t\tthis._map[x][yy] = value;\r\n\t\tvar p = [x, yy];\r\n\t\tvar pkey = this._pointKey(p);\r\n\t\tconnected[pkey] = p;\r\n\t\tdelete notConnected[pkey];\r\n\t}\r\n\tif (connectionCallback && a[1] < b[1]) {\r\n\t\tconnectionCallback([b[0], a[1]], [b[0], b[1]]);\r\n\t}\r\n};\r\n\r\nROT.Map.Cellular.prototype._freeSpace = function(x, y, value) {\r\n\treturn x >= 0 && x < this._width && y >= 0 && y < this._height && this._map[x][y] == value;\r\n};\r\n\r\nROT.Map.Cellular.prototype._pointKey = function(p) {\r\n\treturn p[0] + \".\" + p[1];\r\n};\r\n/**\r\n * @class Dungeon map: has rooms and corridors\r\n * @augments ROT.Map\r\n */\r\nROT.Map.Dungeon = function(width, height) {\r\n\tROT.Map.call(this, width, height);\r\n\tthis._rooms = []; /* list of all rooms */\r\n\tthis._corridors = [];\r\n};\r\nROT.Map.Dungeon.extend(ROT.Map);\r\n\r\n/**\r\n * Get all generated rooms\r\n * @returns {ROT.Map.Feature.Room[]}\r\n */\r\nROT.Map.Dungeon.prototype.getRooms = function() {\r\n\treturn this._rooms;\r\n};\r\n\r\n/**\r\n * Get all generated corridors\r\n * @returns {ROT.Map.Feature.Corridor[]}\r\n */\r\nROT.Map.Dungeon.prototype.getCorridors = function() {\r\n\treturn this._corridors;\r\n};\r\n/**\r\n * @class Random dungeon generator using human-like digging patterns.\r\n * Heavily based on Mike Anderson's ideas from the \"Tyrant\" algo, mentioned at \r\n * http://www.roguebasin.roguelikedevelopment.org/index.php?title=Dungeon-Building_Algorithm.\r\n * @augments ROT.Map.Dungeon\r\n */\r\nROT.Map.Digger = function(width, height, options) {\r\n\tROT.Map.Dungeon.call(this, width, height);\r\n\t\r\n\tthis._options = {\r\n\t\troomWidth: [3, 9], /* room minimum and maximum width */\r\n\t\troomHeight: [3, 5], /* room minimum and maximum height */\r\n\t\tcorridorLength: [3, 10], /* corridor minimum and maximum length */\r\n\t\tdugPercentage: 0.2, /* we stop after this percentage of level area has been dug out */\r\n\t\ttimeLimit: 1000 /* we stop after this much time has passed (msec) */\r\n\t};\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\t\r\n\tthis._features = {\r\n\t\t\"Room\": 4,\r\n\t\t\"Corridor\": 4\r\n\t};\r\n\tthis._featureAttempts = 20; /* how many times do we try to create a feature on a suitable wall */\r\n\tthis._walls = {}; /* these are available for digging */\r\n\t\r\n\tthis._digCallback = this._digCallback.bind(this);\r\n\tthis._canBeDugCallback = this._canBeDugCallback.bind(this);\r\n\tthis._isWallCallback = this._isWallCallback.bind(this);\r\n\tthis._priorityWallCallback = this._priorityWallCallback.bind(this);\r\n};\r\nROT.Map.Digger.extend(ROT.Map.Dungeon);\r\n\r\n/**\r\n * Create a map\r\n * @see ROT.Map#create\r\n */\r\nROT.Map.Digger.prototype.create = function(callback) {\r\n\tthis._rooms = [];\r\n\tthis._corridors = [];\r\n\tthis._map = this._fillMap(1);\r\n\tthis._walls = {};\r\n\tthis._dug = 0;\r\n\tvar area = (this._width-2) * (this._height-2);\r\n\r\n\tthis._firstRoom();\r\n\t\r\n\tvar t1 = Date.now();\r\n\r\n\tdo {\r\n\t\tvar t2 = Date.now();\r\n\t\tif (t2 - t1 > this._options.timeLimit) { break; }\r\n\r\n\t\t/* find a good wall */\r\n\t\tvar wall = this._findWall();\r\n\t\tif (!wall) { break; } /* no more walls */\r\n\t\t\r\n\t\tvar parts = wall.split(\",\");\r\n\t\tvar x = parseInt(parts[0]);\r\n\t\tvar y = parseInt(parts[1]);\r\n\t\tvar dir = this._getDiggingDirection(x, y);\r\n\t\tif (!dir) { continue; } /* this wall is not suitable */\r\n\t\t\r\n//\t\tconsole.log(\"wall\", x, y);\r\n\r\n\t\t/* try adding a feature */\r\n\t\tvar featureAttempts = 0;\r\n\t\tdo {\r\n\t\t\tfeatureAttempts++;\r\n\t\t\tif (this._tryFeature(x, y, dir[0], dir[1])) { /* feature added */\r\n\t\t\t\t//if (this._rooms.length + this._corridors.length == 2) { this._rooms[0].addDoor(x, y); } /* first room oficially has doors */\r\n\t\t\t\tthis._removeSurroundingWalls(x, y);\r\n\t\t\t\tthis._removeSurroundingWalls(x-dir[0], y-dir[1]);\r\n\t\t\t\tbreak; \r\n\t\t\t}\r\n\t\t} while (featureAttempts < this._featureAttempts);\r\n\t\t\r\n\t\tvar priorityWalls = 0;\r\n\t\tfor (var id in this._walls) { \r\n\t\t\tif (this._walls[id] > 1) { priorityWalls++; }\r\n\t\t}\r\n\r\n\t} while (this._dug/area < this._options.dugPercentage || priorityWalls); /* fixme number of priority walls */\r\n\r\n\tthis._addDoors();\r\n\r\n\tif (callback) {\r\n\t\tfor (var i=0;i<this._width;i++) {\r\n\t\t\tfor (var j=0;j<this._height;j++) {\r\n\t\t\t\tcallback(i, j, this._map[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis._walls = {};\r\n\tthis._map = null;\r\n\r\n\treturn this;\r\n};\r\n\r\nROT.Map.Digger.prototype._digCallback = function(x, y, value) {\r\n\tif (value == 0 || value == 2) { /* empty */\r\n\t\tthis._map[x][y] = 0;\r\n\t\tthis._dug++;\r\n\t} else { /* wall */\r\n\t\tthis._walls[x+\",\"+y] = 1;\r\n\t}\r\n};\r\n\r\nROT.Map.Digger.prototype._isWallCallback = function(x, y) {\r\n\tif (x < 0 || y < 0 || x >= this._width || y >= this._height) { return false; }\r\n\treturn (this._map[x][y] == 1);\r\n};\r\n\r\nROT.Map.Digger.prototype._canBeDugCallback = function(x, y) {\r\n\tif (x < 1 || y < 1 || x+1 >= this._width || y+1 >= this._height) { return false; }\r\n\treturn (this._map[x][y] == 1);\r\n};\r\n\r\nROT.Map.Digger.prototype._priorityWallCallback = function(x, y) {\r\n\tthis._walls[x+\",\"+y] = 2;\r\n};\r\n\r\nROT.Map.Digger.prototype._firstRoom = function() {\r\n\tvar cx = Math.floor(this._width/2);\r\n\tvar cy = Math.floor(this._height/2);\r\n\tvar room = ROT.Map.Feature.Room.createRandomCenter(cx, cy, this._options);\r\n\tthis._rooms.push(room);\r\n\troom.create(this._digCallback);\r\n};\r\n\r\n/**\r\n * Get a suitable wall\r\n */\r\nROT.Map.Digger.prototype._findWall = function() {\r\n\tvar prio1 = [];\r\n\tvar prio2 = [];\r\n\tfor (var id in this._walls) {\r\n\t\tvar prio = this._walls[id];\r\n\t\tif (prio == 2) { \r\n\t\t\tprio2.push(id); \r\n\t\t} else {\r\n\t\t\tprio1.push(id);\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar arr = (prio2.length ? prio2 : prio1);\r\n\tif (!arr.length) { return null; } /* no walls :/ */\r\n\t\r\n\tvar id = arr.random();\r\n\tdelete this._walls[id];\r\n\r\n\treturn id;\r\n};\r\n\r\n/**\r\n * Tries adding a feature\r\n * @returns {bool} was this a successful try?\r\n */\r\nROT.Map.Digger.prototype._tryFeature = function(x, y, dx, dy) {\r\n\tvar feature = ROT.RNG.getWeightedValue(this._features);\r\n\tfeature = ROT.Map.Feature[feature].createRandomAt(x, y, dx, dy, this._options);\r\n\t\r\n\tif (!feature.isValid(this._isWallCallback, this._canBeDugCallback)) {\r\n//\t\tconsole.log(\"not valid\");\r\n//\t\tfeature.debug();\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tfeature.create(this._digCallback);\r\n//\tfeature.debug();\r\n\r\n\tif (feature instanceof ROT.Map.Feature.Room) { this._rooms.push(feature); }\r\n\tif (feature instanceof ROT.Map.Feature.Corridor) { \r\n\t\tfeature.createPriorityWalls(this._priorityWallCallback);\r\n\t\tthis._corridors.push(feature); \r\n\t}\r\n\t\r\n\treturn true;\r\n};\r\n\r\nROT.Map.Digger.prototype._removeSurroundingWalls = function(cx, cy) {\r\n\tvar deltas = ROT.DIRS[4];\r\n\r\n\tfor (var i=0;i<deltas.length;i++) {\r\n\t\tvar delta = deltas[i];\r\n\t\tvar x = cx + delta[0];\r\n\t\tvar y = cy + delta[1];\r\n\t\tdelete this._walls[x+\",\"+y];\r\n\t\tvar x = cx + 2*delta[0];\r\n\t\tvar y = cy + 2*delta[1];\r\n\t\tdelete this._walls[x+\",\"+y];\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns vector in \"digging\" direction, or false, if this does not exist (or is not unique)\r\n */\r\nROT.Map.Digger.prototype._getDiggingDirection = function(cx, cy) {\r\n\tif (cx <= 0 || cy <= 0 || cx >= this._width - 1 || cy >= this._height - 1) { return null; }\r\n\r\n\tvar result = null;\r\n\tvar deltas = ROT.DIRS[4];\r\n\t\r\n\tfor (var i=0;i<deltas.length;i++) {\r\n\t\tvar delta = deltas[i];\r\n\t\tvar x = cx + delta[0];\r\n\t\tvar y = cy + delta[1];\r\n\t\t\r\n\t\tif (!this._map[x][y]) { /* there already is another empty neighbor! */\r\n\t\t\tif (result) { return null; }\r\n\t\t\tresult = delta;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/* no empty neighbor */\r\n\tif (!result) { return null; }\r\n\t\r\n\treturn [-result[0], -result[1]];\r\n};\r\n\r\n/**\r\n * Find empty spaces surrounding rooms, and apply doors.\r\n */\r\nROT.Map.Digger.prototype._addDoors = function() {\r\n\tvar data = this._map;\r\n\tvar isWallCallback = function(x, y) {\r\n\t\treturn (data[x][y] == 1);\r\n\t};\r\n\tfor (var i = 0; i < this._rooms.length; i++ ) {\r\n\t\tvar room = this._rooms[i];\r\n\t\troom.clearDoors();\r\n\t\troom.addDoors(isWallCallback);\r\n\t}\r\n};\r\n/**\r\n * @class Dungeon generator which tries to fill the space evenly. Generates independent rooms and tries to connect them.\r\n * @augments ROT.Map.Dungeon\r\n */\r\nROT.Map.Uniform = function(width, height, options) {\r\n\tROT.Map.Dungeon.call(this, width, height);\r\n\r\n\tthis._options = {\r\n\t\troomWidth: [3, 9], /* room minimum and maximum width */\r\n\t\troomHeight: [3, 5], /* room minimum and maximum height */\r\n\t\troomDugPercentage: 0.1, /* we stop after this percentage of level area has been dug out by rooms */\r\n\t\ttimeLimit: 1000 /* we stop after this much time has passed (msec) */\r\n\t};\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\r\n\tthis._roomAttempts = 20; /* new room is created N-times until is considered as impossible to generate */\r\n\tthis._corridorAttempts = 20; /* corridors are tried N-times until the level is considered as impossible to connect */\r\n\r\n\tthis._connected = []; /* list of already connected rooms */\r\n\tthis._unconnected = []; /* list of remaining unconnected rooms */\r\n\t\r\n\tthis._digCallback = this._digCallback.bind(this);\r\n\tthis._canBeDugCallback = this._canBeDugCallback.bind(this);\r\n\tthis._isWallCallback = this._isWallCallback.bind(this);\r\n};\r\nROT.Map.Uniform.extend(ROT.Map.Dungeon);\r\n\r\n/**\r\n * Create a map. If the time limit has been hit, returns null.\r\n * @see ROT.Map#create\r\n */\r\nROT.Map.Uniform.prototype.create = function(callback) {\r\n\tvar t1 = Date.now();\r\n\twhile (1) {\r\n\t\tvar t2 = Date.now();\r\n\t\tif (t2 - t1 > this._options.timeLimit) { return null; } /* time limit! */\r\n\t\r\n\t\tthis._map = this._fillMap(1);\r\n\t\tthis._dug = 0;\r\n\t\tthis._rooms = [];\r\n\t\tthis._unconnected = [];\r\n\t\tthis._generateRooms();\r\n\t\tif (this._rooms.length < 2) { continue; }\r\n\t\tif (this._generateCorridors()) { break; }\r\n\t}\r\n\t\r\n\tif (callback) {\r\n\t\tfor (var i=0;i<this._width;i++) {\r\n\t\t\tfor (var j=0;j<this._height;j++) {\r\n\t\t\t\tcallback(i, j, this._map[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Generates a suitable amount of rooms\r\n */\r\nROT.Map.Uniform.prototype._generateRooms = function() {\r\n\tvar w = this._width-2;\r\n\tvar h = this._height-2;\r\n\r\n\tdo {\r\n\t\tvar room = this._generateRoom();\r\n\t\tif (this._dug/(w*h) > this._options.roomDugPercentage) { break; } /* achieved requested amount of free space */\r\n\t} while (room);\r\n\r\n\t/* either enough rooms, or not able to generate more of them :) */\r\n};\r\n\r\n/**\r\n * Try to generate one room\r\n */\r\nROT.Map.Uniform.prototype._generateRoom = function() {\r\n\tvar count = 0;\r\n\twhile (count < this._roomAttempts) {\r\n\t\tcount++;\r\n\t\t\r\n\t\tvar room = ROT.Map.Feature.Room.createRandom(this._width, this._height, this._options);\r\n\t\tif (!room.isValid(this._isWallCallback, this._canBeDugCallback)) { continue; }\r\n\t\t\r\n\t\troom.create(this._digCallback);\r\n\t\tthis._rooms.push(room);\r\n\t\treturn room;\r\n\t} \r\n\r\n\t/* no room was generated in a given number of attempts */\r\n\treturn null;\r\n};\r\n\r\n/**\r\n * Generates connectors beween rooms\r\n * @returns {bool} success Was this attempt successfull?\r\n */\r\nROT.Map.Uniform.prototype._generateCorridors = function() {\r\n\tvar cnt = 0;\r\n\twhile (cnt < this._corridorAttempts) {\r\n\t\tcnt++;\r\n\t\tthis._corridors = [];\r\n\r\n\t\t/* dig rooms into a clear map */\r\n\t\tthis._map = this._fillMap(1);\r\n\t\tfor (var i=0;i<this._rooms.length;i++) { \r\n\t\t\tvar room = this._rooms[i];\r\n\t\t\troom.clearDoors();\r\n\t\t\troom.create(this._digCallback); \r\n\t\t}\r\n\r\n\t\tthis._unconnected = this._rooms.slice().randomize();\r\n\t\tthis._connected = [];\r\n\t\tif (this._unconnected.length) { this._connected.push(this._unconnected.pop()); } /* first one is always connected */\r\n\t\t\r\n\t\twhile (1) {\r\n\t\t\t/* 1. pick random connected room */\r\n\t\t\tvar connected = this._connected.random();\r\n\t\t\t\r\n\t\t\t/* 2. find closest unconnected */\r\n\t\t\tvar room1 = this._closestRoom(this._unconnected, connected);\r\n\t\t\t\r\n\t\t\t/* 3. connect it to closest connected */\r\n\t\t\tvar room2 = this._closestRoom(this._connected, room1);\r\n\t\t\t\r\n\t\t\tvar ok = this._connectRooms(room1, room2);\r\n\t\t\tif (!ok) { break; } /* stop connecting, re-shuffle */\r\n\t\t\t\r\n\t\t\tif (!this._unconnected.length) { return true; } /* done; no rooms remain */\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\n\r\n/**\r\n * For a given room, find the closest one from the list\r\n */\r\nROT.Map.Uniform.prototype._closestRoom = function(rooms, room) {\r\n\tvar dist = Infinity;\r\n\tvar center = room.getCenter();\r\n\tvar result = null;\r\n\t\r\n\tfor (var i=0;i<rooms.length;i++) {\r\n\t\tvar r = rooms[i];\r\n\t\tvar c = r.getCenter();\r\n\t\tvar dx = c[0]-center[0];\r\n\t\tvar dy = c[1]-center[1];\r\n\t\tvar d = dx*dx+dy*dy;\r\n\t\t\r\n\t\tif (d < dist) {\r\n\t\t\tdist = d;\r\n\t\t\tresult = r;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn result;\r\n};\r\n\r\nROT.Map.Uniform.prototype._connectRooms = function(room1, room2) {\r\n\t/*\r\n\t\troom1.debug();\r\n\t\troom2.debug();\r\n\t*/\r\n\r\n\tvar center1 = room1.getCenter();\r\n\tvar center2 = room2.getCenter();\r\n\r\n\tvar diffX = center2[0] - center1[0];\r\n\tvar diffY = center2[1] - center1[1];\r\n\r\n\tif (Math.abs(diffX) < Math.abs(diffY)) { /* first try connecting north-south walls */\r\n\t\tvar dirIndex1 = (diffY > 0 ? 2 : 0);\r\n\t\tvar dirIndex2 = (dirIndex1 + 2) % 4;\r\n\t\tvar min = room2.getLeft();\r\n\t\tvar max = room2.getRight();\r\n\t\tvar index = 0;\r\n\t} else { /* first try connecting east-west walls */\r\n\t\tvar dirIndex1 = (diffX > 0 ? 1 : 3);\r\n\t\tvar dirIndex2 = (dirIndex1 + 2) % 4;\r\n\t\tvar min = room2.getTop();\r\n\t\tvar max = room2.getBottom();\r\n\t\tvar index = 1;\r\n\t}\r\n\r\n\tvar start = this._placeInWall(room1, dirIndex1); /* corridor will start here */\r\n\tif (!start) { return false; }\r\n\r\n\tif (start[index] >= min && start[index] <= max) { /* possible to connect with straight line (I-like) */\r\n\t\tvar end = start.slice();\r\n\t\tvar value = null;\r\n\t\tswitch (dirIndex2) {\r\n\t\t\tcase 0: value = room2.getTop()-1; break;\r\n\t\t\tcase 1: value = room2.getRight()+1; break;\r\n\t\t\tcase 2: value = room2.getBottom()+1; break;\r\n\t\t\tcase 3: value = room2.getLeft()-1; break;\r\n\t\t}\r\n\t\tend[(index+1)%2] = value;\r\n\t\tthis._digLine([start, end]);\r\n\t\t\r\n\t} else if (start[index] < min-1 || start[index] > max+1) { /* need to switch target wall (L-like) */\r\n\r\n\t\tvar diff = start[index] - center2[index];\r\n\t\tswitch (dirIndex2) {\r\n\t\t\tcase 0:\r\n\t\t\tcase 1:\tvar rotation = (diff < 0 ? 3 : 1); break;\r\n\t\t\tcase 2:\r\n\t\t\tcase 3:\tvar rotation = (diff < 0 ? 1 : 3); break;\r\n\t\t}\r\n\t\tdirIndex2 = (dirIndex2 + rotation) % 4;\r\n\t\t\r\n\t\tvar end = this._placeInWall(room2, dirIndex2);\r\n\t\tif (!end) { return false; }\r\n\r\n\t\tvar mid = [0, 0];\r\n\t\tmid[index] = start[index];\r\n\t\tvar index2 = (index+1)%2;\r\n\t\tmid[index2] = end[index2];\r\n\t\tthis._digLine([start, mid, end]);\r\n\t\t\r\n\t} else { /* use current wall pair, but adjust the line in the middle (S-like) */\r\n\t\r\n\t\tvar index2 = (index+1)%2;\r\n\t\tvar end = this._placeInWall(room2, dirIndex2);\r\n\t\tif (!end) { return false; }\r\n\t\tvar mid = Math.round((end[index2] + start[index2])/2);\r\n\r\n\t\tvar mid1 = [0, 0];\r\n\t\tvar mid2 = [0, 0];\r\n\t\tmid1[index] = start[index];\r\n\t\tmid1[index2] = mid;\r\n\t\tmid2[index] = end[index];\r\n\t\tmid2[index2] = mid;\r\n\t\tthis._digLine([start, mid1, mid2, end]);\r\n\t}\r\n\r\n\troom1.addDoor(start[0], start[1]);\r\n\troom2.addDoor(end[0], end[1]);\r\n\t\r\n\tvar index = this._unconnected.indexOf(room1);\r\n\tif (index != -1) {\r\n\t\tthis._unconnected.splice(index, 1);\r\n\t\tthis._connected.push(room1);\r\n\t}\r\n\r\n\tvar index = this._unconnected.indexOf(room2);\r\n\tif (index != -1) {\r\n\t\tthis._unconnected.splice(index, 1);\r\n\t\tthis._connected.push(room2);\r\n\t}\r\n\t\r\n\treturn true;\r\n};\r\n\r\nROT.Map.Uniform.prototype._placeInWall = function(room, dirIndex) {\r\n\tvar start = [0, 0];\r\n\tvar dir = [0, 0];\r\n\tvar length = 0;\r\n\t\r\n\tswitch (dirIndex) {\r\n\t\tcase 0:\r\n\t\t\tdir = [1, 0];\r\n\t\t\tstart = [room.getLeft(), room.getTop()-1];\r\n\t\t\tlength = room.getRight()-room.getLeft()+1;\r\n\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tdir = [0, 1];\r\n\t\t\tstart = [room.getRight()+1, room.getTop()];\r\n\t\t\tlength = room.getBottom()-room.getTop()+1;\r\n\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tdir = [1, 0];\r\n\t\t\tstart = [room.getLeft(), room.getBottom()+1];\r\n\t\t\tlength = room.getRight()-room.getLeft()+1;\r\n\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tdir = [0, 1];\r\n\t\t\tstart = [room.getLeft()-1, room.getTop()];\r\n\t\t\tlength = room.getBottom()-room.getTop()+1;\r\n\t\tbreak;\r\n\t}\r\n\t\r\n\tvar avail = [];\r\n\tvar lastBadIndex = -2;\r\n\r\n\tfor (var i=0;i<length;i++) {\r\n\t\tvar x = start[0] + i*dir[0];\r\n\t\tvar y = start[1] + i*dir[1];\r\n\t\tavail.push(null);\r\n\t\t\r\n\t\tvar isWall = (this._map[x][y] == 1);\r\n\t\tif (isWall) {\r\n\t\t\tif (lastBadIndex != i-1) { avail[i] = [x, y]; }\r\n\t\t} else {\r\n\t\t\tlastBadIndex = i;\r\n\t\t\tif (i) { avail[i-1] = null; }\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor (var i=avail.length-1; i>=0; i--) {\r\n\t\tif (!avail[i]) { avail.splice(i, 1); }\r\n\t}\r\n\treturn (avail.length ? avail.random() : null);\r\n};\r\n\r\n/**\r\n * Dig a polyline.\r\n */\r\nROT.Map.Uniform.prototype._digLine = function(points) {\r\n\tfor (var i=1;i<points.length;i++) {\r\n\t\tvar start = points[i-1];\r\n\t\tvar end = points[i];\r\n\t\tvar corridor = new ROT.Map.Feature.Corridor(start[0], start[1], end[0], end[1]);\r\n\t\tcorridor.create(this._digCallback);\r\n\t\tthis._corridors.push(corridor);\r\n\t}\r\n};\r\n\r\nROT.Map.Uniform.prototype._digCallback = function(x, y, value) {\r\n\tthis._map[x][y] = value;\r\n\tif (value == 0) { this._dug++; }\r\n};\r\n\r\nROT.Map.Uniform.prototype._isWallCallback = function(x, y) {\r\n\tif (x < 0 || y < 0 || x >= this._width || y >= this._height) { return false; }\r\n\treturn (this._map[x][y] == 1);\r\n};\r\n\r\nROT.Map.Uniform.prototype._canBeDugCallback = function(x, y) {\r\n\tif (x < 1 || y < 1 || x+1 >= this._width || y+1 >= this._height) { return false; }\r\n\treturn (this._map[x][y] == 1);\r\n};\r\n\r\n/**\r\n * @author hyakugei\r\n * @class Dungeon generator which uses the \"orginal\" Rogue dungeon generation algorithm. See http://kuoi.com/~kamikaze/GameDesign/art07_rogue_dungeon.php\r\n * @augments ROT.Map\r\n * @param {int} [width=ROT.DEFAULT_WIDTH]\r\n * @param {int} [height=ROT.DEFAULT_HEIGHT]\r\n * @param {object} [options] Options\r\n * @param {int[]} [options.cellWidth=3] Number of cells to create on the horizontal (number of rooms horizontally)\r\n * @param {int[]} [options.cellHeight=3] Number of cells to create on the vertical (number of rooms vertically)\r\n * @param {int} [options.roomWidth] Room min and max width - normally set auto-magically via the constructor.\r\n * @param {int} [options.roomHeight] Room min and max height - normally set auto-magically via the constructor.\r\n */\r\nROT.Map.Rogue = function (width, height, options) {\r\n\tROT.Map.call(this, width, height);\r\n\r\n\tthis._options = {\r\n\t\tcellWidth: 3,  // NOTE to self, these could probably work the same as the roomWidth/room Height values\r\n\t\tcellHeight: 3  //     ie. as an array with min-max values for each direction....\r\n\t};\r\n\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\r\n\t/*\r\n\tSet the room sizes according to the over-all width of the map,\r\n\tand the cell sizes.\r\n\t*/\r\n\tif (!this._options.hasOwnProperty(\"roomWidth\")) {\r\n\t\tthis._options[\"roomWidth\"] = this._calculateRoomSize(this._width, this._options[\"cellWidth\"]);\r\n\t}\r\n\tif (!this._options.hasOwnProperty(\"roomHeight\")) {\r\n\t\tthis._options[\"roomHeight\"] = this._calculateRoomSize(this._height, this._options[\"cellHeight\"]);\r\n\t}\r\n\r\n};\r\n\r\nROT.Map.Rogue.extend(ROT.Map);\r\n\r\n/**\r\n * @see ROT.Map#create\r\n */\r\nROT.Map.Rogue.prototype.create = function (callback) {\r\n\tthis.map = this._fillMap(1);\r\n\tthis.rooms = [];\r\n\tthis.connectedCells = [];\r\n\r\n\tthis._initRooms();\r\n\tthis._connectRooms();\r\n\tthis._connectUnconnectedRooms();\r\n\tthis._createRandomRoomConnections();\r\n\tthis._createRooms();\r\n\tthis._createCorridors();\r\n\r\n\tif (callback) {\r\n\t\tfor (var i = 0; i < this._width; i++) {\r\n\t\t\tfor (var j = 0; j < this._height; j++) {\r\n\t\t\t\tcallback(i, j, this.map[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\nROT.Map.Rogue.prototype._calculateRoomSize = function (size, cell) {\r\n\tvar max = Math.floor((size/cell) * 0.8);\r\n\tvar min = Math.floor((size/cell) * 0.25);\r\n\tif (min < 2) { min = 2; }\r\n\tif (max < 2) { max = 2; }\r\n\treturn [min, max];\r\n};\r\n\r\nROT.Map.Rogue.prototype._initRooms = function () {\r\n\t// create rooms array. This is the \"grid\" list from the algo.\r\n\tfor (var i = 0; i < this._options.cellWidth; i++) {\r\n\t\tthis.rooms.push([]);\r\n\t\tfor(var j = 0; j < this._options.cellHeight; j++) {\r\n\t\t\tthis.rooms[i].push({\"x\":0, \"y\":0, \"width\":0, \"height\":0, \"connections\":[], \"cellx\":i, \"celly\":j});\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Rogue.prototype._connectRooms = function () {\r\n\t//pick random starting grid\r\n\tvar cgx = ROT.RNG.getUniformInt(0, this._options.cellWidth-1);\r\n\tvar cgy = ROT.RNG.getUniformInt(0, this._options.cellHeight-1);\r\n\r\n\tvar idx;\r\n\tvar ncgx;\r\n\tvar ncgy;\r\n\r\n\tvar found = false;\r\n\tvar room;\r\n\tvar otherRoom;\r\n\r\n\t// find  unconnected neighbour cells\r\n\tdo {\r\n\r\n\t\t//var dirToCheck = [0, 1, 2, 3, 4, 5, 6, 7];\r\n\t\tvar dirToCheck = [0, 2, 4, 6];\r\n\t\tdirToCheck = dirToCheck.randomize();\r\n\r\n\t\tdo {\r\n\t\t\tfound = false;\r\n\t\t\tidx = dirToCheck.pop();\r\n\r\n\t\t\tncgx = cgx + ROT.DIRS[8][idx][0];\r\n\t\t\tncgy = cgy + ROT.DIRS[8][idx][1];\r\n\r\n\t\t\tif (ncgx < 0 || ncgx >= this._options.cellWidth) { continue; }\r\n\t\t\tif (ncgy < 0 || ncgy >= this._options.cellHeight) { continue; }\r\n\r\n\t\t\troom = this.rooms[cgx][cgy];\r\n\r\n\t\t\tif (room[\"connections\"].length > 0) {\r\n\t\t\t\t// as long as this room doesn't already coonect to me, we are ok with it.\r\n\t\t\t\tif (room[\"connections\"][0][0] == ncgx && room[\"connections\"][0][1] == ncgy) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\totherRoom = this.rooms[ncgx][ncgy];\r\n\r\n\t\t\tif (otherRoom[\"connections\"].length == 0) {\r\n\t\t\t\totherRoom[\"connections\"].push([cgx, cgy]);\r\n\r\n\t\t\t\tthis.connectedCells.push([ncgx, ncgy]);\r\n\t\t\t\tcgx = ncgx;\r\n\t\t\t\tcgy = ncgy;\r\n\t\t\t\tfound = true;\r\n\t\t\t}\r\n\r\n\t\t} while (dirToCheck.length > 0 && found == false);\r\n\r\n\t} while (dirToCheck.length > 0);\r\n\r\n};\r\n\r\nROT.Map.Rogue.prototype._connectUnconnectedRooms = function () {\r\n\t//While there are unconnected rooms, try to connect them to a random connected neighbor\r\n\t//(if a room has no connected neighbors yet, just keep cycling, you'll fill out to it eventually).\r\n\tvar cw = this._options.cellWidth;\r\n\tvar ch = this._options.cellHeight;\r\n\r\n\tthis.connectedCells = this.connectedCells.randomize();\r\n\tvar room;\r\n\tvar otherRoom;\r\n\tvar validRoom;\r\n\r\n\tfor (var i = 0; i < this._options.cellWidth; i++) {\r\n\t\tfor (var j = 0; j < this._options.cellHeight; j++)  {\r\n\r\n\t\t\troom = this.rooms[i][j];\r\n\r\n\t\t\tif (room[\"connections\"].length == 0) {\r\n\t\t\t\tvar directions = [0, 2, 4, 6];\r\n\t\t\t\tdirections = directions.randomize();\r\n\r\n\t\t\t\tvalidRoom = false;\r\n\r\n\t\t\t\tdo {\r\n\r\n\t\t\t\t\tvar dirIdx = directions.pop();\r\n\t\t\t\t\tvar newI = i + ROT.DIRS[8][dirIdx][0];\r\n\t\t\t\t\tvar newJ = j + ROT.DIRS[8][dirIdx][1];\r\n\r\n\t\t\t\t\tif (newI < 0 || newI >= cw || newJ < 0 || newJ >= ch) { continue; }\r\n\r\n\t\t\t\t\totherRoom = this.rooms[newI][newJ];\r\n\r\n\t\t\t\t\tvalidRoom = true;\r\n\r\n\t\t\t\t\tif (otherRoom[\"connections\"].length == 0) { break; }\r\n\r\n\t\t\t\t\tfor (var k = 0; k < otherRoom[\"connections\"].length; k++) {\r\n\t\t\t\t\t\tif (otherRoom[\"connections\"][k][0] == i && otherRoom[\"connections\"][k][1] == j) {\r\n\t\t\t\t\t\t\tvalidRoom = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (validRoom) { break; }\r\n\r\n\t\t\t\t} while (directions.length);\r\n\r\n\t\t\t\tif (validRoom) {\r\n\t\t\t\t\troom[\"connections\"].push([otherRoom[\"cellx\"], otherRoom[\"celly\"]]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"-- Unable to connect room.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Rogue.prototype._createRandomRoomConnections = function (connections) {\r\n\t// Empty for now.\r\n};\r\n\r\n\r\nROT.Map.Rogue.prototype._createRooms = function () {\r\n\t// Create Rooms\r\n\r\n\tvar w = this._width;\r\n\tvar h = this._height;\r\n\r\n\tvar cw = this._options.cellWidth;\r\n\tvar ch = this._options.cellHeight;\r\n\r\n\tvar cwp = Math.floor(this._width / cw);\r\n\tvar chp = Math.floor(this._height / ch);\r\n\r\n\tvar roomw;\r\n\tvar roomh;\r\n\tvar roomWidth = this._options[\"roomWidth\"];\r\n\tvar roomHeight = this._options[\"roomHeight\"];\r\n\tvar sx;\r\n\tvar sy;\r\n\tvar otherRoom;\r\n\r\n\tfor (var i = 0; i < cw; i++) {\r\n\t\tfor (var j = 0; j < ch; j++) {\r\n\t\t\tsx = cwp * i;\r\n\t\t\tsy = chp * j;\r\n\r\n\t\t\tif (sx == 0) { sx = 1; }\r\n\t\t\tif (sy == 0) { sy = 1; }\r\n\r\n\t\t\troomw = ROT.RNG.getUniformInt(roomWidth[0], roomWidth[1]);\r\n\t\t\troomh = ROT.RNG.getUniformInt(roomHeight[0], roomHeight[1]);\r\n\r\n\t\t\tif (j > 0) {\r\n\t\t\t\totherRoom = this.rooms[i][j-1];\r\n\t\t\t\twhile (sy - (otherRoom[\"y\"] + otherRoom[\"height\"] ) < 3) {\r\n\t\t\t\t\tsy++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (i > 0) {\r\n\t\t\t\totherRoom = this.rooms[i-1][j];\r\n\t\t\t\twhile(sx - (otherRoom[\"x\"] + otherRoom[\"width\"]) < 3) {\r\n\t\t\t\t\tsx++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar sxOffset = Math.round(ROT.RNG.getUniformInt(0, cwp-roomw)/2);\r\n\t\t\tvar syOffset = Math.round(ROT.RNG.getUniformInt(0, chp-roomh)/2);\r\n\r\n\t\t\twhile (sx + sxOffset + roomw >= w) {\r\n\t\t\t\tif(sxOffset) {\r\n\t\t\t\t\tsxOffset--;\r\n\t\t\t\t} else {\r\n\t\t\t\t\troomw--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile (sy + syOffset + roomh >= h) {\r\n\t\t\t\tif(syOffset) {\r\n\t\t\t\t\tsyOffset--;\r\n\t\t\t\t} else {\r\n\t\t\t\t\troomh--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsx = sx + sxOffset;\r\n\t\t\tsy = sy + syOffset;\r\n\r\n\t\t\tthis.rooms[i][j][\"x\"] = sx;\r\n\t\t\tthis.rooms[i][j][\"y\"] = sy;\r\n\t\t\tthis.rooms[i][j][\"width\"] = roomw;\r\n\t\t\tthis.rooms[i][j][\"height\"] = roomh;\r\n\r\n\t\t\tfor (var ii = sx; ii < sx + roomw; ii++) {\r\n\t\t\t\tfor (var jj = sy; jj < sy + roomh; jj++) {\r\n\t\t\t\t\tthis.map[ii][jj] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Rogue.prototype._getWallPosition = function (aRoom, aDirection) {\r\n\tvar rx;\r\n\tvar ry;\r\n\tvar door;\r\n\r\n\tif (aDirection == 1 || aDirection == 3) {\r\n\t\trx = ROT.RNG.getUniformInt(aRoom[\"x\"] + 1, aRoom[\"x\"] + aRoom[\"width\"] - 2);\r\n\t\tif (aDirection == 1) {\r\n\t\t\try = aRoom[\"y\"] - 2;\r\n\t\t\tdoor = ry + 1;\r\n\t\t} else {\r\n\t\t\try = aRoom[\"y\"] + aRoom[\"height\"] + 1;\r\n\t\t\tdoor = ry -1;\r\n\t\t}\r\n\r\n\t\tthis.map[rx][door] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\r\n\r\n\t} else if (aDirection == 2 || aDirection == 4) {\r\n\t\try = ROT.RNG.getUniformInt(aRoom[\"y\"] + 1, aRoom[\"y\"] + aRoom[\"height\"] - 2);\r\n\t\tif(aDirection == 2) {\r\n\t\t\trx = aRoom[\"x\"] + aRoom[\"width\"] + 1;\r\n\t\t\tdoor = rx - 1;\r\n\t\t} else {\r\n\t\t\trx = aRoom[\"x\"] - 2;\r\n\t\t\tdoor = rx + 1;\r\n\t\t}\r\n\r\n\t\tthis.map[door][ry] = 0; // i'm not setting a specific 'door' tile value right now, just empty space.\r\n\r\n\t}\r\n\treturn [rx, ry];\r\n};\r\n\r\n/***\r\n* @param startPosition a 2 element array\r\n* @param endPosition a 2 element array\r\n*/\r\nROT.Map.Rogue.prototype._drawCorridor = function (startPosition, endPosition) {\r\n\tvar xOffset = endPosition[0] - startPosition[0];\r\n\tvar yOffset = endPosition[1] - startPosition[1];\r\n\r\n\tvar xpos = startPosition[0];\r\n\tvar ypos = startPosition[1];\r\n\r\n\tvar tempDist;\r\n\tvar xDir;\r\n\tvar yDir;\r\n\r\n\tvar move; // 2 element array, element 0 is the direction, element 1 is the total value to move.\r\n\tvar moves = []; // a list of 2 element arrays\r\n\r\n\tvar xAbs = Math.abs(xOffset);\r\n\tvar yAbs = Math.abs(yOffset);\r\n\r\n\tvar percent = ROT.RNG.getUniform(); // used to split the move at different places along the long axis\r\n\tvar firstHalf = percent;\r\n\tvar secondHalf = 1 - percent;\r\n\r\n\txDir = xOffset > 0 ? 2 : 6;\r\n\tyDir = yOffset > 0 ? 4 : 0;\r\n\r\n\tif (xAbs < yAbs) {\r\n\t\t// move firstHalf of the y offset\r\n\t\ttempDist = Math.ceil(yAbs * firstHalf);\r\n\t\tmoves.push([yDir, tempDist]);\r\n\t\t// move all the x offset\r\n\t\tmoves.push([xDir, xAbs]);\r\n\t\t// move sendHalf of the  y offset\r\n\t\ttempDist = Math.floor(yAbs * secondHalf);\r\n\t\tmoves.push([yDir, tempDist]);\r\n\t} else {\r\n\t\t//  move firstHalf of the x offset\r\n\t\ttempDist = Math.ceil(xAbs * firstHalf);\r\n\t\tmoves.push([xDir, tempDist]);\r\n\t\t// move all the y offset\r\n\t\tmoves.push([yDir, yAbs]);\r\n\t\t// move secondHalf of the x offset.\r\n\t\ttempDist = Math.floor(xAbs * secondHalf);\r\n\t\tmoves.push([xDir, tempDist]);\r\n\t}\r\n\r\n\tthis.map[xpos][ypos] = 0;\r\n\r\n\twhile (moves.length > 0) {\r\n\t\tmove = moves.pop();\r\n\t\twhile (move[1] > 0) {\r\n\t\t\txpos += ROT.DIRS[8][move[0]][0];\r\n\t\t\typos += ROT.DIRS[8][move[0]][1];\r\n\t\t\tthis.map[xpos][ypos] = 0;\r\n\t\t\tmove[1] = move[1] - 1;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Rogue.prototype._createCorridors = function () {\r\n\t// Draw Corridors between connected rooms\r\n\r\n\tvar cw = this._options.cellWidth;\r\n\tvar ch = this._options.cellHeight;\r\n\tvar room;\r\n\tvar connection;\r\n\tvar otherRoom;\r\n\tvar wall;\r\n\tvar otherWall;\r\n\r\n\tfor (var i = 0; i < cw; i++) {\r\n\t\tfor (var j = 0; j < ch; j++) {\r\n\t\t\troom = this.rooms[i][j];\r\n\r\n\t\t\tfor (var k = 0; k < room[\"connections\"].length; k++) {\r\n\r\n\t\t\t\tconnection = room[\"connections\"][k];\r\n\r\n\t\t\t\totherRoom = this.rooms[connection[0]][connection[1]];\r\n\r\n\t\t\t\t// figure out what wall our corridor will start one.\r\n\t\t\t\t// figure out what wall our corridor will end on.\r\n\t\t\t\tif (otherRoom[\"cellx\"] > room[\"cellx\"]) {\r\n\t\t\t\t\twall = 2;\r\n\t\t\t\t\totherWall = 4;\r\n\t\t\t\t} else if (otherRoom[\"cellx\"] < room[\"cellx\"]) {\r\n\t\t\t\t\twall = 4;\r\n\t\t\t\t\totherWall = 2;\r\n\t\t\t\t} else if(otherRoom[\"celly\"] > room[\"celly\"]) {\r\n\t\t\t\t\twall = 3;\r\n\t\t\t\t\totherWall = 1;\r\n\t\t\t\t} else if(otherRoom[\"celly\"] < room[\"celly\"]) {\r\n\t\t\t\t\twall = 1;\r\n\t\t\t\t\totherWall = 3;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._drawCorridor(this._getWallPosition(room, wall), this._getWallPosition(otherRoom, otherWall));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n/**\r\n * @class Dungeon feature; has own .create() method\r\n */\r\nROT.Map.Feature = function() {};\r\nROT.Map.Feature.prototype.isValid = function(canBeDugCallback) {};\r\nROT.Map.Feature.prototype.create = function(digCallback) {};\r\nROT.Map.Feature.prototype.debug = function() {};\r\nROT.Map.Feature.createRandomAt = function(x, y, dx, dy, options) {};\r\n\r\n/**\r\n * @class Room\r\n * @augments ROT.Map.Feature\r\n * @param {int} x1\r\n * @param {int} y1\r\n * @param {int} x2\r\n * @param {int} y2\r\n * @param {int} [doorX]\r\n * @param {int} [doorY]\r\n */\r\nROT.Map.Feature.Room = function(x1, y1, x2, y2, doorX, doorY) {\r\n\tthis._x1 = x1;\r\n\tthis._y1 = y1;\r\n\tthis._x2 = x2;\r\n\tthis._y2 = y2;\r\n\tthis._doors = {};\r\n\tif (arguments.length > 4) { this.addDoor(doorX, doorY); }\r\n};\r\nROT.Map.Feature.Room.extend(ROT.Map.Feature);\r\n\r\n/**\r\n * Room of random size, with a given doors and direction\r\n */\r\nROT.Map.Feature.Room.createRandomAt = function(x, y, dx, dy, options) {\r\n\tvar min = options.roomWidth[0];\r\n\tvar max = options.roomWidth[1];\r\n\tvar width = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\tvar min = options.roomHeight[0];\r\n\tvar max = options.roomHeight[1];\r\n\tvar height = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\tif (dx == 1) { /* to the right */\r\n\t\tvar y2 = y - Math.floor(ROT.RNG.getUniform() * height);\r\n\t\treturn new this(x+1, y2, x+width, y2+height-1, x, y);\r\n\t}\r\n\t\r\n\tif (dx == -1) { /* to the left */\r\n\t\tvar y2 = y - Math.floor(ROT.RNG.getUniform() * height);\r\n\t\treturn new this(x-width, y2, x-1, y2+height-1, x, y);\r\n\t}\r\n\r\n\tif (dy == 1) { /* to the bottom */\r\n\t\tvar x2 = x - Math.floor(ROT.RNG.getUniform() * width);\r\n\t\treturn new this(x2, y+1, x2+width-1, y+height, x, y);\r\n\t}\r\n\r\n\tif (dy == -1) { /* to the top */\r\n\t\tvar x2 = x - Math.floor(ROT.RNG.getUniform() * width);\r\n\t\treturn new this(x2, y-height, x2+width-1, y-1, x, y);\r\n\t}\r\n\r\n        throw new Error(\"dx or dy must be 1 or -1\");\r\n};\r\n\r\n/**\r\n * Room of random size, positioned around center coords\r\n */\r\nROT.Map.Feature.Room.createRandomCenter = function(cx, cy, options) {\r\n\tvar min = options.roomWidth[0];\r\n\tvar max = options.roomWidth[1];\r\n\tvar width = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\tvar min = options.roomHeight[0];\r\n\tvar max = options.roomHeight[1];\r\n\tvar height = ROT.RNG.getUniformInt(min, max);\r\n\r\n\tvar x1 = cx - Math.floor(ROT.RNG.getUniform()*width);\r\n\tvar y1 = cy - Math.floor(ROT.RNG.getUniform()*height);\r\n\tvar x2 = x1 + width - 1;\r\n\tvar y2 = y1 + height - 1;\r\n\r\n\treturn new this(x1, y1, x2, y2);\r\n};\r\n\r\n/**\r\n * Room of random size within a given dimensions\r\n */\r\nROT.Map.Feature.Room.createRandom = function(availWidth, availHeight, options) {\r\n\tvar min = options.roomWidth[0];\r\n\tvar max = options.roomWidth[1];\r\n\tvar width = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\tvar min = options.roomHeight[0];\r\n\tvar max = options.roomHeight[1];\r\n\tvar height = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\tvar left = availWidth - width - 1;\r\n\tvar top = availHeight - height - 1;\r\n\r\n\tvar x1 = 1 + Math.floor(ROT.RNG.getUniform()*left);\r\n\tvar y1 = 1 + Math.floor(ROT.RNG.getUniform()*top);\r\n\tvar x2 = x1 + width - 1;\r\n\tvar y2 = y1 + height - 1;\r\n\r\n\treturn new this(x1, y1, x2, y2);\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.addDoor = function(x, y) {\r\n\tthis._doors[x+\",\"+y] = 1;\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * @param {function}\r\n */\r\nROT.Map.Feature.Room.prototype.getDoors = function(callback) {\r\n\tfor (var key in this._doors) {\r\n\t\tvar parts = key.split(\",\");\r\n\t\tcallback(parseInt(parts[0]), parseInt(parts[1]));\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.clearDoors = function() {\r\n\tthis._doors = {};\r\n\treturn this;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.addDoors = function(isWallCallback) {\r\n\tvar left = this._x1-1;\r\n\tvar right = this._x2+1;\r\n\tvar top = this._y1-1;\r\n\tvar bottom = this._y2+1;\r\n\r\n\tfor (var x=left; x<=right; x++) {\r\n\t\tfor (var y=top; y<=bottom; y++) {\r\n\t\t\tif (x != left && x != right && y != top && y != bottom) { continue; }\r\n\t\t\tif (isWallCallback(x, y)) { continue; }\r\n\r\n\t\t\tthis.addDoor(x, y);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.debug = function() {\r\n\tconsole.log(\"room\", this._x1, this._y1, this._x2, this._y2);\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.isValid = function(isWallCallback, canBeDugCallback) { \r\n\tvar left = this._x1-1;\r\n\tvar right = this._x2+1;\r\n\tvar top = this._y1-1;\r\n\tvar bottom = this._y2+1;\r\n\t\r\n\tfor (var x=left; x<=right; x++) {\r\n\t\tfor (var y=top; y<=bottom; y++) {\r\n\t\t\tif (x == left || x == right || y == top || y == bottom) {\r\n\t\t\t\tif (!isWallCallback(x, y)) { return false; }\r\n\t\t\t} else {\r\n\t\t\t\tif (!canBeDugCallback(x, y)) { return false; }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty, 1 = wall, 2 = door. Multiple doors are allowed.\r\n */\r\nROT.Map.Feature.Room.prototype.create = function(digCallback) { \r\n\tvar left = this._x1-1;\r\n\tvar right = this._x2+1;\r\n\tvar top = this._y1-1;\r\n\tvar bottom = this._y2+1;\r\n\t\r\n\tvar value = 0;\r\n\tfor (var x=left; x<=right; x++) {\r\n\t\tfor (var y=top; y<=bottom; y++) {\r\n\t\t\tif (x+\",\"+y in this._doors) {\r\n\t\t\t\tvalue = 2;\r\n\t\t\t} else if (x == left || x == right || y == top || y == bottom) {\r\n\t\t\t\tvalue = 1;\r\n\t\t\t} else {\r\n\t\t\t\tvalue = 0;\r\n\t\t\t}\r\n\t\t\tdigCallback(x, y, value);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.getCenter = function() {\r\n\treturn [Math.round((this._x1 + this._x2)/2), Math.round((this._y1 + this._y2)/2)];\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.getLeft = function() {\r\n\treturn this._x1;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.getRight = function() {\r\n\treturn this._x2;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.getTop = function() {\r\n\treturn this._y1;\r\n};\r\n\r\nROT.Map.Feature.Room.prototype.getBottom = function() {\r\n\treturn this._y2;\r\n};\r\n\r\n/**\r\n * @class Corridor\r\n * @augments ROT.Map.Feature\r\n * @param {int} startX\r\n * @param {int} startY\r\n * @param {int} endX\r\n * @param {int} endY\r\n */\r\nROT.Map.Feature.Corridor = function(startX, startY, endX, endY) {\r\n\tthis._startX = startX;\r\n\tthis._startY = startY;\r\n\tthis._endX = endX; \r\n\tthis._endY = endY;\r\n\tthis._endsWithAWall = true;\r\n};\r\nROT.Map.Feature.Corridor.extend(ROT.Map.Feature);\r\n\r\nROT.Map.Feature.Corridor.createRandomAt = function(x, y, dx, dy, options) {\r\n\tvar min = options.corridorLength[0];\r\n\tvar max = options.corridorLength[1];\r\n\tvar length = ROT.RNG.getUniformInt(min, max);\r\n\t\r\n\treturn new this(x, y, x + dx*length, y + dy*length);\r\n};\r\n\r\nROT.Map.Feature.Corridor.prototype.debug = function() {\r\n\tconsole.log(\"corridor\", this._startX, this._startY, this._endX, this._endY);\r\n};\r\n\r\nROT.Map.Feature.Corridor.prototype.isValid = function(isWallCallback, canBeDugCallback){ \r\n\tvar sx = this._startX;\r\n\tvar sy = this._startY;\r\n\tvar dx = this._endX-sx;\r\n\tvar dy = this._endY-sy;\r\n\tvar length = 1 + Math.max(Math.abs(dx), Math.abs(dy));\r\n\t\r\n\tif (dx) { dx = dx/Math.abs(dx); }\r\n\tif (dy) { dy = dy/Math.abs(dy); }\r\n\tvar nx = dy;\r\n\tvar ny = -dx;\r\n\t\r\n\tvar ok = true;\r\n\tfor (var i=0; i<length; i++) {\r\n\t\tvar x = sx + i*dx;\r\n\t\tvar y = sy + i*dy;\r\n\r\n\t\tif (!canBeDugCallback(     x,      y)) { ok = false; }\r\n\t\tif (!isWallCallback  (x + nx, y + ny)) { ok = false; }\r\n\t\tif (!isWallCallback  (x - nx, y - ny)) { ok = false; }\r\n\t\t\r\n\t\tif (!ok) {\r\n\t\t\tlength = i;\r\n\t\t\tthis._endX = x-dx;\r\n\t\t\tthis._endY = y-dy;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * If the length degenerated, this corridor might be invalid\r\n\t */\r\n\t \r\n\t/* not supported */\r\n\tif (length == 0) { return false; } \r\n\t\r\n\t /* length 1 allowed only if the next space is empty */\r\n\tif (length == 1 && isWallCallback(this._endX + dx, this._endY + dy)) { return false; }\r\n\t\r\n\t/**\r\n\t * We do not want the corridor to crash into a corner of a room;\r\n\t * if any of the ending corners is empty, the N+1th cell of this corridor must be empty too.\r\n\t * \r\n\t * Situation:\r\n\t * #######1\r\n\t * .......?\r\n\t * #######2\r\n\t * \r\n\t * The corridor was dug from left to right.\r\n\t * 1, 2 - problematic corners, ? = N+1th cell (not dug)\r\n\t */\r\n\tvar firstCornerBad = !isWallCallback(this._endX + dx + nx, this._endY + dy + ny);\r\n\tvar secondCornerBad = !isWallCallback(this._endX + dx - nx, this._endY + dy - ny);\r\n\tthis._endsWithAWall = isWallCallback(this._endX + dx, this._endY + dy);\r\n\tif ((firstCornerBad || secondCornerBad) && this._endsWithAWall) { return false; }\r\n\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * @param {function} digCallback Dig callback with a signature (x, y, value). Values: 0 = empty.\r\n */\r\nROT.Map.Feature.Corridor.prototype.create = function(digCallback) { \r\n\tvar sx = this._startX;\r\n\tvar sy = this._startY;\r\n\tvar dx = this._endX-sx;\r\n\tvar dy = this._endY-sy;\r\n\tvar length = 1+Math.max(Math.abs(dx), Math.abs(dy));\r\n\t\r\n\tif (dx) { dx = dx/Math.abs(dx); }\r\n\tif (dy) { dy = dy/Math.abs(dy); }\r\n\tvar nx = dy;\r\n\tvar ny = -dx;\r\n\t\r\n\tfor (var i=0; i<length; i++) {\r\n\t\tvar x = sx + i*dx;\r\n\t\tvar y = sy + i*dy;\r\n\t\tdigCallback(x, y, 0);\r\n\t}\r\n\t\r\n\treturn true;\r\n};\r\n\r\nROT.Map.Feature.Corridor.prototype.createPriorityWalls = function(priorityWallCallback) {\r\n\tif (!this._endsWithAWall) { return; }\r\n\r\n\tvar sx = this._startX;\r\n\tvar sy = this._startY;\r\n\r\n\tvar dx = this._endX-sx;\r\n\tvar dy = this._endY-sy;\r\n\tif (dx) { dx = dx/Math.abs(dx); }\r\n\tif (dy) { dy = dy/Math.abs(dy); }\r\n\tvar nx = dy;\r\n\tvar ny = -dx;\r\n\r\n\tpriorityWallCallback(this._endX + dx, this._endY + dy);\r\n\tpriorityWallCallback(this._endX + nx, this._endY + ny);\r\n\tpriorityWallCallback(this._endX - nx, this._endY - ny);\r\n};\r\n/**\r\n * @class Base noise generator\r\n */\r\nROT.Noise = function() {\r\n};\r\n\r\nROT.Noise.prototype.get = function(x, y) {};\r\n/**\r\n * A simple 2d implementation of simplex noise by Ondrej Zara\r\n *\r\n * Based on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\r\n * Which is based on example code by Stefan Gustavson (stegu@itn.liu.se).\r\n * With Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\r\n * Better rank ordering method by Stefan Gustavson in 2012.\r\n */\r\n\r\n/**\r\n * @class 2D simplex noise generator\r\n * @param {int} [gradients=256] Random gradients\r\n */\r\nROT.Noise.Simplex = function(gradients) {\r\n\tROT.Noise.call(this);\r\n\r\n\tthis._F2 = 0.5 * (Math.sqrt(3) - 1);\r\n\tthis._G2 = (3 - Math.sqrt(3)) / 6;\r\n\r\n\tthis._gradients = [\r\n\t\t[ 0, -1],\r\n\t\t[ 1, -1],\r\n\t\t[ 1,  0],\r\n\t\t[ 1,  1],\r\n\t\t[ 0,  1],\r\n\t\t[-1,  1],\r\n\t\t[-1,  0],\r\n\t\t[-1, -1]\r\n\t];\r\n\r\n\tvar permutations = [];\r\n\tvar count = gradients || 256;\r\n\tfor (var i=0;i<count;i++) { permutations.push(i); }\r\n\tpermutations = permutations.randomize();\r\n\r\n\tthis._perms = [];\r\n\tthis._indexes = [];\r\n\r\n\tfor (var i=0;i<2*count;i++) {\r\n\t\tthis._perms.push(permutations[i % count]);\r\n\t\tthis._indexes.push(this._perms[i] % this._gradients.length);\r\n\t}\r\n\r\n};\r\nROT.Noise.Simplex.extend(ROT.Noise);\r\n\r\nROT.Noise.Simplex.prototype.get = function(xin, yin) {\r\n\tvar perms = this._perms;\r\n\tvar indexes = this._indexes;\r\n\tvar count = perms.length/2;\r\n\tvar G2 = this._G2;\r\n\r\n\tvar n0 =0, n1 = 0, n2 = 0, gi; // Noise contributions from the three corners\r\n\r\n\t// Skew the input space to determine which simplex cell we're in\r\n\tvar s = (xin + yin) * this._F2; // Hairy factor for 2D\r\n\tvar i = Math.floor(xin + s);\r\n\tvar j = Math.floor(yin + s);\r\n\tvar t = (i + j) * G2;\r\n\tvar X0 = i - t; // Unskew the cell origin back to (x,y) space\r\n\tvar Y0 = j - t;\r\n\tvar x0 = xin - X0; // The x,y distances from the cell origin\r\n\tvar y0 = yin - Y0;\r\n\r\n\t// For the 2D case, the simplex shape is an equilateral triangle.\r\n\t// Determine which simplex we are in.\r\n\tvar i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\r\n\tif (x0 > y0) {\r\n\t\ti1 = 1;\r\n\t\tj1 = 0;\r\n\t} else { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\r\n\t\ti1 = 0;\r\n\t\tj1 = 1;\r\n\t} // upper triangle, YX order: (0,0)->(0,1)->(1,1)\r\n\r\n\t// A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\r\n\t// a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\r\n\t// c = (3-sqrt(3))/6\r\n\tvar x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\r\n\tvar y1 = y0 - j1 + G2;\r\n\tvar x2 = x0 - 1 + 2*G2; // Offsets for last corner in (x,y) unskewed coords\r\n\tvar y2 = y0 - 1 + 2*G2;\r\n\r\n\t// Work out the hashed gradient indices of the three simplex corners\r\n\tvar ii = i.mod(count);\r\n\tvar jj = j.mod(count);\r\n\r\n\t// Calculate the contribution from the three corners\r\n\tvar t0 = 0.5 - x0*x0 - y0*y0;\r\n\tif (t0 >= 0) {\r\n\t\tt0 *= t0;\r\n\t\tgi = indexes[ii+perms[jj]];\r\n\t\tvar grad = this._gradients[gi];\r\n\t\tn0 = t0 * t0 * (grad[0] * x0 + grad[1] * y0);\r\n\t}\r\n\t\r\n\tvar t1 = 0.5 - x1*x1 - y1*y1;\r\n\tif (t1 >= 0) {\r\n\t\tt1 *= t1;\r\n\t\tgi = indexes[ii+i1+perms[jj+j1]];\r\n\t\tvar grad = this._gradients[gi];\r\n\t\tn1 = t1 * t1 * (grad[0] * x1 + grad[1] * y1);\r\n\t}\r\n\t\r\n\tvar t2 = 0.5 - x2*x2 - y2*y2;\r\n\tif (t2 >= 0) {\r\n\t\tt2 *= t2;\r\n\t\tgi = indexes[ii+1+perms[jj+1]];\r\n\t\tvar grad = this._gradients[gi];\r\n\t\tn2 = t2 * t2 * (grad[0] * x2 + grad[1] * y2);\r\n\t}\r\n\r\n\t// Add contributions from each corner to get the final noise value.\r\n\t// The result is scaled to return values in the interval [-1,1].\r\n\treturn 70 * (n0 + n1 + n2);\r\n}\r\n/**\r\n * @class Abstract FOV algorithm\r\n * @param {function} lightPassesCallback Does the light pass through x,y?\r\n * @param {object} [options]\r\n * @param {int} [options.topology=8] 4/6/8\r\n */\r\nROT.FOV = function(lightPassesCallback, options) {\r\n\tthis._lightPasses = lightPassesCallback;\r\n\tthis._options = {\r\n\t\ttopology: 8\r\n\t};\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n};\r\n\r\n/**\r\n * Compute visibility for a 360-degree circle\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} R Maximum visibility radius\r\n * @param {function} callback\r\n */\r\nROT.FOV.prototype.compute = function(x, y, R, callback) {};\r\n\r\n/**\r\n * Return all neighbors in a concentric ring\r\n * @param {int} cx center-x\r\n * @param {int} cy center-y\r\n * @param {int} r range\r\n */\r\nROT.FOV.prototype._getCircle = function(cx, cy, r) {\r\n\tvar result = [];\r\n\tvar dirs, countFactor, startOffset;\r\n\r\n\tswitch (this._options.topology) {\r\n\t\tcase 4:\r\n\t\t\tcountFactor = 1;\r\n\t\t\tstartOffset = [0, 1];\r\n\t\t\tdirs = [\r\n\t\t\t\tROT.DIRS[8][7],\r\n\t\t\t\tROT.DIRS[8][1],\r\n\t\t\t\tROT.DIRS[8][3],\r\n\t\t\t\tROT.DIRS[8][5]\r\n\t\t\t];\r\n\t\tbreak;\r\n\r\n\t\tcase 6:\r\n\t\t\tdirs = ROT.DIRS[6];\r\n\t\t\tcountFactor = 1;\r\n\t\t\tstartOffset = [-1, 1];\r\n\t\tbreak;\r\n\r\n\t\tcase 8:\r\n\t\t\tdirs = ROT.DIRS[4];\r\n\t\t\tcountFactor = 2;\r\n\t\t\tstartOffset = [-1, 1];\r\n\t\tbreak;\r\n\t}\r\n\r\n\t/* starting neighbor */\r\n\tvar x = cx + startOffset[0]*r;\r\n\tvar y = cy + startOffset[1]*r;\r\n\r\n\t/* circle */\r\n\tfor (var i=0;i<dirs.length;i++) {\r\n\t\tfor (var j=0;j<r*countFactor;j++) {\r\n\t\t\tresult.push([x, y]);\r\n\t\t\tx += dirs[i][0];\r\n\t\t\ty += dirs[i][1];\r\n\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n/**\r\n * @class Discrete shadowcasting algorithm. Obsoleted by Precise shadowcasting.\r\n * @augments ROT.FOV\r\n */\r\nROT.FOV.DiscreteShadowcasting = function(lightPassesCallback, options) {\r\n\tROT.FOV.call(this, lightPassesCallback, options);\r\n};\r\nROT.FOV.DiscreteShadowcasting.extend(ROT.FOV);\r\n\r\n/**\r\n * @see ROT.FOV#compute\r\n */\r\nROT.FOV.DiscreteShadowcasting.prototype.compute = function(x, y, R, callback) {\r\n\tvar center = this._coords;\r\n\tvar map = this._map;\r\n\r\n\t/* this place is always visible */\r\n\tcallback(x, y, 0, 1);\r\n\r\n\t/* standing in a dark place. FIXME is this a good idea?  */\r\n\tif (!this._lightPasses(x, y)) { return; }\r\n\t\r\n\t/* start and end angles */\r\n\tvar DATA = [];\r\n\t\r\n\tvar A, B, cx, cy, blocks;\r\n\r\n\t/* analyze surrounding cells in concentric rings, starting from the center */\r\n\tfor (var r=1; r<=R; r++) {\r\n\t\tvar neighbors = this._getCircle(x, y, r);\r\n\t\tvar angle = 360 / neighbors.length;\r\n\r\n\t\tfor (var i=0;i<neighbors.length;i++) {\r\n\t\t\tcx = neighbors[i][0];\r\n\t\t\tcy = neighbors[i][1];\r\n\t\t\tA = angle * (i - 0.5);\r\n\t\t\tB = A + angle;\r\n\t\t\t\r\n\t\t\tblocks = !this._lightPasses(cx, cy);\r\n\t\t\tif (this._visibleCoords(Math.floor(A), Math.ceil(B), blocks, DATA)) { callback(cx, cy, r, 1); }\r\n\t\t\t\r\n\t\t\tif (DATA.length == 2 && DATA[0] == 0 && DATA[1] == 360) { return; } /* cutoff? */\r\n\r\n\t\t} /* for all cells in this ring */\r\n\t} /* for all rings */\r\n};\r\n\r\n/**\r\n * @param {int} A start angle\r\n * @param {int} B end angle\r\n * @param {bool} blocks Does current cell block visibility?\r\n * @param {int[][]} DATA shadowed angle pairs\r\n */\r\nROT.FOV.DiscreteShadowcasting.prototype._visibleCoords = function(A, B, blocks, DATA) {\r\n\tif (A < 0) { \r\n\t\tvar v1 = arguments.callee(0, B, blocks, DATA);\r\n\t\tvar v2 = arguments.callee(360+A, 360, blocks, DATA);\r\n\t\treturn v1 || v2;\r\n\t}\r\n\t\r\n\tvar index = 0;\r\n\twhile (index < DATA.length && DATA[index] < A) { index++; }\r\n\t\r\n\tif (index == DATA.length) { /* completely new shadow */\r\n\t\tif (blocks) { DATA.push(A, B); } \r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tvar count = 0;\r\n\t\r\n\tif (index % 2) { /* this shadow starts in an existing shadow, or within its ending boundary */\r\n\t\twhile (index < DATA.length && DATA[index] < B) {\r\n\t\t\tindex++;\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\t\r\n\t\tif (count == 0) { return false; }\r\n\t\t\r\n\t\tif (blocks) { \r\n\t\t\tif (count % 2) {\r\n\t\t\t\tDATA.splice(index-count, count, B);\r\n\t\t\t} else {\r\n\t\t\t\tDATA.splice(index-count, count);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\r\n\t} else { /* this shadow starts outside an existing shadow, or within a starting boundary */\r\n\t\twhile (index < DATA.length && DATA[index] < B) {\r\n\t\t\tindex++;\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\t\r\n\t\t/* visible when outside an existing shadow, or when overlapping */\r\n\t\tif (A == DATA[index-count] && count == 1) { return false; }\r\n\t\t\r\n\t\tif (blocks) { \r\n\t\t\tif (count % 2) {\r\n\t\t\t\tDATA.splice(index-count, count, A);\r\n\t\t\t} else {\r\n\t\t\t\tDATA.splice(index-count, count, A, B);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\treturn true;\r\n\t}\r\n};\r\n/**\r\n * @class Precise shadowcasting algorithm\r\n * @augments ROT.FOV\r\n */\r\nROT.FOV.PreciseShadowcasting = function(lightPassesCallback, options) {\r\n\tROT.FOV.call(this, lightPassesCallback, options);\r\n};\r\nROT.FOV.PreciseShadowcasting.extend(ROT.FOV);\r\n\r\n/**\r\n * @see ROT.FOV#compute\r\n */\r\nROT.FOV.PreciseShadowcasting.prototype.compute = function(x, y, R, callback) {\r\n\t/* this place is always visible */\r\n\tcallback(x, y, 0, 1);\r\n\r\n\t/* standing in a dark place. FIXME is this a good idea?  */\r\n\tif (!this._lightPasses(x, y)) { return; }\r\n\t\r\n\t/* list of all shadows */\r\n\tvar SHADOWS = [];\r\n\t\r\n\tvar cx, cy, blocks, A1, A2, visibility;\r\n\r\n\t/* analyze surrounding cells in concentric rings, starting from the center */\r\n\tfor (var r=1; r<=R; r++) {\r\n\t\tvar neighbors = this._getCircle(x, y, r);\r\n\t\tvar neighborCount = neighbors.length;\r\n\r\n\t\tfor (var i=0;i<neighborCount;i++) {\r\n\t\t\tcx = neighbors[i][0];\r\n\t\t\tcy = neighbors[i][1];\r\n\t\t\t/* shift half-an-angle backwards to maintain consistency of 0-th cells */\r\n\t\t\tA1 = [i ? 2*i-1 : 2*neighborCount-1, 2*neighborCount];\r\n\t\t\tA2 = [2*i+1, 2*neighborCount]; \r\n\t\t\t\r\n\t\t\tblocks = !this._lightPasses(cx, cy);\r\n\t\t\tvisibility = this._checkVisibility(A1, A2, blocks, SHADOWS);\r\n\t\t\tif (visibility) { callback(cx, cy, r, visibility); }\r\n\r\n\t\t\tif (SHADOWS.length == 2 && SHADOWS[0][0] == 0 && SHADOWS[1][0] == SHADOWS[1][1]) { return; } /* cutoff? */\r\n\r\n\t\t} /* for all cells in this ring */\r\n\t} /* for all rings */\r\n};\r\n\r\n/**\r\n * @param {int[2]} A1 arc start\r\n * @param {int[2]} A2 arc end\r\n * @param {bool} blocks Does current arc block visibility?\r\n * @param {int[][]} SHADOWS list of active shadows\r\n */\r\nROT.FOV.PreciseShadowcasting.prototype._checkVisibility = function(A1, A2, blocks, SHADOWS) {\r\n\tif (A1[0] > A2[0]) { /* split into two sub-arcs */\r\n\t\tvar v1 = this._checkVisibility(A1, [A1[1], A1[1]], blocks, SHADOWS);\r\n\t\tvar v2 = this._checkVisibility([0, 1], A2, blocks, SHADOWS);\r\n\t\treturn (v1+v2)/2;\r\n\t}\r\n\r\n\t/* index1: first shadow >= A1 */\r\n\tvar index1 = 0, edge1 = false;\r\n\twhile (index1 < SHADOWS.length) {\r\n\t\tvar old = SHADOWS[index1];\r\n\t\tvar diff = old[0]*A1[1] - A1[0]*old[1];\r\n\t\tif (diff >= 0) { /* old >= A1 */\r\n\t\t\tif (diff == 0 && !(index1 % 2)) { edge1 = true; }\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tindex1++;\r\n\t}\r\n\r\n\t/* index2: last shadow <= A2 */\r\n\tvar index2 = SHADOWS.length, edge2 = false;\r\n\twhile (index2--) {\r\n\t\tvar old = SHADOWS[index2];\r\n\t\tvar diff = A2[0]*old[1] - old[0]*A2[1];\r\n\t\tif (diff >= 0) { /* old <= A2 */\r\n\t\t\tif (diff == 0 && (index2 % 2)) { edge2 = true; }\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tvar visible = true;\r\n\tif (index1 == index2 && (edge1 || edge2)) {  /* subset of existing shadow, one of the edges match */\r\n\t\tvisible = false; \r\n\t} else if (edge1 && edge2 && index1+1==index2 && (index2 % 2)) { /* completely equivalent with existing shadow */\r\n\t\tvisible = false;\r\n\t} else if (index1 > index2 && (index1 % 2)) { /* subset of existing shadow, not touching */\r\n\t\tvisible = false;\r\n\t}\r\n\t\r\n\tif (!visible) { return 0; } /* fast case: not visible */\r\n\t\r\n\tvar visibleLength, P;\r\n\r\n\t/* compute the length of visible arc, adjust list of shadows (if blocking) */\r\n\tvar remove = index2-index1+1;\r\n\tif (remove % 2) {\r\n\t\tif (index1 % 2) { /* first edge within existing shadow, second outside */\r\n\t\t\tvar P = SHADOWS[index1];\r\n\t\t\tvisibleLength = (A2[0]*P[1] - P[0]*A2[1]) / (P[1] * A2[1]);\r\n\t\t\tif (blocks) { SHADOWS.splice(index1, remove, A2); }\r\n\t\t} else { /* second edge within existing shadow, first outside */\r\n\t\t\tvar P = SHADOWS[index2];\r\n\t\t\tvisibleLength = (P[0]*A1[1] - A1[0]*P[1]) / (A1[1] * P[1]);\r\n\t\t\tif (blocks) { SHADOWS.splice(index1, remove, A1); }\r\n\t\t}\r\n\t} else {\r\n\t\tif (index1 % 2) { /* both edges within existing shadows */\r\n\t\t\tvar P1 = SHADOWS[index1];\r\n\t\t\tvar P2 = SHADOWS[index2];\r\n\t\t\tvisibleLength = (P2[0]*P1[1] - P1[0]*P2[1]) / (P1[1] * P2[1]);\r\n\t\t\tif (blocks) { SHADOWS.splice(index1, remove); }\r\n\t\t} else { /* both edges outside existing shadows */\r\n\t\t\tif (blocks) { SHADOWS.splice(index1, remove, A1, A2); }\r\n\t\t\treturn 1; /* whole arc visible! */\r\n\t\t}\r\n\t}\r\n\r\n\tvar arcLength = (A2[0]*A1[1] - A1[0]*A2[1]) / (A1[1] * A2[1]);\r\n\r\n\treturn visibleLength/arcLength;\r\n};\r\n/**\r\n * @class Recursive shadowcasting algorithm\r\n * Currently only supports 4/8 topologies, not hexagonal.\r\n * Based on Peter Harkins' implementation of Björn Bergström's algorithm described here: http://www.roguebasin.com/index.php?title=FOV_using_recursive_shadowcasting\r\n * @augments ROT.FOV\r\n */\r\nROT.FOV.RecursiveShadowcasting = function(lightPassesCallback, options) {\r\n\tROT.FOV.call(this, lightPassesCallback, options);\r\n};\r\nROT.FOV.RecursiveShadowcasting.extend(ROT.FOV);\r\n\r\n/** Octants used for translating recursive shadowcasting offsets */\r\nROT.FOV.RecursiveShadowcasting.OCTANTS = [\r\n\t[-1,  0,  0,  1],\r\n\t[ 0, -1,  1,  0],\r\n\t[ 0, -1, -1,  0],\r\n\t[-1,  0,  0, -1],\r\n\t[ 1,  0,  0, -1],\r\n\t[ 0,  1, -1,  0],\r\n\t[ 0,  1,  1,  0],\r\n\t[ 1,  0,  0,  1]\r\n];\r\n\r\n/**\r\n * Compute visibility for a 360-degree circle\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} R Maximum visibility radius\r\n * @param {function} callback\r\n */\r\nROT.FOV.RecursiveShadowcasting.prototype.compute = function(x, y, R, callback) {\r\n\t//You can always see your own tile\r\n\tcallback(x, y, 0, 1);\r\n\tfor(var i = 0; i < ROT.FOV.RecursiveShadowcasting.OCTANTS.length; i++) {\r\n\t\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[i], R, callback);\r\n\t}\r\n};\r\n\r\n/**\r\n * Compute visibility for a 180-degree arc\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} R Maximum visibility radius\r\n * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);\r\n * @param {function} callback\r\n */\r\nROT.FOV.RecursiveShadowcasting.prototype.compute180 = function(x, y, R, dir, callback) {\r\n\t//You can always see your own tile\r\n\tcallback(x, y, 0, 1);\r\n\tvar previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 180 degrees\r\n\tvar nextPreviousOctant = (dir - 2 + 8) % 8; //Need to retrieve the previous two octants to render a full 180 degrees\r\n\tvar nextOctant = (dir+ 1 + 8) % 8; //Need to grab to next octant to render a full 180 degrees\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[nextPreviousOctant], R, callback);\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[previousOctant], R, callback);\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[dir], R, callback);\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[nextOctant], R, callback);\r\n};\r\n\r\n/**\r\n * Compute visibility for a 90-degree arc\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} R Maximum visibility radius\r\n * @param {int} dir Direction to look in (expressed in a ROT.DIRS value);\r\n * @param {function} callback\r\n */\r\nROT.FOV.RecursiveShadowcasting.prototype.compute90 = function(x, y, R, dir, callback) {\r\n\t//You can always see your own tile\r\n\tcallback(x, y, 0, 1);\r\n\tvar previousOctant = (dir - 1 + 8) % 8; //Need to retrieve the previous octant to render a full 90 degrees\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[dir], R, callback);\r\n\tthis._renderOctant(x, y, ROT.FOV.RecursiveShadowcasting.OCTANTS[previousOctant], R, callback);\r\n};\r\n\r\n/**\r\n * Render one octant (45-degree arc) of the viewshed\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {int} octant Octant to be rendered\r\n * @param {int} R Maximum visibility radius\r\n * @param {function} callback\r\n */\r\nROT.FOV.RecursiveShadowcasting.prototype._renderOctant = function(x, y, octant, R, callback) {\r\n\t//Radius incremented by 1 to provide same coverage area as other shadowcasting radiuses\r\n\tthis._castVisibility(x, y, 1, 1.0, 0.0, R + 1, octant[0], octant[1], octant[2], octant[3], callback);\r\n};\r\n\r\n/**\r\n * Actually calculates the visibility\r\n * @param {int} startX The starting X coordinate\r\n * @param {int} startY The starting Y coordinate\r\n * @param {int} row The row to render\r\n * @param {float} visSlopeStart The slope to start at\r\n * @param {float} visSlopeEnd The slope to end at\r\n * @param {int} radius The radius to reach out to\r\n * @param {int} xx \r\n * @param {int} xy \r\n * @param {int} yx \r\n * @param {int} yy \r\n * @param {function} callback The callback to use when we hit a block that is visible\r\n */\r\nROT.FOV.RecursiveShadowcasting.prototype._castVisibility = function(startX, startY, row, visSlopeStart, visSlopeEnd, radius, xx, xy, yx, yy, callback) {\r\n\tif(visSlopeStart < visSlopeEnd) { return; }\r\n\tfor(var i = row; i <= radius; i++) {\r\n\t\tvar dx = -i - 1;\r\n\t\tvar dy = -i;\r\n\t\tvar blocked = false;\r\n\t\tvar newStart = 0;\r\n\r\n\t\t//'Row' could be column, names here assume octant 0 and would be flipped for half the octants\r\n\t\twhile(dx <= 0) {\r\n\t\t\tdx += 1;\r\n\r\n\t\t\t//Translate from relative coordinates to map coordinates\r\n\t\t\tvar mapX = startX + dx * xx + dy * xy;\r\n\t\t\tvar mapY = startY + dx * yx + dy * yy;\r\n\r\n\t\t\t//Range of the row\r\n\t\t\tvar slopeStart = (dx - 0.5) / (dy + 0.5);\r\n\t\t\tvar slopeEnd = (dx + 0.5) / (dy - 0.5);\r\n\t\t\r\n\t\t\t//Ignore if not yet at left edge of Octant\r\n\t\t\tif(slopeEnd > visSlopeStart) { continue; }\r\n\t\t\t\r\n\t\t\t//Done if past right edge\r\n\t\t\tif(slopeStart < visSlopeEnd) { break; }\r\n\t\t\t\t\r\n\t\t\t//If it's in range, it's visible\r\n\t\t\tif((dx * dx + dy * dy) < (radius * radius)) {\r\n\t\t\t\tcallback(mapX, mapY, i, 1);\r\n\t\t\t}\r\n\t\r\n\t\t\tif(!blocked) {\r\n\t\t\t\t//If tile is a blocking tile, cast around it\r\n\t\t\t\tif(!this._lightPasses(mapX, mapY) && i < radius) {\r\n\t\t\t\t\tblocked = true;\r\n\t\t\t\t\tthis._castVisibility(startX, startY, i + 1, visSlopeStart, slopeStart, radius, xx, xy, yx, yy, callback);\r\n\t\t\t\t\tnewStart = slopeEnd;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//Keep narrowing if scanning across a block\r\n\t\t\t\tif(!this._lightPasses(mapX, mapY)) {\r\n\t\t\t\t\tnewStart = slopeEnd;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t//Block has ended\r\n\t\t\t\tblocked = false;\r\n\t\t\t\tvisSlopeStart = newStart;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(blocked) { break; }\r\n\t}\r\n};\r\n/**\r\n * @namespace Color operations\r\n */\r\nROT.Color = {\r\n\tfromString: function(str) {\r\n\t\tvar cached, r;\r\n\t\tif (str in this._cache) {\r\n\t\t\tcached = this._cache[str];\r\n\t\t} else {\r\n\t\t\tif (str.charAt(0) == \"#\") { /* hex rgb */\r\n\r\n\t\t\t\tvar values = str.match(/[0-9a-f]/gi).map(function(x) { return parseInt(x, 16); });\r\n\t\t\t\tif (values.length == 3) {\r\n\t\t\t\t\tcached = values.map(function(x) { return x*17; });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var i=0;i<3;i++) {\r\n\t\t\t\t\t\tvalues[i+1] += 16*values[i];\r\n\t\t\t\t\t\tvalues.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcached = values;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ((r = str.match(/rgb\\(([0-9, ]+)\\)/i))) { /* decimal rgb */\r\n\t\t\t\tcached = r[1].split(/\\s*,\\s*/).map(function(x) { return parseInt(x); });\r\n\t\t\t} else { /* html name */\r\n\t\t\t\tcached = [0, 0, 0];\r\n\t\t\t}\r\n\r\n\t\t\tthis._cache[str] = cached;\r\n\t\t}\r\n\r\n\t\treturn cached.slice();\r\n\t},\r\n\r\n\t/**\r\n\t * Add two or more colors\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @returns {number[]}\r\n\t */\r\n\tadd: function(color1, color2) {\r\n\t\tvar result = color1.slice();\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tfor (var j=1;j<arguments.length;j++) {\r\n\t\t\t\tresult[i] += arguments[j][i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Add two or more colors, MODIFIES FIRST ARGUMENT\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @returns {number[]}\r\n\t */\r\n\tadd_: function(color1, color2) {\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tfor (var j=1;j<arguments.length;j++) {\r\n\t\t\t\tcolor1[i] += arguments[j][i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn color1;\r\n\t},\r\n\r\n\t/**\r\n\t * Multiply (mix) two or more colors\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @returns {number[]}\r\n\t */\r\n\tmultiply: function(color1, color2) {\r\n\t\tvar result = color1.slice();\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tfor (var j=1;j<arguments.length;j++) {\r\n\t\t\t\tresult[i] *= arguments[j][i] / 255;\r\n\t\t\t}\r\n\t\t\tresult[i] = Math.round(result[i]);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Multiply (mix) two or more colors, MODIFIES FIRST ARGUMENT\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @returns {number[]}\r\n\t */\r\n\tmultiply_: function(color1, color2) {\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tfor (var j=1;j<arguments.length;j++) {\r\n\t\t\t\tcolor1[i] *= arguments[j][i] / 255;\r\n\t\t\t}\r\n\t\t\tcolor1[i] = Math.round(color1[i]);\r\n\t\t}\r\n\t\treturn color1;\r\n\t},\r\n\r\n\t/**\r\n\t * Interpolate (blend) two colors with a given factor\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @param {float} [factor=0.5] 0..1\r\n\t * @returns {number[]}\r\n\t */\r\n\tinterpolate: function(color1, color2, factor) {\r\n\t\tif (arguments.length < 3) { factor = 0.5; }\r\n\t\tvar result = color1.slice();\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tresult[i] = Math.round(result[i] + factor*(color2[i]-color1[i]));\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Interpolate (blend) two colors with a given factor in HSL mode\r\n\t * @param {number[]} color1\r\n\t * @param {number[]} color2\r\n\t * @param {float} [factor=0.5] 0..1\r\n\t * @returns {number[]}\r\n\t */\r\n\tinterpolateHSL: function(color1, color2, factor) {\r\n\t\tif (arguments.length < 3) { factor = 0.5; }\r\n\t\tvar hsl1 = this.rgb2hsl(color1);\r\n\t\tvar hsl2 = this.rgb2hsl(color2);\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\thsl1[i] += factor*(hsl2[i]-hsl1[i]);\r\n\t\t}\r\n\t\treturn this.hsl2rgb(hsl1);\r\n\t},\r\n\r\n\t/**\r\n\t * Create a new random color based on this one\r\n\t * @param {number[]} color\r\n\t * @param {number[]} diff Set of standard deviations\r\n\t * @returns {number[]}\r\n\t */\r\n\trandomize: function(color, diff) {\r\n\t\tif (!(diff instanceof Array)) { diff = Math.round(ROT.RNG.getNormal(0, diff)); }\r\n\t\tvar result = color.slice();\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tresult[i] += (diff instanceof Array ? Math.round(ROT.RNG.getNormal(0, diff[i])) : diff);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\t/**\r\n\t * Converts an RGB color value to HSL. Expects 0..255 inputs, produces 0..1 outputs.\r\n\t * @param {number[]} color\r\n\t * @returns {number[]}\r\n\t */\r\n\trgb2hsl: function(color) {\r\n\t\tvar r = color[0]/255;\r\n\t\tvar g = color[1]/255;\r\n\t\tvar b = color[2]/255;\r\n\r\n\t\tvar max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n\t\tvar h, s, l = (max + min) / 2;\r\n\r\n\t\tif (max == min) {\r\n\t\t\th = s = 0; // achromatic\r\n\t\t} else {\r\n\t\t\tvar d = max - min;\r\n\t\t\ts = (l > 0.5 ? d / (2 - max - min) : d / (max + min));\r\n\t\t\tswitch(max) {\r\n\t\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n\t\t\t\tcase g: h = (b - r) / d + 2; break;\r\n\t\t\t\tcase b: h = (r - g) / d + 4; break;\r\n\t\t\t}\r\n\t\t\th /= 6;\r\n\t\t}\r\n\r\n\t\treturn [h, s, l];\r\n\t},\r\n\r\n\t/**\r\n\t * Converts an HSL color value to RGB. Expects 0..1 inputs, produces 0..255 outputs.\r\n\t * @param {number[]} color\r\n\t * @returns {number[]}\r\n\t */\r\n\thsl2rgb: function(color) {\r\n\t\tvar l = color[2];\r\n\r\n\t\tif (color[1] == 0) {\r\n\t\t\tl = Math.round(l*255);\r\n\t\t\treturn [l, l, l];\r\n\t\t} else {\r\n\t\t\tvar hue2rgb = function(p, q, t) {\r\n\t\t\t\tif (t < 0) t += 1;\r\n\t\t\t\tif (t > 1) t -= 1;\r\n\t\t\t\tif (t < 1/6) return p + (q - p) * 6 * t;\r\n\t\t\t\tif (t < 1/2) return q;\r\n\t\t\t\tif (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\r\n\t\t\tvar s = color[1];\r\n\t\t\tvar q = (l < 0.5 ? l * (1 + s) : l + s - l * s);\r\n\t\t\tvar p = 2 * l - q;\r\n\t\t\tvar r = hue2rgb(p, q, color[0] + 1/3);\r\n\t\t\tvar g = hue2rgb(p, q, color[0]);\r\n\t\t\tvar b = hue2rgb(p, q, color[0] - 1/3);\r\n\t\t\treturn [Math.round(r*255), Math.round(g*255), Math.round(b*255)];\r\n\t\t}\r\n\t},\r\n\r\n\ttoRGB: function(color) {\r\n\t\treturn \"rgb(\" + this._clamp(color[0]) + \",\" + this._clamp(color[1]) + \",\" + this._clamp(color[2]) + \")\";\r\n\t},\r\n\r\n\ttoHex: function(color) {\r\n\t\tvar parts = [];\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tparts.push(this._clamp(color[i]).toString(16).lpad(\"0\", 2));\r\n\t\t}\r\n\t\treturn \"#\" + parts.join(\"\");\r\n\t},\r\n\r\n\t_clamp: function(num) {\r\n\t\tif (num < 0) {\r\n\t\t\treturn 0;\r\n\t\t} else if (num > 255) {\r\n\t\t\treturn 255;\r\n\t\t} else {\r\n\t\t\treturn num;\r\n\t\t}\r\n\t},\r\n\r\n\t_cache: {\r\n\t\t\"black\": [0,0,0],\r\n\t\t\"navy\": [0,0,128],\r\n\t\t\"darkblue\": [0,0,139],\r\n\t\t\"mediumblue\": [0,0,205],\r\n\t\t\"blue\": [0,0,255],\r\n\t\t\"darkgreen\": [0,100,0],\r\n\t\t\"green\": [0,128,0],\r\n\t\t\"teal\": [0,128,128],\r\n\t\t\"darkcyan\": [0,139,139],\r\n\t\t\"deepskyblue\": [0,191,255],\r\n\t\t\"darkturquoise\": [0,206,209],\r\n\t\t\"mediumspringgreen\": [0,250,154],\r\n\t\t\"lime\": [0,255,0],\r\n\t\t\"springgreen\": [0,255,127],\r\n\t\t\"aqua\": [0,255,255],\r\n\t\t\"cyan\": [0,255,255],\r\n\t\t\"midnightblue\": [25,25,112],\r\n\t\t\"dodgerblue\": [30,144,255],\r\n\t\t\"forestgreen\": [34,139,34],\r\n\t\t\"seagreen\": [46,139,87],\r\n\t\t\"darkslategray\": [47,79,79],\r\n\t\t\"darkslategrey\": [47,79,79],\r\n\t\t\"limegreen\": [50,205,50],\r\n\t\t\"mediumseagreen\": [60,179,113],\r\n\t\t\"turquoise\": [64,224,208],\r\n\t\t\"royalblue\": [65,105,225],\r\n\t\t\"steelblue\": [70,130,180],\r\n\t\t\"darkslateblue\": [72,61,139],\r\n\t\t\"mediumturquoise\": [72,209,204],\r\n\t\t\"indigo\": [75,0,130],\r\n\t\t\"darkolivegreen\": [85,107,47],\r\n\t\t\"cadetblue\": [95,158,160],\r\n\t\t\"cornflowerblue\": [100,149,237],\r\n\t\t\"mediumaquamarine\": [102,205,170],\r\n\t\t\"dimgray\": [105,105,105],\r\n\t\t\"dimgrey\": [105,105,105],\r\n\t\t\"slateblue\": [106,90,205],\r\n\t\t\"olivedrab\": [107,142,35],\r\n\t\t\"slategray\": [112,128,144],\r\n\t\t\"slategrey\": [112,128,144],\r\n\t\t\"lightslategray\": [119,136,153],\r\n\t\t\"lightslategrey\": [119,136,153],\r\n\t\t\"mediumslateblue\": [123,104,238],\r\n\t\t\"lawngreen\": [124,252,0],\r\n\t\t\"chartreuse\": [127,255,0],\r\n\t\t\"aquamarine\": [127,255,212],\r\n\t\t\"maroon\": [128,0,0],\r\n\t\t\"purple\": [128,0,128],\r\n\t\t\"olive\": [128,128,0],\r\n\t\t\"gray\": [128,128,128],\r\n\t\t\"grey\": [128,128,128],\r\n\t\t\"skyblue\": [135,206,235],\r\n\t\t\"lightskyblue\": [135,206,250],\r\n\t\t\"blueviolet\": [138,43,226],\r\n\t\t\"darkred\": [139,0,0],\r\n\t\t\"darkmagenta\": [139,0,139],\r\n\t\t\"saddlebrown\": [139,69,19],\r\n\t\t\"darkseagreen\": [143,188,143],\r\n\t\t\"lightgreen\": [144,238,144],\r\n\t\t\"mediumpurple\": [147,112,216],\r\n\t\t\"darkviolet\": [148,0,211],\r\n\t\t\"palegreen\": [152,251,152],\r\n\t\t\"darkorchid\": [153,50,204],\r\n\t\t\"yellowgreen\": [154,205,50],\r\n\t\t\"sienna\": [160,82,45],\r\n\t\t\"brown\": [165,42,42],\r\n\t\t\"darkgray\": [169,169,169],\r\n\t\t\"darkgrey\": [169,169,169],\r\n\t\t\"lightblue\": [173,216,230],\r\n\t\t\"greenyellow\": [173,255,47],\r\n\t\t\"paleturquoise\": [175,238,238],\r\n\t\t\"lightsteelblue\": [176,196,222],\r\n\t\t\"powderblue\": [176,224,230],\r\n\t\t\"firebrick\": [178,34,34],\r\n\t\t\"darkgoldenrod\": [184,134,11],\r\n\t\t\"mediumorchid\": [186,85,211],\r\n\t\t\"rosybrown\": [188,143,143],\r\n\t\t\"darkkhaki\": [189,183,107],\r\n\t\t\"silver\": [192,192,192],\r\n\t\t\"mediumvioletred\": [199,21,133],\r\n\t\t\"indianred\": [205,92,92],\r\n\t\t\"peru\": [205,133,63],\r\n\t\t\"chocolate\": [210,105,30],\r\n\t\t\"tan\": [210,180,140],\r\n\t\t\"lightgray\": [211,211,211],\r\n\t\t\"lightgrey\": [211,211,211],\r\n\t\t\"palevioletred\": [216,112,147],\r\n\t\t\"thistle\": [216,191,216],\r\n\t\t\"orchid\": [218,112,214],\r\n\t\t\"goldenrod\": [218,165,32],\r\n\t\t\"crimson\": [220,20,60],\r\n\t\t\"gainsboro\": [220,220,220],\r\n\t\t\"plum\": [221,160,221],\r\n\t\t\"burlywood\": [222,184,135],\r\n\t\t\"lightcyan\": [224,255,255],\r\n\t\t\"lavender\": [230,230,250],\r\n\t\t\"darksalmon\": [233,150,122],\r\n\t\t\"violet\": [238,130,238],\r\n\t\t\"palegoldenrod\": [238,232,170],\r\n\t\t\"lightcoral\": [240,128,128],\r\n\t\t\"khaki\": [240,230,140],\r\n\t\t\"aliceblue\": [240,248,255],\r\n\t\t\"honeydew\": [240,255,240],\r\n\t\t\"azure\": [240,255,255],\r\n\t\t\"sandybrown\": [244,164,96],\r\n\t\t\"wheat\": [245,222,179],\r\n\t\t\"beige\": [245,245,220],\r\n\t\t\"whitesmoke\": [245,245,245],\r\n\t\t\"mintcream\": [245,255,250],\r\n\t\t\"ghostwhite\": [248,248,255],\r\n\t\t\"salmon\": [250,128,114],\r\n\t\t\"antiquewhite\": [250,235,215],\r\n\t\t\"linen\": [250,240,230],\r\n\t\t\"lightgoldenrodyellow\": [250,250,210],\r\n\t\t\"oldlace\": [253,245,230],\r\n\t\t\"red\": [255,0,0],\r\n\t\t\"fuchsia\": [255,0,255],\r\n\t\t\"magenta\": [255,0,255],\r\n\t\t\"deeppink\": [255,20,147],\r\n\t\t\"orangered\": [255,69,0],\r\n\t\t\"tomato\": [255,99,71],\r\n\t\t\"hotpink\": [255,105,180],\r\n\t\t\"coral\": [255,127,80],\r\n\t\t\"darkorange\": [255,140,0],\r\n\t\t\"lightsalmon\": [255,160,122],\r\n\t\t\"orange\": [255,165,0],\r\n\t\t\"lightpink\": [255,182,193],\r\n\t\t\"pink\": [255,192,203],\r\n\t\t\"gold\": [255,215,0],\r\n\t\t\"peachpuff\": [255,218,185],\r\n\t\t\"navajowhite\": [255,222,173],\r\n\t\t\"moccasin\": [255,228,181],\r\n\t\t\"bisque\": [255,228,196],\r\n\t\t\"mistyrose\": [255,228,225],\r\n\t\t\"blanchedalmond\": [255,235,205],\r\n\t\t\"papayawhip\": [255,239,213],\r\n\t\t\"lavenderblush\": [255,240,245],\r\n\t\t\"seashell\": [255,245,238],\r\n\t\t\"cornsilk\": [255,248,220],\r\n\t\t\"lemonchiffon\": [255,250,205],\r\n\t\t\"floralwhite\": [255,250,240],\r\n\t\t\"snow\": [255,250,250],\r\n\t\t\"yellow\": [255,255,0],\r\n\t\t\"lightyellow\": [255,255,224],\r\n\t\t\"ivory\": [255,255,240],\r\n\t\t\"white\": [255,255,255]\r\n\t}\r\n};\r\n/**\r\n * @class Lighting computation, based on a traditional FOV for multiple light sources and multiple passes.\r\n * @param {function} reflectivityCallback Callback to retrieve cell reflectivity (0..1)\r\n * @param {object} [options]\r\n * @param {int} [options.passes=1] Number of passes. 1 equals to simple FOV of all light sources, >1 means a *highly simplified* radiosity-like algorithm.\r\n * @param {int} [options.emissionThreshold=100] Cells with emissivity > threshold will be treated as light source in the next pass.\r\n * @param {int} [options.range=10] Max light range\r\n */\r\nROT.Lighting = function(reflectivityCallback, options) {\r\n\tthis._reflectivityCallback = reflectivityCallback;\r\n\tthis._options = {\r\n\t\tpasses: 1,\r\n\t\temissionThreshold: 100,\r\n\t\trange: 10\r\n\t};\r\n\tthis._fov = null;\r\n\r\n\tthis._lights = {};\r\n\tthis._reflectivityCache = {};\r\n\tthis._fovCache = {};\r\n\r\n\tthis.setOptions(options);\r\n};\r\n\r\n/**\r\n * Adjust options at runtime\r\n * @see ROT.Lighting\r\n * @param {object} [options]\r\n */\r\nROT.Lighting.prototype.setOptions = function(options) {\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\tif (options && options.range) { this.reset(); }\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Set the used Field-Of-View algo\r\n * @param {ROT.FOV} fov\r\n */\r\nROT.Lighting.prototype.setFOV = function(fov) {\r\n\tthis._fov = fov;\r\n\tthis._fovCache = {};\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Set (or remove) a light source\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {null || string || number[3]} color\r\n */\r\nROT.Lighting.prototype.setLight = function(x, y, color) {\r\n  var key = x + \",\" + y;\r\n\r\n  if (color) {\r\n    this._lights[key] = (typeof(color) == \"string\" ? ROT.Color.fromString(color) : color);\r\n  } else {\r\n    delete this._lights[key];\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove all light sources\r\n */\r\nROT.Lighting.prototype.clearLights = function() {\r\n    this._lights = {};\r\n};\r\n\r\n/**\r\n * Reset the pre-computed topology values. Call whenever the underlying map changes its light-passability.\r\n */\r\nROT.Lighting.prototype.reset = function() {\r\n\tthis._reflectivityCache = {};\r\n\tthis._fovCache = {};\r\n\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Compute the lighting\r\n * @param {function} lightingCallback Will be called with (x, y, color) for every lit cell\r\n */\r\nROT.Lighting.prototype.compute = function(lightingCallback) {\r\n\tvar doneCells = {};\r\n\tvar emittingCells = {};\r\n\tvar litCells = {};\r\n\r\n\tfor (var key in this._lights) { /* prepare emitters for first pass */\r\n\t\tvar light = this._lights[key];\r\n\t\temittingCells[key] = [0, 0, 0];\r\n\t\tROT.Color.add_(emittingCells[key], light);\r\n\t}\r\n\r\n\tfor (var i=0;i<this._options.passes;i++) { /* main loop */\r\n\t\tthis._emitLight(emittingCells, litCells, doneCells);\r\n\t\tif (i+1 == this._options.passes) { continue; } /* not for the last pass */\r\n\t\temittingCells = this._computeEmitters(litCells, doneCells);\r\n\t}\r\n\r\n\tfor (var litKey in litCells) { /* let the user know what and how is lit */\r\n\t\tvar parts = litKey.split(\",\");\r\n\t\tvar x = parseInt(parts[0]);\r\n\t\tvar y = parseInt(parts[1]);\r\n\t\tlightingCallback(x, y, litCells[litKey]);\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Compute one iteration from all emitting cells\r\n * @param {object} emittingCells These emit light\r\n * @param {object} litCells Add projected light to these\r\n * @param {object} doneCells These already emitted, forbid them from further calculations\r\n */\r\nROT.Lighting.prototype._emitLight = function(emittingCells, litCells, doneCells) {\r\n\tfor (var key in emittingCells) {\r\n\t\tvar parts = key.split(\",\");\r\n\t\tvar x = parseInt(parts[0]);\r\n\t\tvar y = parseInt(parts[1]);\r\n\t\tthis._emitLightFromCell(x, y, emittingCells[key], litCells);\r\n\t\tdoneCells[key] = 1;\r\n\t}\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Prepare a list of emitters for next pass\r\n * @param {object} litCells\r\n * @param {object} doneCells\r\n * @returns {object}\r\n */\r\nROT.Lighting.prototype._computeEmitters = function(litCells, doneCells) {\r\n\tvar result = {};\r\n\r\n\tfor (var key in litCells) {\r\n\t\tif (key in doneCells) { continue; } /* already emitted */\r\n\r\n\t\tvar color = litCells[key];\r\n\r\n\t\tif (key in this._reflectivityCache) {\r\n\t\t\tvar reflectivity = this._reflectivityCache[key];\r\n\t\t} else {\r\n\t\t\tvar parts = key.split(\",\");\r\n\t\t\tvar x = parseInt(parts[0]);\r\n\t\t\tvar y = parseInt(parts[1]);\r\n\t\t\tvar reflectivity = this._reflectivityCallback(x, y);\r\n\t\t\tthis._reflectivityCache[key] = reflectivity;\r\n\t\t}\r\n\r\n\t\tif (reflectivity == 0) { continue; } /* will not reflect at all */\r\n\r\n\t\t/* compute emission color */\r\n\t\tvar emission = [];\r\n\t\tvar intensity = 0;\r\n\t\tfor (var i=0;i<3;i++) {\r\n\t\t\tvar part = Math.round(color[i]*reflectivity);\r\n\t\t\temission[i] = part;\r\n\t\t\tintensity += part;\r\n\t\t}\r\n\t\tif (intensity > this._options.emissionThreshold) { result[key] = emission; }\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * Compute one iteration from one cell\r\n * @param {int} x\r\n * @param {int} y\r\n * @param {number[]} color\r\n * @param {object} litCells Cell data to by updated\r\n */\r\nROT.Lighting.prototype._emitLightFromCell = function(x, y, color, litCells) {\r\n\tvar key = x+\",\"+y;\r\n\tif (key in this._fovCache) {\r\n\t\tvar fov = this._fovCache[key];\r\n\t} else {\r\n\t\tvar fov = this._updateFOV(x, y);\r\n\t}\r\n\r\n\tfor (var fovKey in fov) {\r\n\t\tvar formFactor = fov[fovKey];\r\n\r\n\t\tif (fovKey in litCells) { /* already lit */\r\n\t\t\tvar result = litCells[fovKey];\r\n\t\t} else { /* newly lit */\r\n\t\t\tvar result = [0, 0, 0];\r\n\t\t\tlitCells[fovKey] = result;\r\n\t\t}\r\n\r\n\t\tfor (var i=0;i<3;i++) { result[i] += Math.round(color[i]*formFactor); } /* add light color */\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\n/**\r\n * Compute FOV (\"form factor\") for a potential light source at [x,y]\r\n * @param {int} x\r\n * @param {int} y\r\n * @returns {object}\r\n */\r\nROT.Lighting.prototype._updateFOV = function(x, y) {\r\n\tvar key1 = x+\",\"+y;\r\n\tvar cache = {};\r\n\tthis._fovCache[key1] = cache;\r\n\tvar range = this._options.range;\r\n\tvar cb = function(x, y, r, vis) {\r\n\t\tvar key2 = x+\",\"+y;\r\n\t\tvar formFactor = vis * (1-r/range);\r\n\t\tif (formFactor == 0) { return; }\r\n\t\tcache[key2] = formFactor;\r\n\t};\r\n\tthis._fov.compute(x, y, range, cb.bind(this));\r\n\r\n\treturn cache;\r\n};\r\n/**\r\n * @class Abstract pathfinder\r\n * @param {int} toX Target X coord\r\n * @param {int} toY Target Y coord\r\n * @param {function} passableCallback Callback to determine map passability\r\n * @param {object} [options]\r\n * @param {int} [options.topology=8]\r\n */\r\nROT.Path = function(toX, toY, passableCallback, options) {\r\n\tthis._toX = toX;\r\n\tthis._toY = toY;\r\n\tthis._fromX = null;\r\n\tthis._fromY = null;\r\n\tthis._passableCallback = passableCallback;\r\n\tthis._options = {\r\n\t\ttopology: 8\r\n\t};\r\n\tfor (var p in options) { this._options[p] = options[p]; }\r\n\r\n\tthis._dirs = ROT.DIRS[this._options.topology];\r\n\tif (this._options.topology == 8) { /* reorder dirs for more aesthetic result (vertical/horizontal first) */\r\n\t\tthis._dirs = [\r\n\t\t\tthis._dirs[0],\r\n\t\t\tthis._dirs[2],\r\n\t\t\tthis._dirs[4],\r\n\t\t\tthis._dirs[6],\r\n\t\t\tthis._dirs[1],\r\n\t\t\tthis._dirs[3],\r\n\t\t\tthis._dirs[5],\r\n\t\t\tthis._dirs[7]\r\n\t\t]\r\n\t}\r\n};\r\n\r\n/**\r\n * Compute a path from a given point\r\n * @param {int} fromX\r\n * @param {int} fromY\r\n * @param {function} callback Will be called for every path item with arguments \"x\" and \"y\"\r\n */\r\nROT.Path.prototype.compute = function(fromX, fromY, callback) {\r\n};\r\n\r\nROT.Path.prototype._getNeighbors = function(cx, cy) {\r\n\tvar result = [];\r\n\tfor (var i=0;i<this._dirs.length;i++) {\r\n\t\tvar dir = this._dirs[i];\r\n\t\tvar x = cx + dir[0];\r\n\t\tvar y = cy + dir[1];\r\n\t\t\r\n\t\tif (!this._passableCallback(x, y)) { continue; }\r\n\t\tresult.push([x, y]);\r\n\t}\r\n\t\r\n\treturn result;\r\n};\r\n/**\r\n * @class Simplified Dijkstra's algorithm: all edges have a value of 1\r\n * @augments ROT.Path\r\n * @see ROT.Path\r\n */\r\nROT.Path.Dijkstra = function(toX, toY, passableCallback, options) {\r\n\tROT.Path.call(this, toX, toY, passableCallback, options);\r\n\r\n\tthis._computed = {};\r\n\tthis._todo = [];\r\n\tthis._add(toX, toY, null);\r\n};\r\nROT.Path.Dijkstra.extend(ROT.Path);\r\n\r\n/**\r\n * Compute a path from a given point\r\n * @see ROT.Path#compute\r\n */\r\nROT.Path.Dijkstra.prototype.compute = function(fromX, fromY, callback) {\r\n\tvar key = fromX+\",\"+fromY;\r\n\tif (!(key in this._computed)) { this._compute(fromX, fromY); }\r\n\tif (!(key in this._computed)) { return; }\r\n\t\r\n\tvar item = this._computed[key];\r\n\twhile (item) {\r\n\t\tcallback(item.x, item.y);\r\n\t\titem = item.prev;\r\n\t}\r\n};\r\n\r\n/**\r\n * Compute a non-cached value\r\n */\r\nROT.Path.Dijkstra.prototype._compute = function(fromX, fromY) {\r\n\twhile (this._todo.length) {\r\n\t\tvar item = this._todo.shift();\r\n\t\tif (item.x == fromX && item.y == fromY) { return; }\r\n\t\t\r\n\t\tvar neighbors = this._getNeighbors(item.x, item.y);\r\n\t\t\r\n\t\tfor (var i=0;i<neighbors.length;i++) {\r\n\t\t\tvar neighbor = neighbors[i];\r\n\t\t\tvar x = neighbor[0];\r\n\t\t\tvar y = neighbor[1];\r\n\t\t\tvar id = x+\",\"+y;\r\n\t\t\tif (id in this._computed) { continue; } /* already done */\t\r\n\t\t\tthis._add(x, y, item); \r\n\t\t}\r\n\t}\r\n};\r\n\r\nROT.Path.Dijkstra.prototype._add = function(x, y, prev) {\r\n\tvar obj = {\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tprev: prev\r\n\t};\r\n\tthis._computed[x+\",\"+y] = obj;\r\n\tthis._todo.push(obj);\r\n};\r\n/**\r\n * @class Simplified A* algorithm: all edges have a value of 1\r\n * @augments ROT.Path\r\n * @see ROT.Path\r\n */\r\nROT.Path.AStar = function(toX, toY, passableCallback, options) {\r\n\tROT.Path.call(this, toX, toY, passableCallback, options);\r\n\r\n\tthis._todo = [];\r\n\tthis._done = {};\r\n\tthis._fromX = null;\r\n\tthis._fromY = null;\r\n};\r\nROT.Path.AStar.extend(ROT.Path);\r\n\r\n/**\r\n * Compute a path from a given point\r\n * @see ROT.Path#compute\r\n */\r\nROT.Path.AStar.prototype.compute = function(fromX, fromY, callback) {\r\n\tthis._todo = [];\r\n\tthis._done = {};\r\n\tthis._fromX = fromX;\r\n\tthis._fromY = fromY;\r\n\tthis._add(this._toX, this._toY, null);\r\n\r\n\twhile (this._todo.length) {\r\n\t\tvar item = this._todo.shift();\r\n\t\tif (item.x == fromX && item.y == fromY) { break; }\r\n\t\tvar neighbors = this._getNeighbors(item.x, item.y);\r\n\r\n\t\tfor (var i=0;i<neighbors.length;i++) {\r\n\t\t\tvar neighbor = neighbors[i];\r\n\t\t\tvar x = neighbor[0];\r\n\t\t\tvar y = neighbor[1];\r\n\t\t\tvar id = x+\",\"+y;\r\n\t\t\tif (id in this._done) { continue; }\r\n\t\t\tthis._add(x, y, item); \r\n\t\t}\r\n\t}\r\n\t\r\n\tvar item = this._done[fromX+\",\"+fromY];\r\n\tif (!item) { return; }\r\n\t\r\n\twhile (item) {\r\n\t\tcallback(item.x, item.y);\r\n\t\titem = item.prev;\r\n\t}\r\n};\r\n\r\nROT.Path.AStar.prototype._add = function(x, y, prev) {\r\n\tvar h = this._distance(x, y);\r\n\tvar obj = {\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t\tprev: prev,\r\n\t\tg: (prev ? prev.g+1 : 0),\r\n\t\th: h\r\n\t};\r\n\tthis._done[x+\",\"+y] = obj;\r\n\t\r\n\t/* insert into priority queue */\r\n\t\r\n\tvar f = obj.g + obj.h;\r\n\tfor (var i=0;i<this._todo.length;i++) {\r\n\t\tvar item = this._todo[i];\r\n\t\tvar itemF = item.g + item.h;\r\n\t\tif (f < itemF || (f == itemF && h < item.h)) {\r\n\t\t\tthis._todo.splice(i, 0, obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tthis._todo.push(obj);\r\n};\r\n\r\nROT.Path.AStar.prototype._distance = function(x, y) {\r\n\tswitch (this._options.topology) {\r\n\t\tcase 4:\r\n\t\t\treturn (Math.abs(x-this._fromX) + Math.abs(y-this._fromY));\r\n\t\tbreak;\r\n\r\n\t\tcase 6:\r\n\t\t\tvar dx = Math.abs(x - this._fromX);\r\n\t\t\tvar dy = Math.abs(y - this._fromY);\r\n\t\t\treturn dy + Math.max(0, (dx-dy)/2);\r\n\t\tbreak;\r\n\r\n\t\tcase 8: \r\n\t\t\treturn Math.max(Math.abs(x-this._fromX), Math.abs(y-this._fromY));\r\n\t\tbreak;\r\n\t}\r\n\r\n        throw new Error(\"Illegal topology\");\r\n};\r\n  return ROT;\r\n}));\r\n","(function(root,factory){if(typeof exports===\"object\"&&typeof module===\"object\")module.exports=factory();else if(typeof define===\"function\"&&define.amd)define(\"EventBus\",[],factory);else if(typeof exports===\"object\")exports[\"EventBus\"]=factory();else root[\"EventBus\"]=factory()})(this,function(){var EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(type,callback,scope){var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>3?args.splice(3,args.length-1):[];if(typeof this.listeners[type]!=\"undefined\"){this.listeners[type].push({scope:scope,callback:callback,args:args})}else{this.listeners[type]=[{scope:scope,callback:callback,args:args}]}},removeEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;var newArray=[];for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if(listener.scope==scope&&listener.callback==callback){}else{newArray.push(listener)}}this.listeners[type]=newArray}},hasEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;if(callback===undefined&&scope===undefined){return numOfCallbacks>0}for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if((scope?listener.scope==scope:true)&&listener.callback==callback){return true}}}return false},dispatch:function(type,target){var event={type:type,target:target};var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>2?args.splice(2,args.length-1):[];args=[event].concat(args);if(typeof this.listeners[type]!=\"undefined\"){var listeners=this.listeners[type].slice();var numOfCallbacks=listeners.length;for(var i=0;i<numOfCallbacks;i++){var listener=listeners[i];if(listener&&listener.callback){var concatArgs=args.concat(listener.args);listener.callback.apply(listener.scope,concatArgs)}}}},getEvents:function(){var str=\"\";for(var type in this.listeners){var numOfCallbacks=this.listeners[type].length;for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];str+=listener.scope&&listener.scope.className?listener.scope.className:\"anonymous\";str+=\" listen for '\"+type+\"'\\n\"}}return str}};var EventBus=new EventBusClass;return EventBus});","import ROT from '../vendor/rot';\r\nimport bus from '../vendor/eventbus.min';\r\n\r\nimport Game from './game';\r\n\r\nexport function passable(x, y) {\r\n  let t = Game.map.get(x, y);\r\n  if(!t) return false;\r\n  return t.type!='wall';\r\n}\r\n\r\nexport function isFloor(x, y){\r\n  let t = Game.map.get(x, y);\r\n  if(!t) return false;\r\n  return t.type=='floor';\r\n}\r\n\r\nexport function distance(x1, y1, x2, y2){\r\n\treturn Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));\r\n}\r\n\r\nexport function randInt(a, b){\r\n\treturn a + Math.floor((b-a) * ROT.RNG.getUniform());\r\n}\r\n\r\nexport function checkCollision(x, y) {\r\n  let obj = null;\r\n  Game.actors.forEach(actor => {\r\n    if(x == actor.x && y == actor.y){\r\n      obj = actor;\r\n    }\r\n  });\r\n  return obj;\r\n}\r\n\r\nexport function betweenPlayerAndExit(x, y){\r\n  let dx = Game.map.exit[0] - Game.player.x;\r\n  let dy = Game.map.exit[1] - Game.player.y;\r\n  let innerProduct = (x - Game.player.x) * dx + (y - Game.player.y) * dy;\r\n  return 0 <= innerProduct && innerProduct <= dx*dx + dy*dy;\r\n}\r\n\r\nexport function getPathToExit(){\r\n  let astar = new ROT.Path.AStar(Game.map.exit[0], Game.map.exit[1], passable, {topology: 4});\r\n  let path = [];\r\n  astar.compute(Game.player.x, Game.player.y, (x, y) => {\r\n    path.push([x, y]);\r\n  });\r\n  return path;\r\n}\r\n\r\nexport function tileEvent(type, actor, x, y) {\r\n\tswitch(type){\r\n\t\tcase 'sky':\r\n\t\t\tif(actor.hasItem('Earth Rune')){\r\n\t\t\t\tbus.dispatch('skyStep', actor, x, y);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase 'exit':\r\n\t\t\tbus.dispatch('exit', actor);\r\n\t\t\treturn false;\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nexport function canFall(actor){\r\n  let x = actor.x;\r\n  let y = actor.y;\r\n  let neighbors = [[x-1,y],[x,y-1],[x+1,y],[x,y+1]];\r\n  let sky = null;\r\n  neighbors.forEach((n)=>{\r\n    if(Game.map.get(n[0],n[1]).type == 'sky'){\r\n      sky = {x:n[0],y:n[1]};\r\n    }\r\n  });\r\n  if(!sky){\r\n    return [false, null];\r\n  }\r\n  return [true, sky];\r\n}\r\n","import bus from '../vendor/eventbus.min';\r\n\r\nimport Game from './game';\r\nimport { checkCollision, tileEvent } from './utils';\r\n\r\nexport default class Actor {\r\n\tconstructor(name, x, y, glyph, controller){\r\n\t\tthis.name = name;\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.glyph = glyph;\r\n\t\tthis.controller = controller || null;\r\n\t\tthis.inventory = [];\r\n\t\tthis.dead = false;\r\n\t\tGame.actors.push(this);\r\n\t\tGame.scheduler.add(this,true);\r\n\t}\r\n\tpickup(item){\r\n\t\tthis.inventory.push(item);\r\n\t\titem.x = -1;\r\n\t\titem.y = -1;\r\n\t}\r\n\tdrop(item){\r\n\t\tlet index = this.inventory.indexOf(item);\r\n\t\tif(index > -1){\r\n\t\t\tthis.inventory.splice(index, 1);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthrow new Error(`'${item.name}' not in ${this.name}'s inventory`)\r\n\t\t}\r\n\t}\r\n\thasItem(name){\r\n\t\tfor(let item of this.inventory){\r\n\t\t\tif(item.name == name){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tact(){\r\n\t\tif(this.controller){\r\n\t\t\tthis.controller.run(this);\r\n\t\t}\r\n\t}\r\n\tdraw(){\r\n\t\tthis.glyph.draw(this.x, this.y);\r\n\t}\r\n\tkill(){\r\n\t\tthis.dead = true;\r\n\t\tGame.map.get(this.x, this.y).draw();\r\n\t\tGame.scheduler.remove(this);\r\n\t\tGame.actors.splice(Game.actors.indexOf(this),1);\r\n\t\t//If actor is enemy, remove from enemy list\r\n\t\tlet eIndex = Game.map.enemies.indexOf(this);\r\n\t\tif(eIndex > -1){\r\n\t\t\tGame.map.enemies.splice(eIndex);\r\n\t\t}\r\n\t\tif(this == Game.player){\r\n\t\t\tGame.over(false);\r\n\t\t}\r\n\t}\r\n\tmove(x, y, pusher, nodraw){\r\n\t\t//Check that (x,y) within map boundaries\r\n\t\tif(!Game.map.inBounds(x, y)){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tlet tileType = Game.map.get(x, y).type;\r\n\t\tlet endTurn = tileEvent(tileType, this, x, y);\r\n\t\tif(endTurn){\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\tswitch(tileType){\r\n\t\t\tcase 'wall':\r\n\t\t\t\treturn 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'sky':\r\n\t\t\t\tif(pusher){\r\n\t\t\t\t\tthis.kill();\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t//Check actor collision\r\n\t\tlet other = checkCollision(x, y);\r\n\t\tif(other){\r\n\t\t\t//Push actor\r\n\t\t\tlet mv = null;\r\n\t\t\tlet canMove = (x) => mv = x;\r\n\t\t\tbus.dispatch('attack', this, other, pusher, canMove);\r\n\t\t\tif(!mv){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Check item collision\r\n\t\tfor(let item of Game.map.items){\r\n\t\t\tif(x==item.x && y==item.y){\r\n\t\t\t\tthis.pickup(item);\r\n\t\t\t\tbus.dispatch('pickup', this, item);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Capture current position\r\n\t\tlet cx = this.x;\r\n\t\tlet cy = this.y;\r\n\t\t//Set new position\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\t//Reset actor's previous tile and draw actor on new tile\r\n\t\tGame.map.get(cx, cy).draw();\r\n\t\t/*if(!nodraw){\r\n\t\t\tthis.draw();\r\n\t\t}*/\r\n\t\treturn 1;\r\n\t}\r\n}\r\n","export default class Controller {\r\n\trun(actor){}\r\n}\r\n","import ROT from '../../vendor/rot';\r\nimport bus from '../../vendor/eventbus.min';\r\n\r\nimport Game from '../game';\r\nimport Controller from '../controller';\r\n\r\nfunction lightPasses(x, y) {\r\n\treturn Game.map.get(x, y).type != 'wall';\r\n}\r\n\r\nexport default class PlayerController extends Controller {\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.actor = null;\r\n\t\tthis.fov = new ROT.FOV.RecursiveShadowcasting(lightPasses);\r\n\t\tbus.addEventListener('exit', (e)=>{\r\n\t\t\tif(e.target==this.actor){\r\n\t\t\t\tGame.nextLevel();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tdrawFOV(){\r\n\t\tthis.fov.compute(Game.player.x, Game.player.y, 10, (x, y, r, v) => {\r\n\t\t\tGame.map.get(x, y).draw();\r\n\t\t\tGame.map.items.forEach(item => {\r\n\t\t\t\tif(item.x == x && item.y == y){\r\n\t\t\t\t\titem.draw();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tGame.map.enemies.forEach(enemy => {\r\n\t\t\t\tif(enemy.x == x && enemy.y == y){\r\n\t\t\t\t\tenemy.draw();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\trun(actor){\r\n\t\tsuper.run(actor);\r\n\t\tif(!this.actor){\r\n\t\t\tthis.actor = actor;\r\n\t\t}\r\n\t\tGame.engine.lock();\r\n\t\twindow.addEventListener('keydown',this);\r\n\t}\r\n\thandleEvent(e){\r\n\t\tthis.drawFOV();\r\n\t\tlet code = e.keyCode;\r\n\t\tlet x = this.actor.x;\r\n\t\tlet y = this.actor.y;\r\n\t\tlet endTurn = 0;\r\n\t\tswitch(code){\r\n\t\t\tcase ROT.VK_UP:\r\n\t\t\t\tendTurn = this.actor.move(x,y-1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase ROT.VK_RIGHT:\r\n\t\t\t\tendTurn = this.actor.move(x+1,y);\r\n\t\t\t\tbreak;\r\n\t\t\tcase ROT.VK_DOWN:\r\n\t\t\t\tendTurn = this.actor.move(x,y+1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase ROT.VK_LEFT:\r\n\t\t\t\tendTurn = this.actor.move(x-1,y);\r\n\t\t\t\tbreak;\r\n\t\t\tcase ROT.VK_PERIOD:\r\n\t\t\t\tendTurn = true;\r\n\t\t\t\tbreak; //Wait\r\n\t\t\tdefault:\r\n\t\t\t\treturn; //Keyboard input not recognized.\r\n\t\t}\r\n\t\tthis.drawFOV();\r\n\t\tthis.actor.draw();\r\n\t\tif(endTurn){\r\n\t\t\tthis.actor = null;\r\n\t\t\twindow.removeEventListener('keydown',this);\r\n\t\t\tGame.engine.unlock();\r\n\t\t}\r\n\t}\r\n}\r\n","export default class Tile {\r\n\tconstructor(x, y, type){\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.type = type.name;\r\n\t\tthis._glyph = type.glyph;\r\n\t\tthis.connected = false;\r\n\t}\r\n\tget glyph(){ return this._glyph; }\r\n\tset glyph(glyph) { this._glyph = glyph; this.draw(); }\r\n\tdraw(){\r\n\t\tthis.glyph.draw(this.x, this.y);\r\n\t}\r\n}","import Game from './game';\r\n\r\nexport default class Glyph {\r\n\tconstructor(chr, fg, bg){\r\n\t\tthis.history = [[chr || ' ', fg || '#fff', bg || null]];\r\n\t}\r\n\t_tail(){\r\n\t\treturn this.history[this.history.length - 1];\r\n\t}\r\n\tget chr() {\r\n\t\treturn this._tail()[0];\r\n\t}\r\n\tset chr(chr) {\r\n\t\tthis.history.push([chr, this.fg, this.bg]);\r\n\t}\r\n\tget fg() {\r\n\t\treturn this._tail()[1];\r\n\t}\r\n\tset fg(fg) {\r\n\t\tthis.history.push([this.chr, fg, this.bg]);\r\n\t}\r\n\tget bg(){\r\n\t\treturn this._tail()[2];\r\n\t}\r\n\tset bg(bg) {\r\n\t\tthis.history.push([this.chr, this.fg, bg]);\r\n\t}\r\n\tback(){\r\n\t\tif (this.history.length > 1) {\r\n\t\t\treturn new Glyph(...this.history.pop());\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tcopy(){\r\n\t\treturn new Glyph(this.chr, this.fg, this.bg);\r\n\t}\r\n\tdraw(x, y){\r\n\t\tGame.display.draw(x, y, this.chr, this.fg, this.bg);\r\n\t}\r\n}\r\n","import Glyph from '../glyph';\r\n\r\nexport default {\r\n\tWALL: {\r\n\t\tname: 'wall',\r\n\t\tglyph: new Glyph('#')\r\n\t},\r\n\tFLOOR: {\r\n\t\tname: 'floor',\r\n\t\tglyph: new Glyph('.')\r\n\t},\r\n\tDOOR: {\r\n\t\tname: 'door',\r\n\t\tglyph: new Glyph('+')\r\n\t},\r\n\tSKY: {\r\n\t\tname: 'sky',\r\n\t\tglyph: new Glyph(' ',null,'skyblue')\r\n\t},\r\n\tEXIT: {\r\n\t\tname: 'exit',\r\n\t\tglyph: new Glyph('^', 'white')\r\n\t},\r\n\tBLOCK: {\r\n\t\tname: 'block',\r\n\t\tglyph: new Glyph('#','silver')\r\n\t}\r\n}\r\n","import bus from '../vendor/eventbus.min';\r\nimport Game from './game';\r\n\r\nexport default class Timer {\r\n  constructor(name, count, f) {\r\n    this.name = name;\r\n    this.count = count;\r\n    this.callbacks = [];\r\n    if(f){\r\n      this.then(f);\r\n    }\r\n    this.activated = false;\r\n  }\r\n  then(f){\r\n    if(f instanceof Timer){\r\n      this.callbacks.push(() => {\r\n        f.activate();\r\n        bus.dispatch('tickTimer', f);\r\n      });\r\n    }\r\n    else{\r\n      this.callbacks.push(f);\r\n    }\r\n  }\r\n  activate(){\r\n    if(!this.activated){\r\n      this.activated = true;\r\n      Game.scheduler.add(this, true);\r\n    }\r\n  }\r\n  act(){\r\n    if (this.count > 0) {\r\n      this.count--;\r\n      bus.dispatch('tickTimer', this);\r\n    }\r\n    else{\r\n      this.callbacks.forEach(f => f());\r\n      Game.scheduler.remove(this);\r\n    }\r\n  }\r\n}\r\n","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.PriorityQueue=t()}}(function(){return function t(e,i,r){function o(n,s){if(!i[n]){if(!e[n]){var h=\"function\"==typeof require&&require;if(!s&&h)return h(n,!0);if(a)return a(n,!0);var u=new Error(\"Cannot find module '\"+n+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var p=i[n]={exports:{}};e[n][0].call(p.exports,function(t){var i=e[n][1][t];return o(i?i:t)},p,p.exports,t,e,i,r)}return i[n].exports}for(var a=\"function\"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(t,e,i){var r,o,a,n,s,h=function(t,e){function i(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;r=t(\"./PriorityQueue/AbstractPriorityQueue\"),o=t(\"./PriorityQueue/ArrayStrategy\"),n=t(\"./PriorityQueue/BinaryHeapStrategy\"),a=t(\"./PriorityQueue/BHeapStrategy\"),s=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=n),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return h(e,t),e}(r),s.ArrayStrategy=o,s.BinaryHeapStrategy=n,s.BHeapStrategy=a,e.exports=s},{\"./PriorityQueue/AbstractPriorityQueue\":2,\"./PriorityQueue/ArrayStrategy\":3,\"./PriorityQueue/BHeapStrategy\":4,\"./PriorityQueue/BinaryHeapStrategy\":5}],2:[function(t,e,i){var r;e.exports=r=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw\"Must pass options.strategy, a strategy\";if(null==(null!=t?t.comparator:void 0))throw\"Must pass options.comparator, a comparator\";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw\"Empty queue\";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw\"Empty queue\";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,i){var r,o;o=function(t,e,i){var r,o,a;for(o=0,r=t.length;r>o;)a=o+r>>>1,i(t[a],e)>=0?o=a+1:r=a;return o},e.exports=r=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=o(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,i){var r;e.exports=r=function(){function t(t){var e,i,r,o,a,n,s,h,u;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,h=0;1<<h<this.pageSize;)h+=1;if(1<<h!==this.pageSize)throw\"pageSize must be a power of two\";for(this._shift=h,this._emptyMemoryPageTemplate=e=[],i=r=0,n=this.pageSize;n>=0?n>r:r>n;i=n>=0?++r:--r)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(s=t.initialValues,o=0,a=s.length;a>o;o++)u=s[o],this.queue(u)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var i;for(i=t>>this._shift;i>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[i][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var i,r,o,a;for(i=this.comparator;t>1&&(r=t&this._mask,t<this.pageSize||r>3?o=t&~this._mask|r>>1:2>r?(o=t-this.pageSize>>this._shift,o+=o&~(this._mask>>1),o|=this.pageSize>>1):o=t-2,a=this._read(o),!(i(a,e)<0));)this._write(o,e),this._write(t,a),t=o},t.prototype._bubbleDown=function(t,e){var i,r,o,a,n;for(n=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?i=r=t+2:t&this.pageSize>>1?(i=(t&~this._mask)>>1,i|=t&this._mask>>1,i=i+1<<this._shift,r=i+1):(i=t+(t&this._mask),r=i+1),i!==r&&r<=this.length)if(o=this._read(i),a=this._read(r),n(o,e)<0&&n(o,a)<=0)this._write(i,e),this._write(t,o),t=i;else{if(!(n(a,e)<0))break;this._write(r,e),this._write(t,a),t=r}else{if(!(i<=this.length))break;if(o=this._read(i),!(n(o,e)<0))break;this._write(i,e),this._write(t,o),t=i}},t}()},{}],5:[function(t,e,i){var r;e.exports=r=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,i;if(this.data.length>0)for(t=e=1,i=this.data.length;i>=1?i>e:e>i;t=i>=1?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,i;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)i=this.data[e],this.data[e]=this.data[t],this.data[t]=i,t=e},t.prototype._bubbleDown=function(t){var e,i,r,o,a;for(e=this.data.length-1;;){if(i=(t<<1)+1,o=i+1,r=t,e>=i&&this.comparator(this.data[i],this.data[r])<0&&(r=i),e>=o&&this.comparator(this.data[o],this.data[r])<0&&(r=o),r===t)break;a=this.data[r],this.data[r]=this.data[t],this.data[t]=a,t=r}},t}()},{}]},{},[1])(1)});","import ROT from '../vendor/rot';\r\nimport PriorityQueue from '../vendor/priority-queue.min';\r\n\r\nlet queue = new PriorityQueue({\r\n  comparator: (a,b) => Math.floor(ROT.RNG.getUniform() * 3) - 1\r\n});\r\n\r\nexport default {\r\n  empty(){\r\n    return queue.length == 0;\r\n  },\r\n  pick() {\r\n    return queue.dequeue();\r\n  },\r\n  put(tile) {\r\n    if(tile && tile.type!='sky'){\r\n      queue.queue(tile);\r\n    }\r\n  },\r\n  cycle(f){\r\n    this.put(f(this.pick()));\r\n  },\r\n  setMap(map){\r\n    queue.clear();\r\n    Array.from(map.tiles.values()).forEach(tile => this.put(tile));\r\n  }\r\n}\r\n","import ROT from '../vendor/rot';\r\nimport bus from '../vendor/eventbus.min';\r\n\r\nimport { passable, betweenPlayerAndExit, getPathToExit } from './utils';\r\n\r\nimport Game from './game';\r\nimport Tile from \"./map/tile\";\r\nimport TileTypes from './map/tiletypes';\r\nimport Timer from './timer';\r\nimport FloorPicker from './floorpicker';\r\n\r\nfunction updateConnections(map, x, y){\r\n\tif(!map.inBounds(x, y)){\r\n\t\treturn;\r\n\t}\r\n\tif(map.get(x, y).connected){\r\n\t\treturn;\r\n\t}\r\n\tif(map.get(x, y).type == \"sky\"){\r\n\t\treturn;\r\n\t}\r\n\tmap.get(x, y).connected = true;\r\n\tupdateConnections(map, x, y-1);\r\n\tupdateConnections(map, x+1, y);\r\n\tupdateConnections(map, x, y+1);\r\n\tupdateConnections(map, x-1, y);\r\n}\r\n\r\nexport default class Collapser{\r\n\tconstructor(map, s1, s2){\r\n\t\tthis.map = map;\r\n\t\tthis.stage = \"notInTheWay\";\r\n\t\tthis.timer = new Timer('Stage 1', s1, () => {\r\n\t\t\tthis.stage = \"notOnPath\";\r\n\t\t});\r\n\t\tthis.timer.then(new Timer('Stage 2', s2, ()=>{\r\n\t\t\tthis.stage = \"canBeFatal\";\r\n\t\t}));\r\n\t\tthis.timer.activate();\r\n\t\tGame.scheduler.add(this,true);\r\n\t}\r\n\tcollapseTile(x, y){\r\n\t\tthis.map.set(new Tile(x, y, TileTypes.SKY));\r\n\t}\r\n\tcollapseSection(){\r\n\t\tthis.map.tiles.forEach((tile, pos) => {\r\n\t\t\tlet [x,y] = pos.split(',');\r\n\t\t\tif(tile.type!='sky' && !this.map.get(x, y).connected){\r\n\t\t\t\tthis.collapseTile(x, y);\r\n\t\t\t\tthis.map.get(x, y).draw();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcollapseWithMethod(f){\r\n\t\tlet [x, y] = [null, null];\r\n\t\tlet done = [];\r\n\t\twhile(!FloorPicker.empty()){\r\n\t\t\tlet tile = FloorPicker.pick();\r\n\t\t\tx = tile.x;\r\n\t\t\ty = tile.y;\r\n\t\t\tlet accepted = false;\r\n\t\t\tf(x, y, () => accepted = true, () => done.push({x: x, y: y}));\r\n\t\t\tif(accepted){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!FloorPicker.empty()){\r\n\t\t\tthis.collapseTile(x, y);\r\n\t\t\tthis.map.get(x, y).draw();\r\n\t\t\tthis.map.tiles.forEach((tile,k)=>{\r\n\t\t\t\ttile.connected = false;\r\n\t\t\t});\r\n\t\t\tupdateConnections(this.map, this.map.exit[0], this.map.exit[1]);\r\n\t\t\tthis.collapseSection();\r\n\t\t}\r\n\t\tGame.actors.forEach(actor => {\r\n\t\t\tif(this.map.get(actor.x, actor.y).type == 'sky'){\r\n\t\t\t\tactor.kill();\r\n\t\t\t}\r\n\t\t});\r\n\t\tdone.forEach(p => FloorPicker.put(p));\r\n\t}\r\n\tact(){\r\n\t\tlet pick = null;\r\n\t\tlet done = [];\r\n\t\tswitch(this.stage){\r\n\t\t\tcase \"notInTheWay\":\r\n\t\t\t\tthis.collapseWithMethod((x, y, accept, reject) => {\r\n\t\t\t\t\tif(betweenPlayerAndExit(x, y)){\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(passable(x, y)){\r\n\t\t\t\t\t\tthis.collapseTile(x, y);\r\n\t\t\t\t\t\tif(getPathToExit().length > 0){\r\n\t\t\t\t\t\t\tthis.map.set(new Tile(x, y, TileTypes.FLOOR));\r\n\t\t\t\t\t\t\taccept();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.map.set(new Tile(x, y, TileTypes.FLOOR));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"notOnPath\":\r\n\t\t\t\tthis.collapseWithMethod((x, y, accept, reject) => {\r\n\t\t\t\t\tif(passable(x, y)){\r\n\t\t\t\t\t\tthis.collapseTile(x, y);\r\n\t\t\t\t\t\tif(getPathToExit().length > 0){\r\n\t\t\t\t\t\t\tthis.map.set(new Tile(x, y, TileTypes.FLOOR));\r\n\t\t\t\t\t\t\taccept();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treject();\r\n\t\t\t\t\t\t\tthis.map.set(new Tile(x, y, TileTypes.FLOOR));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"canBeFatal\":\r\n\t\t\t\tthis.collapseWithMethod((x, y, accept, reject) => {\r\n\t\t\t\t\tif(passable(x, y)){\r\n\t\t\t\t\t\taccept();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif(this.map.get(Game.player.x, Game.player.y).type=='sky'){\r\n\t\t\tGame.over(false);\r\n\t\t}\r\n\t\tdone.forEach(pick => FloorPicker.put(pick.join(',')));\r\n\t}\r\n}\r\n","import Tile from './tile';\r\nimport TileTypes from './tiletypes';\r\n\r\nexport default class TileMap {\r\n\tconstructor(width, height){\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.tiles = new Map();\r\n\t\tthis.items = [];\r\n\t\tthis.enemies = [];\r\n\t\tthis.start = {};\r\n\t\tthis.exit = [];\r\n\t\tfor(let x = 0; x < width; x++){\r\n\t\t\tfor(let y = 0; y < height; y++){\r\n\t\t\t\tthis.tiles.set(x+','+y,new Tile(x, y, TileTypes.SKY));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tget(x, y){\r\n\t\treturn this.tiles.get(x+','+y);\r\n\t}\r\n\tset(tile){\r\n\t\tthis.tiles.set(tile.x+','+tile.y,tile);\r\n\t}\r\n\tinBounds(x, y){\r\n\t\treturn x > 0 && x < this.width && y> 0 && y < this.height;\r\n\t}\r\n\tdropItem(item){\r\n\t\tthis.items.push(item);\r\n\t}\r\n\tdraw(){\r\n\t\t/*for(var tile of this.tiles.values()){\r\n\t\t\ttile.draw();\r\n\t\t}*/\r\n\t\tthis.items.forEach(item => item.draw());\r\n\t\t//this.enemies.forEach(enemy => enemy.draw());\r\n\t}\r\n}\r\n","import ROT from '../vendor/rot';\r\nimport PriorityQueue from '../vendor/priority-queue.min';\r\n\r\nfunction createQueue(room){\r\n  let tiles = [];\r\n  for(let x = room.getLeft() + 1; x < room.getRight(); x++){\r\n    for(let y = room.getTop() + 1; y < room.getBottom(); y++){\r\n      let isDoor = false;\r\n      room.getDoors((dX, dY) => {\r\n        if(x==dX && y==dY){\r\n          isDoor = true;\r\n        }\r\n      });\r\n      if(!isDoor){\r\n        tiles.push([x, y]);\r\n      }\r\n    }\r\n  }\r\n  return new PriorityQueue({\r\n    comparator: (a,b) => Math.floor(ROT.RNG.getUniform() * 3) - 1,\r\n    initialValues: tiles\r\n  });\r\n}\r\n\r\nexport default {\r\n  rooms: [],\r\n  index: 0,\r\n  setRooms(rooms){\r\n    rooms.forEach(room => this.rooms.push(createQueue(room)));\r\n  },\r\n  pick(){\r\n    try {\r\n      let tile = this.rooms[this.index].dequeue();\r\n      this.index = (this.index+1) % this.rooms.length;\r\n      return tile;\r\n    } catch (err) {\r\n      console.log(err.name + ': ' + err.message);\r\n      console.log(this.rooms);\r\n      console.log(this.index);\r\n    }\r\n  },\r\n  put(x, y, index){\r\n    try {\r\n      this.rooms[index].queue([x, y]);\r\n    } catch (err) {\r\n      console.log(err.name + ': ' + err.message);\r\n      console.log(this.rooms);\r\n      console.log(this.index);\r\n    }\r\n  },\r\n  empty(){\r\n    return !this.rooms.map((queue) => queue.length == 0).includes(false);\r\n  }\r\n}\r\n","import bus from '../vendor/eventbus.min';\r\n\r\nimport Game from './game';\r\n\r\nclass Frame {\r\n  constructor(opts) {\r\n    this.draw = opts.draw;\r\n    if(opts.delay){\r\n      this.delay = opts.delay;\r\n    }\r\n  }\r\n}\r\n\r\nexport default function animate(glyphs, ...frames){\r\n  frames = frames.map(opts => new Frame(opts));\r\n  let tiles = [];\r\n  let index = 0;\r\n  let cleanup = 0;\r\n  let done = false;\r\n  let count = 0;\r\n  let lastframe = performance.now();\r\n  let step = function(ts){\r\n    if(index < frames.length){\r\n      count += (ts - lastframe);\r\n\t  lastframe = ts;\r\n      if(!frames[index].delay || (frames[index].delay && count >= frames[index].delay)){\r\n        for(let instr of frames[index].draw){\r\n          if(!instr.condition || instr.condition()){\r\n            let x = instr.x;\r\n            let y = instr.y;\r\n            let glyph = null;\r\n            if(typeof instr.glyph == 'string'){\r\n              glyph = glyphs[instr.glyph];\r\n            }\r\n            else{\r\n              glyph = instr.glyph;\r\n            }\r\n            glyph.draw(x, y);\r\n            if(instr.reset || (instr.resetIf && instr.resetIf())){\r\n              tiles.push([x, y]);\r\n            }\r\n          }\r\n        }\r\n        index++;\r\n        count = 0;\r\n      }\r\n      requestAnimationFrame(step);\r\n    } else if (cleanup < tiles.length){\r\n      bus.dispatch('resetTile', this, ...tiles[cleanup]);\r\n      cleanup++;\r\n      requestAnimationFrame(step);\r\n    } else{\r\n      Game.engine.unlock();\r\n    }\r\n  }\r\n  Game.engine.lock();\r\n  requestAnimationFrame(step);\r\n}\r\n","import Controller from '../controller';\r\n\r\nlet actors = [];\r\nexport function isFrozen(actor) {\r\n  return actors.includes(actor);\r\n}\r\n\r\nexport default class FrozenController extends Controller {\r\n  constructor(time, controller){\r\n    super();\r\n    this.time = time;\r\n    this.prev = controller;\r\n  }\r\n  run(actor){\r\n    super.run(actor);\r\n    if (!isFrozen(actor)) {\r\n      actor.glyph.fg = 'skyblue';\r\n      for (var i = 0; i < this.time; i++) {\r\n        actor.glyph.chr = i + 1;\r\n      }\r\n      actors.push(actor);\r\n    }\r\n    else{\r\n      this.time--;\r\n      actor.glyph.back();\r\n      if(this.time == 0){\r\n        actor.glyph.back(); //Remove fg change\r\n        actor.controller = this.prev;\r\n        let index = actors.indexOf(actor);\r\n        actors.splice(index, 1);\r\n        actor.controller.run(actor);\r\n      }\r\n    }\r\n    actor.draw();\r\n  }\r\n}\r\n","import Controller from '../controller';\r\nimport { randInt } from '../utils';\r\n\r\nlet actors = [];\r\nexport function isBurning(actor) {\r\n  return actors.includes(actor);\r\n}\r\n\r\nexport default class BurningController extends Controller {\r\n  constructor(time, controller){\r\n    super();\r\n    this.time = time;\r\n    this.prev = controller;\r\n  }\r\n  run(actor){\r\n    super.run(actor);\r\n    if (!isBurning(actor)) {\r\n      actor.glyph.fg = 'orange';\r\n      for (var i = 0; i < this.time; i++) {\r\n        actor.glyph.chr = i + 1;\r\n      }\r\n      actors.push(actor);\r\n      actor.draw();\r\n    }\r\n    else{\r\n      this.time--;\r\n      actor.glyph.back();\r\n      if(this.time == 0){\r\n        actor.glyph.back(); //Remove fg change\r\n        actor.controller = this.prev;\r\n        let index = actors.indexOf(actor);\r\n        actors.splice(index, 1);\r\n        actor.controller.run(actor);\r\n      }\r\n      else{\r\n        let dirs = [[1,0],[0,1],[-1,0],[0,-1]];\r\n        let move = dirs[randInt(0,4)];\r\n        actor.move(actor.x + move[0], actor.y + move[1], true);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import bus from '../vendor/eventbus.min';\r\n\r\nimport Game from './game';\r\nimport Glyph from './glyph';\r\nimport Tile from './map/tile';\r\nimport TileTypes from './map/tiletypes';\r\nimport animate from './animate';\r\nimport FrozenController, { isFrozen } from './controllers/frozen';\r\nimport BurningController, { isBurning } from './controllers/burning';\r\n\r\nexport default {\r\n  revealExit(e, x, y){\r\n    Game.map.exitRevealed = true;\r\n    Game.map.set(new Tile(Game.map.exit[0], Game.map.exit[1], TileTypes.EXIT));\r\n    Game.map.draw();\r\n    Game.map.floors[x+','+y] = true;\r\n  },\r\n  windAttack(e, actor, dx, dy){\r\n    let x = actor.x;\r\n    let y = actor.y;\r\n    actor.move(actor.x + dx * 2, actor.y + dy * 2, e.target, true);\r\n    animate({\r\n      impact: new Glyph('o', 'skyblue'),\r\n      hTrail: new Glyph('-', 'skyblue'),\r\n      vTrail: new Glyph('|', 'skyblue')\r\n    },\r\n    {\r\n      draw:[\r\n        {\r\n          glyph: actor.glyph,\r\n          x: x + dx,\r\n          y: y + dy\r\n        },\r\n        {\r\n          glyph: 'impact',\r\n          x: x,\r\n          y: y,\r\n          reset: true\r\n        }\r\n      ],\r\n      delay: 50\r\n    },\r\n    {\r\n      draw: [\r\n        {\r\n          glyph: actor.glyph,\r\n          x: x + dx * 2,\r\n          y: y + dy * 2,\r\n          resetIf: () => actor.dead\r\n        },\r\n        {\r\n          glyph: 'hTrail',\r\n          x: x + dx,\r\n          y: y + dy,\r\n          reset: true,\r\n          condition: () => dy == 0,\r\n        },\r\n        {\r\n          glyph: 'vTrail',\r\n          x: x + dx,\r\n          y: y + dy,\r\n          reset: true,\r\n          condition: () => dx == 0\r\n        }\r\n      ],\r\n      delay: 50\r\n    });\r\n  },\r\n  freezeAttack(e, actor){\r\n    if (!isFrozen(actor)) {\r\n      actor.controller = new FrozenController(5, actor.controller);\r\n    }\r\n  },\r\n  fireAttack(e, actor){\r\n    if (!isBurning(actor)) {\r\n      actor.controller = new BurningController(5, actor.controller);\r\n    }\r\n  },\r\n  skyStep(e, x, y){\r\n    let tile = new Tile(x, y, TileTypes.FLOOR);\r\n    Game.map.set(tile);\r\n    tile.draw();\r\n  }\r\n}\r\n","import bus from '../vendor/eventbus.min';\r\nimport Events from './events';\r\n\r\nexport default class Item {\r\n\tconstructor(name, glyph, evt, slot, x, y){\r\n\t\tthis.name = name;\r\n\t\tthis.glyph = glyph;\r\n\t\tthis.x = x || -1;\r\n\t\tthis.y = y || -1;\r\n\t\tthis.slot = slot;\r\n\t\tif(evt){\r\n\t\t\tthis.event = evt;\r\n\t\t\tbus.addEventListener(evt.name, Events[evt.name]);\r\n\t\t}\r\n\t}\r\n\tdraw(){\r\n\t\tif(this.x > -1 && this.y > -1){\r\n\t\t\tthis.glyph.draw(this.x, this.y);\r\n\t\t}\r\n\t}\r\n}\r\n","import Glyph from './glyph';\r\n\r\nexport default {\r\n  EXIT_KEY: {\r\n    name: 'Golden Idol',\r\n    type: 'exit_key',\r\n    glyph: new Glyph('i', 'gold'),\r\n    event: 'revealExit',\r\n  },\r\n  WIND_RUNE: {\r\n    name: 'Wind Rune',\r\n    type: 'rune',\r\n    glyph: new Glyph('w', 'skyblue'),\r\n    event: {\r\n      type: 'attack',\r\n      name: 'windAttack'\r\n    }\r\n  },\r\n  EARTH_RUNE: {\r\n    name: 'Earth Rune',\r\n    type: 'rune',\r\n    glyph: new Glyph('e', 'brown'),\r\n    event: {\r\n      name: 'skyStep'\r\n    }\r\n  },\r\n  ICE_RUNE: {\r\n    name: 'Ice Rune',\r\n    type: 'rune',\r\n    glyph: new Glyph('i', 'white'),\r\n    event: {\r\n      type: 'attack',\r\n      name: 'freezeAttack'\r\n    }\r\n  },\r\n  FIRE_RUNE: {\r\n    name: 'Fire Rune',\r\n    type: 'rune',\r\n    glyph: new Glyph('f', 'orange'),\r\n    event: {\r\n      type: 'attack',\r\n      name: 'fireAttack'\r\n    }\r\n  }\r\n}\r\n","import Item from './item';\r\nimport Items from './items';\r\n\r\nexport default {\r\n  createItem(id, map, x, y){\r\n    let item = new Item(\r\n      Items[id].name,\r\n  \t\tItems[id].glyph,\r\n  \t\tItems[id].event,\r\n  \t\tItems[id].slot,\r\n  \t\tx,\r\n      y\r\n    );\r\n    if(map){\r\n      map.dropItem(item);\r\n    }\r\n    return item;\r\n  }\r\n}\r\n","import ROT from '../../vendor/rot';\r\n\r\nimport { distance, isFloor } from '../utils';\r\nimport Game from '../game';\r\nimport Controller from '../controller';\r\n\r\nexport default class SentinelController extends Controller {\r\n  run(actor){\r\n    super.run(actor);\r\n    //Initialize pathfinder\r\n    let finder = new ROT.Path.AStar(Game.player.x, Game.player.y, isFloor, {topology:4});\r\n    //Find path from AI to player\r\n    let path = [];\r\n    finder.compute(actor.x, actor.y, (x, y)=>{\r\n      path.push({x: x, y: y});\r\n    });\r\n    if(path.length <= 5){\r\n      //Change color\r\n      if(actor.glyph.fg != 'red'){\r\n        actor.glyph.fg = 'red';\r\n      }\r\n      //Move onto player's tile\r\n      if(path.length > 1){\r\n  \t\t\tactor.move(path[1].x, path[1].y);\r\n  \t\t}\r\n    }\r\n    else{\r\n      actor.glyph.back();\r\n    }\r\n    //actor.draw();\r\n    if(!Game.player.dead){\r\n      Game.player.controller.drawFOV();\r\n      Game.player.draw();\r\n    }\r\n  }\r\n}\r\n","import Glyph from './glyph';\r\n\r\nimport PlayerController from './controllers/player';\r\nimport SentinelController from './controllers/sentinel';\r\n\r\nexport default {\r\n  PLAYER: {\r\n    name: 'Player',\r\n    glyph: new Glyph('@','#fff'),\r\n    controller: PlayerController\r\n  },\r\n  SENTINEL: {\r\n    name: 'Sentinel',\r\n    glyph: new Glyph('s','grey'),\r\n    controller: SentinelController\r\n  }\r\n}\r\n","import Actor from './actor';\r\nimport Actors from './actors';\r\nimport Decorator from './decorator';\r\n\r\nexport default {\r\n  createActor(id, x, y){\r\n    return new Actor(\r\n      Actors[id].name,\r\n      x,\r\n      y,\r\n      Actors[id].glyph.copy(),\r\n      new Actors[id].controller()\r\n    );\r\n  },\r\n  createActors(id, n){\r\n    let picks = [];\r\n    let actors = [];\r\n    let i = 0;\r\n    while (!Decorator.empty() && i < n) {\r\n      actors.push(this.createActor(id, ...Decorator.pick()));\r\n      i++;\r\n    }\r\n    return actors;\r\n  }\r\n}\r\n","import ROT from '../../vendor/rot';\r\n\r\nimport { distance, checkCollision } from '../utils';\r\nimport TileMap from './map';\r\nimport Tile from './tile';\r\nimport Glyph from '../glyph';\r\nimport FloorPicker from '../floorpicker';\r\nimport Decorator from '../decorator';\r\nimport TileTypes from './tiletypes';\r\nimport ItemFactory from '../itemfactory';\r\nimport ActorFactory from '../actorfactory';\r\n\r\nconst distFromExit = 20;\r\nconst SENTINELS = 10;\r\n\r\nfunction placeItem(itemName, map) {\r\n\tItemFactory.createItem(itemName, map, ...Decorator.pick());\r\n}\r\n\r\nfunction placeEnemy(enemyName, map) {\r\n\tmap.enemies.push(ActorFactory.createActor(enemyName, ...Decorator.pick()));\r\n}\r\n\r\nexport default function generateMap(w,h){\r\n\tlet map = new TileMap(w, h);\r\n\tlet generator = new ROT.Map.Digger(w-2, h-2, { dugPercentage: 0.8});\r\n\t//Create Floor and Sky tiles\r\n\tgenerator.create((x, y, wall)=>{\r\n\t\tlet WALL = TileTypes.WALL;\r\n\t\tlet FLOOR = TileTypes.FLOOR;\r\n\t\tmap.set(new Tile(x+1, y+1, wall ? WALL: FLOOR));\r\n\t});\r\n\t//Create Items\r\n\tDecorator.setRooms(generator.getRooms());\r\n\tplaceItem('WIND_RUNE', map);\r\n\tplaceItem('EARTH_RUNE', map);\r\n\tplaceItem('ICE_RUNE', map);\r\n\tplaceItem('FIRE_RUNE', map);\r\n\r\n\r\n\r\n\t//Set Floor Picker for Collapser\r\n\tFloorPicker.setMap(map);\r\n\t//Place enemies\r\n\tmap.enemies = map.enemies.concat(ActorFactory.createActors('SENTINEL', SENTINELS));\r\n\t//Create exit\r\n\tlet pickExit = Decorator.pick();\r\n\tmap.exit = pickExit;\r\n\tmap.set(new Tile(map.exit[0], map.exit[1], TileTypes.EXIT));\r\n\t//Create start location\r\n\tlet done = [];\r\n\tlet pickStart = null;\r\n\tlet startIndex = Decorator.index;\r\n\twhile (!Decorator.empty()) {\r\n\t\tpickStart = Decorator.pick();\r\n\t\tif(distance(...pickStart, ...pickExit) >= distFromExit){\r\n\t\t\tmap.start = {x: pickStart[0], y: pickStart[1]};\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tdone.push(pickStart);\r\n\t\t}\r\n\t}\r\n\tdone.forEach(pick => Decorator.put(...pick, startIndex++));\r\n\treturn map;\r\n}\r\n","import ROT from '../vendor/rot';\r\nimport bus from '../vendor/eventbus.min';\r\n\r\nimport { passable, randInt } from './utils';\r\n\r\nimport Actor from './actor';\r\nimport PlayerController from './controllers/player';\r\nimport Collapser from './collapser';\r\nimport TileTypes from './map/tiletypes';\r\nimport generateMap from './map/generator';\r\nimport Glyph from './glyph';\r\nimport FloorPicker from './floorpicker';\r\nimport ActorFactory from './actorfactory';\r\n\r\nconst w = 64;\r\nconst h = 32;\r\n\r\nexport default {\r\n\tdisplay: null,\r\n\tmap: null,\r\n\tactors: [],\r\n\tplayer: null,\r\n\tscheduler: null,\r\n\tengine: null,\r\n\r\n\tinit(){\r\n\t\t//Initialize Display\r\n\t\tthis.display = new ROT.Display({width: w, height: h + 4});\r\n\t\tdocument.body.prepend(this.display.getContainer());\r\n\t\t//Initialize Turn Engine\r\n\t\tthis.scheduler = new ROT.Scheduler.Simple();\r\n\t\tthis.engine = new ROT.Engine(this.scheduler);\r\n\t\t//Generate map with dimensions (w, h)\r\n\t\tthis.map = generateMap(w, h);\r\n\t\t//Tell map to listen for reset tile events\r\n\t\tbus.addEventListener('resetTile', (e, x, y) => {\r\n\t\t\tthis.map.get(x, y).draw();\r\n\t\t});\r\n\t\t//Create Player\r\n\t\t//this.player = new Actor('Player',this.map.start.x,this.map.start.y,TileTypes.PLAYER.glyph, new PlayerController());\r\n\t\tthis.player = ActorFactory.createActor('PLAYER', this.map.start.x,this.map.start.y);\r\n\t\t//Draw map\r\n\t\tthis.player.controller.drawFOV();\r\n\t\t//this.map.draw();\r\n\t\tthis.player.draw();\r\n\t\t//Add Tile Collapser to map\r\n\t\t/*let distKeyToExit = distance(\r\n\t\t\tthis.map.exitKey[0],\r\n\t\t\tthis.map.exitKey[1],\r\n\t\t\tthis.map.exit[0],\r\n\t\t\tthis.map.exit[1]\r\n\t\t);*/\r\n\t\tlet astar = new ROT.Path.AStar(this.map.exit[0], this.map.exit[1], passable, {topology: 4});\r\n\t\tlet totalTime = 0;\r\n\t\tastar.compute(this.player.x, this.player.y, (x, y)=>{\r\n\t\t\ttotalTime++;\r\n\t\t})\r\n\t\tlet firstTimer = Math.max(totalTime, 100);\r\n\t\tlet secondTimer = Math.max(totalTime / 2, 50);\r\n\r\n\t\t//console.log(totalTime);\r\n\t\tlet c = new Collapser(\r\n\t\t\tthis.map,\r\n\t\t\tfirstTimer,\r\n\t\t\tsecondTimer\r\n\t\t\t//Math.floor(totalTime / 3) * 2 + randInt(0, 3),\r\n\t\t\t//Math.floor(totalTime / 3) + randInt(0, 3)\r\n\t\t\t//25,\r\n\t\t\t//10,\r\n\t\t);\r\n\t\t/*bus.addEventListener('revealExit',(e,x,y) => {\r\n\t\t\tc.timer.activate();\r\n\t\t\tc.state = \"notInTheWay\";\r\n\t\t});*/\r\n\r\n\t\t//Add Attack Event\r\n\t\tbus.addEventListener('attack', (e, actor, pusher, cb) => {\r\n\t\t\tlet dx = actor.x - e.target.x;\r\n\t\t\tlet dy = actor.y - e.target.y;\r\n\t\t\tswitch (e.target.name) {\r\n\t\t\t\tcase \"Player\":\r\n\t\t\t\t\tfor(let item of e.target.inventory){\r\n\t\t\t\t\t\tif(item.event && item.event.type == 'attack'){\r\n\t\t\t\t\t\t\tbus.dispatch(item.event.name, e.target, actor, dx, dy);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pusher){\r\n\t\t\t\t\t\tcb(actor.move(actor.x + dx, actor.y + dy, e.target));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tcb(actor.move(actor.x + dx, actor.y + dy, e.target));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//Add Timer Listener\r\n\t\tbus.addEventListener('tickTimer', (e) => {\r\n\t\t\tlet x = w - 3;\r\n\t\t\tlet timerText = '';\r\n\t\t\tlet count = e.target.count;\r\n\t\t\tif(count==0 && e.target.name=='Stage 2'){\r\n\t\t\t\ttimerText = '%c{red}';\r\n\t\t\t}\r\n\t\t\telse if(e.target.name=='Stage 2'){\r\n\t\t\t\ttimerText = '%c{yellow}';\r\n\t\t\t}\r\n\t\t\telse if(e.target.name=='Stage 1'){\r\n\t\t\t\ttimerText = '%c{green}';\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\ttimerText = '%c{black}';\r\n\t\t\t}\r\n\t\t\ttimerText+='%b{skyblue}';\r\n\t\t\tif(count < 10){\r\n\t\t\t\ttimerText += '00'+count;\r\n\t\t\t}\r\n\t\t\telse if(count < 100){\r\n\t\t\t\ttimerText += '0' + count;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\ttimerText += count;\r\n\t\t\t}\r\n\t\t\tthis.display.drawText(x, 0, timerText);\r\n\t\t});\r\n\t\tbus.dispatch('tickTimer', c.timer);\r\n\r\n\t\t//Create UI\r\n\t\tthis.resetItemsUI();\r\n\t\tbus.addEventListener('pickup', (e, item) => {\r\n\t\t\tif(e.target == this.player){\r\n\t\t\t\tlet actor = e.target;\r\n\t\t\t\tif(typeof item.slot == \"undefined\" || item.slot){\r\n\t\t\t\t\tthis.display.drawText(3, h + actor.inventory.length-1, item.name);\r\n\t\t\t\t}\r\n\t\t\t\telse if(item.type='exit_key'){\r\n\t\t\t\t\tthis.display.drawText(Math.floor(w/2)+1,h,item.name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.engine.start();\r\n\t},\r\n\tresetItemsUI(){\r\n\t\tlet blanks = \" \".repeat(Math.floor(w / 2) - 3);\r\n\t\tfor(let i = 0; i < 4; i++){\r\n\t\t\tlet text = (i+1)+\": \"+(this.player.inventory[i] || blanks+\"|\");\r\n\t\t\tthis.display.drawText(0, h+i, text);\r\n\t\t}\r\n\t},\r\n\tnextLevel(){\r\n\t\tthis.scheduler.clear();\r\n\t\tthis.engine.lock();\r\n\t\tlet text = 'Multiple levels not implemented yet.'\r\n\t\tthis.display.drawText(Math.floor(w/2)-Math.floor(text.length/2),Math.floor(h/2),text);\r\n\t},\r\n\tover(victory){\r\n\t\t//Game ended. Delete Scheduler and Engine\r\n\t\tthis.scheduler.clear();\r\n\t\t//this.engine = null;\r\n\t\tlet text = '';\r\n\t\tif(victory){\r\n\t\t\ttext = 'Congradulations! You won!';\r\n\t\t}\r\n\t\telse{\r\n\t\t\ttext = 'Game over. You lost!';\r\n\t\t}\r\n\t\tthis.display.drawText(Math.floor(w/2)-Math.floor(text.length/2),Math.floor(h/2),text);\r\n\t}\r\n}\r\n","import ROT from \"../vendor/rot\"\r\nimport Game from './game'\r\n\r\nif(!ROT.isSupported()){\r\n\talert(\"The rot.js library isn't supported by your browser.\");\r\n}\r\nelse{\r\n\tGame.init();\r\n}"],"names":["define","this","ROT","bus","require","PriorityQueue","actors"],"mappings":"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MAAM,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,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"}